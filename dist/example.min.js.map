{"version":3,"sources":["webpack:///webpack/bootstrap 9b27162293eb254d1301","webpack:///./example.js","webpack:///./lib/impactES6/index.js","webpack:///(webpack)/buildin/module.js","webpack:///[\\\\/]impactES6|weltmeister[\\\\/]).)*\\.js$","webpack:///./lib/game/main.js","webpack:///./lib/impact/animation.js","webpack:///./lib/impact/background-map.js","webpack:///./lib/impact/collision-map.js","webpack:///./lib/impact/debug/debug.js","webpack:///./lib/impact/debug/entities-panel.js","webpack:///./lib/impact/debug/graph-panel.js","webpack:///./lib/impact/debug/maps-panel.js","webpack:///./lib/impact/debug/menu.js","webpack:///./lib/impact/entity-pool.js","webpack:///./lib/impact/entity.js","webpack:///./lib/impact/font.js","webpack:///./lib/impact/game.js","webpack:///./lib/impact/image.js","webpack:///./lib/impact/impact.js","webpack:///./lib/impact/input.js","webpack:///./lib/impact/loader.js","webpack:///./lib/impact/map.js","webpack:///./lib/impact/sound.js","webpack:///./lib/impact/system.js","webpack:///./lib/impact/timer.js","webpack:///[\\\\/]impactES6|weltmeister[\\\\/]).)*\\.js$?f0a4","webpack:///./example/lib/game/entities/bullets/BulletBombe.js","webpack:///./example/lib/game/entities/bullets/bullet.js","webpack:///./example/lib/game/entities/characters/Character.js","webpack:///./example/lib/game/entities/characters/CharacterFlight.js","webpack:///./example/lib/game/entities/characters/CharacterSpike.js","webpack:///./example/lib/game/levels/level.js","webpack:///./example/lib/game/main.js","webpack:///./example/lib/game/screens/Arena.js","webpack:///./example/lib/impact/animation.js","webpack:///./example/lib/impact/background-map.js","webpack:///./example/lib/impact/collision-map.js","webpack:///./example/lib/impact/debug/debug.js","webpack:///./example/lib/impact/debug/entities-panel.js","webpack:///./example/lib/impact/debug/graph-panel.js","webpack:///./example/lib/impact/debug/maps-panel.js","webpack:///./example/lib/impact/debug/menu.js","webpack:///./example/lib/impact/entity-pool.js","webpack:///./example/lib/impact/entity.js","webpack:///./example/lib/impact/font.js","webpack:///./example/lib/impact/game.js","webpack:///./example/lib/impact/image.js","webpack:///./example/lib/impact/impact.js","webpack:///./example/lib/impact/input.js","webpack:///./example/lib/impact/loader.js","webpack:///./example/lib/impact/map.js","webpack:///./example/lib/impact/sound.js","webpack:///./example/lib/impact/system.js","webpack:///./example/lib/impact/timer.js"],"names":["ig","requirecontext","mergeES5","window","require","igES6","module","exports","_importES5","_storedData","modules","requires","defines","name","push","args","Array","from","arguments","map","arg","_ready","moduleName","path","split","join","define","propName","hasOwnProperty","setVendorAttribute","getVendorAttribute","normalizeVendorAttribute","x","apply","bindProperties","currentClass","props","propname","prototype","_DOMReady","element","attribute","value","export","MyGame","system","width","y","height","font","draw","Font","ALIGN","CENTER","Game","main","AnimationSheet","Class","extend","image","init","Image","Animation","sheet","timer","sequence","flip","pivot","frame","tile","loopCount","alpha","angle","frameTime","stop","Timer","rewind","set","gotoFrame","f","update","gotoRandomFrame","Math","floor","random","length","frameTotal","delta","targetX","targetY","bbsize","max","context","globalAlpha","drawTile","save","translate","getDrawPos","rotate","restore","BackgroundMap","Map","tiles","scroll","distance","repeat","tilesetName","foreground","enabled","preRender","preRenderedChunks","chunkSize","debugChunks","anims","tilesize","data","tileset","parent","setTileset","setScreenPos","preRenderMapToChunks","totalWidth","scale","totalHeight","min","chunkCols","ceil","chunkRows","chunkWidth","chunkHeight","preRenderChunk","cx","cy","w","h","tw","th","nx","ny","tx","ty","chunk","$new","retinaResolutionEnabled","chunkContext","getContext","System","scaleMode","screenContext","loaded","drawPreRendered","drawTiled","dx","dy","minChunkX","minChunkY","maxChunkX","realWidth","maxChunkY","realHeight","maxRealChunkX","maxRealChunkY","nudgeY","nudgeX","drawImage","drawCount","strokeStyle","strokeRect","anim","tileOffsetX","toInt","tileOffsetY","pxOffsetX","pxOffsetY","pxMinX","pxMinY","pxMaxX","pxMaxY","mapY","pxY","tileY","mapX","pxX","tileX","CollisionMap","lastSlope","tiledef","defaultTileDef","t","trace","vx","vy","objectWidth","objectHeight","res","collision","slope","pos","steps","abs","sx","sy","i","_traceStep","rvx","rvy","step","firstTileY","lastTileY","prevTileX","_checkTileDef","firstTileX","lastTileX","prevTileY","def","lx","ly","lvx","lvy","solid","sqrt","proj","px","py","H","N","M","SOLID","NON_SOLID","staticNoCollision","Entity","inject","colors","names","velocities","boxes","_debugShowBoxes","lineWidth","round","game","screen","size","_debugShowVelocities","_debugDrawLine","vel","_debugShowNames","fillStyle","fillText","target","ent","getEntityByName","color","beginPath","moveTo","lineTo","stroke","closePath","_debugEnableChecks","oldCheckPair","checkPair","a","b","debug","addPanel","type","DebugPanel","label","options","object","property","graph","beginClock","endClock","checkEntities","DebugGraphPanel","clocks","marks","textY","ms","timeBeforeRun","mark16ms","mark33ms","msHeight","innerWidth","container","appendChild","ctx","fillRect","addGraphMark","addClock","mark","bind","span","className","textContent","style","top","description","backgroundColor","number","document","createTextNode","legend","current","start","Date","now","avg","html","offset","c","msg","active","beforeRun","afterRun","nextFrameDue","fps","ci","toFixed","textAlign","textBaseline","m","loadLevel","panels","maps","load","DebugMapsPanel","mapScreens","backgroundMaps","innerHTML","subPanel","head","addOption","DebugOption","generateMiniMap","panel","id","s","ts","tsctx","ws","hs","mapCanvas","clearColor","mapContainer","mapScreen","left","run","setGameNow","gameClass","ready","Debug","numbers","panelMenu","activePanel","debugTime","debugTickAvg","debugRealTime","rel","href","prefix","$","numberContainer","console","log","assert","show","showNumber","addNumber","panelDef","opt","display","menuItem","addEventListener","ev","togglePanel","inserted","childNodes","cn","insertBefore","showPanel","toggle","dsp","p","entities","option","labelName","disabled","click","setLabel","stopPropagation","preventDefault","EntityPool","pools","mixin","staticInstantiate","settings","getFromPool","classId","erase","putInPool","enableFor","pool","instance","pop","reset","drainPool","drainAllPools","last","accel","friction","maxVel","zIndex","gravityFactor","standing","bounciness","minBounceVelocity","__id","animSheet","currentAnim","health","checkAgainst","collides","_killed","slopeStanding","toRad","_lastId","merge","proto","constructor","addAnim","gravity","tick","getNewVelocity","mx","my","collisionMap","handleMovementTrace","limit","lengthSquared","dot","atan2","_rscreen","kill","removeEntity","receiveDamage","amount","touches","other","distanceTo","xd","yd","angleTo","check","collideWith","axis","COLLIDES","NEVER","LITE","PASSIVE","ACTIVE","FIXED","TYPE","NONE","A","B","BOTH","solveCollision","weak","seperateOnYAxis","seperateOnXAxis","right","nudge","strong","resWeak","v2","resLeft","resRight","bottom","resTop","resBottom","widthMap","indices","firstChar","letterSpacing","lineSpacing","onload","_loadMetrics","widthForString","text","indexOf","lines","_widthForLine","charCodeAt","heightForString","align","toString","lineHeight","RIGHT","_drawChar","charX","charY","charWidth","charHeight","getImagePixels","currentChar","currentWidth","index","LEFT","namedEntities","backgroundAnims","autoSort","sortBy","cellSize","_deferredKill","_levelToLoad","_doSortEntities","SORT","Z_INDEX","spawnEntity","sortEntities","layer","ld","newMap","loadLevelDeferred","getMapByName","getEntitiesByType","entityClass","global","sort","sortEntitiesDeferred","updateEntities","clear","mapIndex","drawEntities","hash","e","entity","checked","xmin","ymin","xmax","ymax","cell","POS_X","POS_Y","failed","loadCallback","cache","onerror","src","nocache","addResource","reload","event","resize","origPixels","widthScaled","heightScaled","scaled","scaledCtx","scaledPixels","getImageData","indexScaled","putImageData","sourceX","sourceY","tileWidth","tileHeight","flipX","flipY","tileWidthScaled","tileHeightScaled","scaleX","scaleY","reloadCache","Number","istart","istop","ostart","ostop","precision","pow","PI","toDeg","Object","defineProperty","item","splice","Function","oThis","TypeError","aArgs","slice","call","fToBind","fNOP","fBound","concat","version","resources","baked","ua","ImpactPrefix","lib","_current","_loadQueue","_waitForOnload","selector","charAt","getElementById","substr","getElementsByTagName","createElement","copy","HTMLElement","l","original","extended","key","ext","ksort","obj","keys","values","el","attr","val","uc","toUpperCase","prefixedVal","canvas","SCALE","CRISP","ratio","getImageDataHD","body","_initDOMReady","resource","setNocache","condition","_loadScript","requiredFrom","replace","script","_execModules","modulesLoaded","dependenciesLoaded","j","unresolved","unloaded","setTimeout","_boot","location","match","pixelRatio","devicePixelRatio","viewport","innerHeight","availWidth","availHeight","iPhone","test","navigator","userAgent","iPhone4","iPad","android","winPhone","iOS","mobile","touchDevice","msMaxTouchPoints","readyState","requestAnimationFrame","next","setAnimation","callback","animate","clearAnimation","setInterval","clearInterval","initializing","fnTest","xyz","lastClassId","prop","fn","tmp","ret","ImpactMixin","canvasId","loaderClass","input","Input","soundManager","SoundManager","music","Music","loader","Loader","KEY","bindings","actions","presses","locks","delayedKeyup","isUsingMouse","isUsingKeyboard","isUsingAccelerometer","mouse","z","initMouse","mouseWheelBound","mousewheel","contextmenu","keydown","keyup","mousemove","msTouchAction","initKeyboard","initAccelerometer","devicemotion","wheelDelta","detail","code","MWHEEL_UP","MWHEEL_DOWN","action","internalWidth","parseInt","offsetWidth","getBoundingClientRect","clientX","clientY","MOUSE2","tag","tagName","keyCode","button","MOUSE1","focus","accelerationIncludingGravity","bindTouch","that","touchStart","touchEnd","unbind","unbindAll","state","pressed","released","clearPressed","status","done","_unloaded","_drawStatus","_intervalId","_loadCallbackBound","_loadCallback","end","loadResource","setGame","pxWidth","pxHeight","getTile","setTile","clips","volume","format","Sound","Audio","probe","use","canPlayType","mime","useWebAudio","audioContext","AudioContext","boundWebAudioUnlock","unlockWebAudio","removeEventListener","buffer","createBuffer","source","createBufferSource","connect","destination","multiChannel","loadWebAudio","loadHTML5Audio","realPath","audioSource","WebAudioSource","request","XMLHttpRequest","open","responseType","decodeAudioData","response","send","channels","clip","cb","preload","get","paused","ended","currentTime","pause","tracks","namedTracks","currentTrack","currentIndex","_volume","_loop","_fadeInterval","_fadeTimer","_endedCallbackBound","_endedCallback","getVolume","setVolume","getLooping","setLooping","add","track","stopRunLoop","loop","play","newTrack","v","fadeOut","time","fadeTimer","_fadeStep","currentClip","sources","gain","createGain","onended","err","FORMAT","MP3","M4A","OGG","WEBM","CAF","nwf","animationId","newGameClass","running","delegate","clock","drawMode","setDelegate","startRunLoop","DRAW","AUTHENTIC","SMOOTH","SUBPIXEL","imageRendering","msInterpolationMode","base","pausedAt","seconds","unpause","_last","MIN_VALUE","timeScale","maxStep","BulletBombe","EntityBullet","owner","Character","updateAnimation","speedType","speed","setDirection","timerWeaponWait","timeWeaponWait","CharacterFlight","CharacterSpike","LevelLevel","LevelLevelResources","Arena","UP_ARROW","RIGHT_ARROW","LEFT_ARROW","DOWN_ARROW","SPACE","player","spike","updateInputs","up","down","setVel","fire"],"mappings":"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","file":"example.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 9b27162293eb254d1301\n **/","// We redefine the requirecontext to be able to require all ES5 files presents in the example folder\nig.requirecontext = require.context('example/lib/', true, /^((?![\\\\/]impactES6|weltmeister[\\\\/]).)*\\.js$/);\n\n\n// Import impact library\nimport \"lib/impact/impact\";\n\n// Merge features into new ImpactEngine\nig.mergeES5();\nwindow.ig = ig;\n\nrequire('example/lib/game/main');\n\n\n/** WEBPACK FOOTER **\n ** ./example.js\n **/","var igES6 = module.exports = {\n    /**\n     * This variable is at true when igES6 has all method of impact library\n     */\n    _importES5: false,\n\n    /**\n     * Data provided by ig.module, ig.requires and ig.defines before _importES5 at true\n     */\n    _storedData: {modules: [], requires: [], defines: []},\n\n    /**\n     * List of all modules ES5 loaded\n     */\n    modules: {},\n\n    /**\n     * Context folder of all library (needed for dynamic require)\n     */\n    requirecontext: require.context('lib/', true, /^((?![\\\\/]impactES6|weltmeister[\\\\/]).)*\\.js$/),\n\n    /**\n     * Define a new module (support ES5)\n     * @param name\n     * @returns Object\n     */\n    module: function (name)\n    {\n        if (!name) {\n            return this;\n\n        }\n\n        if (!this._importES5) {\n            this._storedData.modules.push(name);\n\n        } else if (!this.modules[name]) {\n            this.modules[name] = true;\n\n        }\n\n        return this;\n    },\n\n    /**\n     * Requires all module for the current module (support ES5)\n     * @returns Object\n     */\n    requires: function ()\n    {\n        var args = Array.from(arguments);\n\n        if (!this._importES5) {\n            this._storedData.requires.push(args);\n            return this;\n        }\n\n        args.map((arg) => {\n            if (arg === \"dom.ready\") {\n                this._ready = true;\n\n            } else {\n                this.require(arg);\n\n            }\n        });\n\n        return this;\n    },\n\n    /**\n     * Require a module\n     * @param moduleName\n     */\n    require: function (moduleName)\n    {\n        if (!this.modules[moduleName] && moduleName !== \"impact.impact\") {\n            let path = \"./\" + moduleName.split('.').join('/') + '.js';\n            this.requirecontext(path);\n        }\n    },\n\n    /**\n     * Define a module (ig.module must be defined before) (support ES5)\n     * @param define\n     */\n    defines: function (define)\n    {\n        if (!this._importES5) {\n            this._storedData.defines.push(define);\n\n        } else {\n            define();\n\n        }\n    },\n\n    /**\n     * Merge all storedData provided by old module before _importES5\n     */\n    mergeES5: function ()\n    {\n        for (var propName in window.ig) {\n            if (!this.hasOwnProperty(propName) && window.ig.hasOwnProperty(propName)) {\n                this[propName] = window.ig[propName];\n            }\n        }\n\n        this.setVendorAttribute         = window.ig.setVendorAttribute;\n        this.getVendorAttribute         = window.ig.getVendorAttribute;\n        this.normalizeVendorAttribute   = window.ig.normalizeVendorAttribute;\n\n        this._importES5 = true;\n\n        this._storedData.modules.map(x => this.module(x));\n        this._storedData.requires.map(x => this.requires.apply(this, x));\n        this._storedData.defines.map(x => this.defines(x));\n    },\n\n    /**\n     * Bind props to ES6 currentClass\n     * @param currentClass\n     * @param props\n     * @returns {*}\n     */\n    bindProperties: function (currentClass, props)\n    {\n        for (var propname in props) {\n            currentClass.prototype[propname] = props[propname];\n        }\n\n        return currentClass;\n    },\n\n    /**\n     * Override of ImpactJS\n     * @returns {boolean}\n     * @private\n     */\n    _DOMReady: function()\n    {\n        return !!this._ready;\n    },\n\n    /**\n     * Same as ImpactJS\n     * @param element\n     * @param attribute\n     * @param value\n     */\n    setVendorAttribute: (element, attribute, value) => {\n        window.ig.setVendorAttribute(element, attribute, value);\n    },\n\n    /**\n     * Same as ImpactJS\n     * @param element\n     * @param attribute\n     * @returns {*}\n     */\n    getVendorAttribute: (element, attribute) => {\n        return window.ig.getVendorAttribute(element, attribute);\n    },\n\n    /**\n     * Same as ImpactJS\n     * @param element\n     * @param attribute\n     */\n    normalizeVendorAttribute: (element, attribute) => {\n        window.ig.normalizeVendorAttribute(element, attribute);\n    }\n};\n\nmodule.export   = igES6;\n\n\n/** WEBPACK FOOTER **\n ** ./lib/impactES6/index.js\n **/","/*** IMPORTS FROM imports-loader ***/\n(function() {\n\nmodule.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n}.call(window));\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/module.js\n ** module id = 2\n ** module chunks = 0 1\n **/","var map = {\n\t\"./game/main.js\": 4,\n\t\"./impact/animation.js\": 5,\n\t\"./impact/background-map.js\": 6,\n\t\"./impact/collision-map.js\": 7,\n\t\"./impact/debug/debug.js\": 8,\n\t\"./impact/debug/entities-panel.js\": 9,\n\t\"./impact/debug/graph-panel.js\": 10,\n\t\"./impact/debug/maps-panel.js\": 11,\n\t\"./impact/debug/menu.js\": 12,\n\t\"./impact/entity-pool.js\": 13,\n\t\"./impact/entity.js\": 14,\n\t\"./impact/font.js\": 15,\n\t\"./impact/game.js\": 16,\n\t\"./impact/image.js\": 17,\n\t\"./impact/impact.js\": 18,\n\t\"./impact/input.js\": 19,\n\t\"./impact/loader.js\": 20,\n\t\"./impact/map.js\": 21,\n\t\"./impact/sound.js\": 22,\n\t\"./impact/system.js\": 23,\n\t\"./impact/timer.js\": 24\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\treturn map[req] || (function() { throw new Error(\"Cannot find module '\" + req + \"'.\") }());\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 3;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib ^((?![\\\\/]impactES6|weltmeister[\\\\/]).)*\\.js$\n ** module id = 3\n ** module chunks = 0 1\n **/","// Method to require an impact library\n// Once it is loaded, it doesn't need to require it again\nig.require('impact.game');\nig.require('impact.debug.debug');\n\n\nexport default class MyGame extends ig.Game {\n    init ()\n    {\n        // Custom actions at initialization\n    }\n\n    update ()\n    {\n        // Update all entities and backgroundMaps\n        super.update();\n\n        // Add your own, additional update code here\n    }\n\n    draw ()\n    {\n        // Draw all entities and backgroundMaps\n        super.draw();\n\n        // Add your own drawing code here\n        var x = ig.system.width / 2,\n            y = ig.system.height / 2;\n\n        this.font.draw('It Works!', x, y, ig.Font.ALIGN.CENTER);\n    }\n}\n\n// Declare properties\nig.bindProperties(MyGame, {\n    font : new ig.Font('media/04b03.font.png')\n});\n\n\nig.main('#canvas', MyGame, 60, 320, 240, 2);\n\n\n/** WEBPACK FOOTER **\n ** ./lib/game/main.js\n **/","ig.module(\n\t'impact.animation'\n)\n.requires(\n\t'impact.timer',\n\t'impact.image' \n)\n.defines(function(){ \"use strict\";\n\nig.AnimationSheet = ig.Class.extend({\n\twidth: 8,\n\theight: 8,\n\timage: null,\n\t\n\tinit: function( path, width, height ) {\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\t\n\t\tthis.image = new ig.Image( path );\n\t}\n});\n\n\n\nig.Animation = ig.Class.extend({\n\tsheet: null,\n\ttimer: null,\n\t\n\tsequence: [],\t\n\tflip: {x: false, y: false},\n\tpivot: {x: 0, y: 0},\n\t\n\tframe: 0,\n\ttile: 0,\n\tloopCount: 0,\n\talpha: 1,\n\tangle: 0,\n\t\n\t\n\tinit: function( sheet, frameTime, sequence, stop ) {\n\t\tthis.sheet = sheet;\n\t\tthis.pivot = {x: sheet.width/2, y: sheet.height/2 };\n\t\tthis.timer = new ig.Timer();\n\n\t\tthis.frameTime = frameTime;\n\t\tthis.sequence = sequence;\n\t\tthis.stop = !!stop;\n\t\tthis.tile = this.sequence[0];\n\t},\n\t\n\t\n\trewind: function() {\n\t\tthis.timer.set();\n\t\tthis.loopCount = 0;\n\t\tthis.frame = 0;\n\t\tthis.tile = this.sequence[0];\n\t\treturn this;\n\t},\n\t\n\t\n\tgotoFrame: function( f ) {\n\t\t// Offset the timer by one tenth of a millisecond to make sure we\n\t\t// jump to the correct frame and circumvent rounding errors\n\t\tthis.timer.set( this.frameTime * -f - 0.0001 );\n\t\tthis.update();\n\t},\n\t\n\t\n\tgotoRandomFrame: function() {\n\t\tthis.gotoFrame( Math.floor(Math.random() * this.sequence.length) )\n\t},\n\t\n\t\n\tupdate: function() {\n\t\tvar frameTotal = Math.floor(this.timer.delta() / this.frameTime);\n\t\tthis.loopCount = Math.floor(frameTotal / this.sequence.length);\n\t\tif( this.stop && this.loopCount > 0 ) {\n\t\t\tthis.frame = this.sequence.length - 1;\n\t\t}\n\t\telse {\n\t\t\tthis.frame = frameTotal % this.sequence.length;\n\t\t}\n\t\tthis.tile = this.sequence[ this.frame ];\n\t},\n\t\n\t\n\tdraw: function( targetX, targetY ) {\n\t\tvar bbsize = Math.max(this.sheet.width, this.sheet.height);\n\t\t\n\t\t// On screen?\n\t\tif(\n\t\t   targetX > ig.system.width || targetY > ig.system.height ||\n\t\t   targetX + bbsize < 0 || targetY + bbsize < 0\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif( this.alpha != 1) {\n\t\t\tig.system.context.globalAlpha = this.alpha;\n\t\t}\n\t\t\n\t\tif( this.angle == 0 ) {\t\t\n\t\t\tthis.sheet.image.drawTile(\n\t\t\t\ttargetX, targetY,\n\t\t\t\tthis.tile, this.sheet.width, this.sheet.height,\n\t\t\t\tthis.flip.x, this.flip.y\n\t\t\t);\n\t\t}\n\t\telse {\n\t\t\tig.system.context.save();\n\t\t\tig.system.context.translate(\n\t\t\t\tig.system.getDrawPos(targetX + this.pivot.x),\n\t\t\t\tig.system.getDrawPos(targetY + this.pivot.y)\n\t\t\t);\n\t\t\tig.system.context.rotate( this.angle );\n\t\t\tthis.sheet.image.drawTile(\n\t\t\t\t-this.pivot.x, -this.pivot.y,\n\t\t\t\tthis.tile, this.sheet.width, this.sheet.height,\n\t\t\t\tthis.flip.x, this.flip.y\n\t\t\t);\n\t\t\tig.system.context.restore();\n\t\t}\n\t\t\n\t\tif( this.alpha != 1) {\n\t\t\tig.system.context.globalAlpha = 1;\n\t\t}\n\t}\n});\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./lib/impact/animation.js\n **/","ig.module(\n\t'impact.background-map'\n)\n.requires(\n\t'impact.map',\n\t'impact.image'\n)\n.defines(function(){ \"use strict\";\n\nig.BackgroundMap = ig.Map.extend({\t\n\ttiles: null,\n\tscroll: {x: 0, y:0},\n\tdistance: 1,\n\trepeat: false,\n\ttilesetName: '',\n\tforeground: false,\n\tenabled: true,\n\t\n\tpreRender: false,\n\tpreRenderedChunks: null,\n\tchunkSize: 512,\n\tdebugChunks: false,\n\t\n\t\n\tanims: {},\n\t\n\t\n\tinit: function( tilesize, data, tileset ) {\n\t\tthis.parent( tilesize, data );\n\t\tthis.setTileset( tileset );\n\t},\n\t\n\t\n\tsetTileset: function( tileset ) {\n\t\tthis.tilesetName  = tileset instanceof ig.Image ? tileset.path : tileset;\n\t\tthis.tiles = new ig.Image( this.tilesetName );\n\t\tthis.preRenderedChunks = null;\n\t},\n\t\n\t\n\tsetScreenPos: function( x, y ) {\n\t\tthis.scroll.x = x / this.distance;\n\t\tthis.scroll.y = y / this.distance;\n\t},\n\t\n\t\n\tpreRenderMapToChunks: function() {\n\t\tvar totalWidth = this.width * this.tilesize * ig.system.scale,\n\t\t\ttotalHeight = this.height * this.tilesize * ig.system.scale;\n\t\t\n\t\t// If this layer is smaller than the chunkSize, adjust the chunkSize\n\t\t// accordingly, so we don't have as much overdraw\n\t\tthis.chunkSize = Math.min( Math.max(totalWidth, totalHeight), this.chunkSize );\n\t\t\t\n\t\tvar chunkCols = Math.ceil(totalWidth / this.chunkSize),\n\t\t\tchunkRows = Math.ceil(totalHeight / this.chunkSize);\n\t\t\n\t\tthis.preRenderedChunks = [];\n\t\tfor( var y = 0; y < chunkRows; y++ ) {\n\t\t\tthis.preRenderedChunks[y] = [];\n\t\t\t\n\t\t\tfor( var x = 0; x < chunkCols; x++ ) {\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tvar chunkWidth = (x == chunkCols-1)\n\t\t\t\t\t? totalWidth - x * this.chunkSize\n\t\t\t\t\t: this.chunkSize;\n\t\t\t\t\t\n\t\t\t\tvar chunkHeight = (y == chunkRows-1)\n\t\t\t\t\t? totalHeight - y * this.chunkSize\n\t\t\t\t\t: this.chunkSize;\n\t\t\t\t\t\n\t\t\t\tthis.preRenderedChunks[y][x] = this.preRenderChunk( x, y, chunkWidth, chunkHeight );\n\t\t\t}\n\t\t}\n\t},\n\t\n\t\n\tpreRenderChunk: function( cx, cy, w, h ) {\n\t\tvar tw = w / this.tilesize / ig.system.scale + 1,\n\t\t\tth = h / this.tilesize / ig.system.scale + 1;\n\t\t\n\t\tvar nx = (cx * this.chunkSize / ig.system.scale) % this.tilesize,\n\t\t\tny = (cy * this.chunkSize / ig.system.scale) % this.tilesize;\n\t\t\n\t\tvar tx = Math.floor(cx * this.chunkSize / this.tilesize / ig.system.scale),\n\t\t\tty = Math.floor(cy * this.chunkSize / this.tilesize / ig.system.scale);\n\t\t\n\t\t\n\t\tvar chunk = ig.$new('canvas');\n\t\tchunk.width = w;\n\t\tchunk.height = h;\n\t\tchunk.retinaResolutionEnabled = false; // Opt out for Ejecta\n\t\t\n\t\tvar chunkContext = chunk.getContext('2d');\n\t\tig.System.scaleMode(chunk, chunkContext);\n\t\t\n\t\tvar screenContext = ig.system.context;\n\t\tig.system.context = chunkContext;\n\t\t\n\t\tfor( var x = 0; x < tw; x++ ) {\n\t\t\tfor( var y = 0; y < th; y++ ) {\n\t\t\t\tif( x + tx < this.width && y + ty < this.height ) {\n\t\t\t\t\tvar tile = this.data[y+ty][x+tx];\n\t\t\t\t\tif( tile ) {\n\t\t\t\t\t\tthis.tiles.drawTile(\n\t\t\t\t\t\t\tx * this.tilesize - nx,\ty * this.tilesize - ny,\n\t\t\t\t\t\t\ttile - 1, this.tilesize\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tig.system.context = screenContext;\n\t\t\n\t\treturn chunk;\n\t},\n\t\n\t\n\tdraw: function() {\n\t\tif( !this.tiles.loaded || !this.enabled ) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif( this.preRender ) {\n\t\t\tthis.drawPreRendered();\n\t\t}\n\t\telse {\n\t\t\tthis.drawTiled();\n\t\t}\n\t},\n\t\t\n\t\n\tdrawPreRendered: function() {\n\t\tif( !this.preRenderedChunks ) {\n\t\t\tthis.preRenderMapToChunks();\n\t\t}\n\t\t\n\t\tvar dx = ig.system.getDrawPos(this.scroll.x),\n\t\t\tdy = ig.system.getDrawPos(this.scroll.y);\n\t\t\t\n\t\t\t\n\t\tif( this.repeat ) {\n\t\t\tvar w = this.width * this.tilesize * ig.system.scale;\n\t\t\tdx = (dx%w + w) % w;\n\n\t\t\tvar h = this.height * this.tilesize * ig.system.scale;\n\t\t\tdy = (dy%h + h) % h;\n\t\t}\n\t\t\n\t\tvar minChunkX = Math.max( Math.floor(dx / this.chunkSize), 0 ),\n\t\t\tminChunkY = Math.max( Math.floor(dy / this.chunkSize), 0 ),\n\t\t\tmaxChunkX = Math.ceil((dx+ig.system.realWidth) / this.chunkSize),\n\t\t\tmaxChunkY = Math.ceil((dy+ig.system.realHeight) / this.chunkSize),\n\t\t\tmaxRealChunkX = this.preRenderedChunks[0].length,\n\t\t\tmaxRealChunkY = this.preRenderedChunks.length;\n\t\t\t\n\t\t\n\t\tif( !this.repeat ) {\n\t\t\tmaxChunkX = Math.min( maxChunkX, maxRealChunkX );\n\t\t\tmaxChunkY = Math.min( maxChunkY, maxRealChunkY );\n\t\t}\n\t\t\n\t\t\n\t\tvar nudgeY = 0;\n\t\tfor( var cy = minChunkY; cy < maxChunkY; cy++ ) {\n\t\t\t\n\t\t\tvar nudgeX = 0;\n\t\t\tfor( var cx = minChunkX; cx < maxChunkX; cx++ ) {\n\t\t\t\tvar chunk = this.preRenderedChunks[cy % maxRealChunkY][cx % maxRealChunkX];\n\t\t\t\t\n\t\t\t\tvar x = -dx + cx * this.chunkSize - nudgeX;\n\t\t\t\tvar y = -dy + cy * this.chunkSize - nudgeY;\n\t\t\t\tig.system.context.drawImage( chunk, x, y);\n\t\t\t\tig.Image.drawCount++;\n\t\t\t\t\n\t\t\t\tif( this.debugChunks ) {\n\t\t\t\t\tig.system.context.strokeStyle = '#f0f';\n\t\t\t\t\tig.system.context.strokeRect( x, y, this.chunkSize, this.chunkSize );\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// If we repeat in X and this chunk's width wasn't the full chunk size\n\t\t\t\t// and the screen is not already filled, we need to draw anohter chunk\n\t\t\t\t// AND nudge it to be flush with the last chunk\n\t\t\t\tif( this.repeat && chunk.width < this.chunkSize && x + chunk.width < ig.system.realWidth ) {\n\t\t\t\t\tnudgeX += this.chunkSize - chunk.width;\n\t\t\t\t\tmaxChunkX++;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// Same as above, but for Y\n\t\t\tif( this.repeat && chunk.height < this.chunkSize && y + chunk.height < ig.system.realHeight\t) {\n\t\t\t\tnudgeY += this.chunkSize - chunk.height;\n\t\t\t\tmaxChunkY++;\n\t\t\t}\n\t\t}\n\t},\n\t\n\t\n\tdrawTiled: function() {\t\n\t\tvar tile = 0,\n\t\t\tanim = null,\n\t\t\ttileOffsetX = (this.scroll.x / this.tilesize).toInt(),\n\t\t\ttileOffsetY = (this.scroll.y / this.tilesize).toInt(),\n\t\t\tpxOffsetX = this.scroll.x % this.tilesize,\n\t\t\tpxOffsetY = this.scroll.y % this.tilesize,\n\t\t\tpxMinX = -pxOffsetX - this.tilesize,\n\t\t\tpxMinY = -pxOffsetY - this.tilesize,\n\t\t\tpxMaxX = ig.system.width + this.tilesize - pxOffsetX,\n\t\t\tpxMaxY = ig.system.height + this.tilesize - pxOffsetY;\n\t\t\t\n\t\t\n\t\t// FIXME: could be sped up for non-repeated maps: restrict the for loops\n\t\t// to the map size instead of to the screen size and skip the 'repeat'\n\t\t// checks inside the loop.\n\t\t\n\t\tfor( var mapY = -1, pxY = pxMinY; pxY < pxMaxY; mapY++, pxY += this.tilesize) {\n\t\t\tvar tileY = mapY + tileOffsetY;\n\t\t\t\t\n\t\t\t// Repeat Y?\n\t\t\tif( tileY >= this.height || tileY < 0 ) {\n\t\t\t\tif( !this.repeat ) { continue; }\n\t\t\t\ttileY = (tileY%this.height + this.height) % this.height;\n\t\t\t}\n\t\t\t\n\t\t\tfor( var mapX = -1, pxX = pxMinX; pxX < pxMaxX; mapX++, pxX += this.tilesize ) {\n\t\t\t\tvar tileX = mapX + tileOffsetX;\n\t\t\t\t\n\t\t\t\t// Repeat X?\n\t\t\t\tif( tileX >= this.width || tileX < 0 ) {\n\t\t\t\t\tif( !this.repeat ) { continue; }\n\t\t\t\t\ttileX = (tileX%this.width + this.width) % this.width;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Draw!\n\t\t\t\tif( (tile = this.data[tileY][tileX]) ) {\n\t\t\t\t\tif( (anim = this.anims[tile-1]) ) { \n\t\t\t\t\t\tanim.draw( pxX, pxY );\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis.tiles.drawTile( pxX, pxY, tile-1, this.tilesize );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} // end for x\n\t\t} // end for y\n\t}\n});\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./lib/impact/background-map.js\n **/","ig.module(\n\t'impact.collision-map'\n)\n.requires(\n\t'impact.map'\n)\n.defines(function(){ \"use strict\";\n\nig.CollisionMap = ig.Map.extend({\n\t\n\tlastSlope: 1,\n\ttiledef: null,\n\t\n\tinit: function( tilesize, data, tiledef ) {\n\t\tthis.parent( tilesize, data );\n\t\tthis.tiledef = tiledef || ig.CollisionMap.defaultTileDef;\n\t\t\n\t\tfor( var t in this.tiledef ) {\n\t\t\tif( t|0 > this.lastSlope ) {\n\t\t\t\tthis.lastSlope = t|0;\n\t\t\t}\n\t\t}\n\t},\n\t\n\t\n\ttrace: function( x, y, vx, vy, objectWidth, objectHeight ) {\n\t\t// Set up the trace-result\n\t\tvar res = {\n\t\t\tcollision: {x: false, y: false, slope: false},\n\t\t\tpos: {x: x, y: y},\n\t\t\ttile: {x: 0, y: 0}\n\t\t};\n\t\t\n\t\t// Break the trace down into smaller steps if necessary\n\t\tvar steps = Math.ceil(Math.max(Math.abs(vx), Math.abs(vy)) / this.tilesize);\n\t\tif( steps > 1 ) {\n\t\t\tvar sx = vx / steps;\n\t\t\tvar sy = vy / steps;\n\t\t\t\n\t\t\tfor( var i = 0; i < steps && (sx || sy); i++ ) {\n\t\t\t\tthis._traceStep( res, x, y, sx, sy, objectWidth, objectHeight, vx, vy, i );\n\t\t\t\t\n\t\t\t\tx = res.pos.x;\n\t\t\t\ty = res.pos.y;\n\t\t\t\tif( res.collision.x ) {\tsx = 0; vx = 0; }\n\t\t\t\tif( res.collision.y ) {\tsy = 0;\tvy = 0; }\n\t\t\t\tif( res.collision.slope ) { break; }\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Just one step\n\t\telse {\n\t\t\tthis._traceStep( res, x, y, vx, vy, objectWidth, objectHeight, vx, vy, 0 );\n\t\t}\n\t\t\n\t\treturn res;\n\t},\n\t\n\t\n\t_traceStep: function( res, x, y, vx, vy, width, height, rvx, rvy, step ) {\n\t\t\n\t\tres.pos.x += vx;\n\t\tres.pos.y += vy;\n\t\t\n\t\tvar t = 0;\n\t\t\n\t\t// Horizontal collision (walls)\n\t\tif( vx ) {\n\t\t\tvar pxOffsetX = (vx > 0 ? width : 0);\n\t\t\tvar tileOffsetX = (vx < 0 ? this.tilesize : 0);\n\t\t\t\n\t\t\tvar firstTileY = Math.max( Math.floor(y / this.tilesize), 0 );\n\t\t\tvar lastTileY = Math.min( Math.ceil((y + height) / this.tilesize), this.height );\n\t\t\tvar tileX = Math.floor( (res.pos.x + pxOffsetX) / this.tilesize );\n\t\t\t\n\t\t\t// We need to test the new tile position as well as the current one, as we\n\t\t\t// could still collide with the current tile if it's a line def.\n\t\t\t// We can skip this test if this is not the first step or the new tile position\n\t\t\t// is the same as the current one.\n\t\t\tvar prevTileX = Math.floor( (x + pxOffsetX) / this.tilesize );\n\t\t\tif( step > 0 || tileX == prevTileX || prevTileX < 0 || prevTileX >= this.width ) {\n\t\t\t\tprevTileX = -1;\n\t\t\t}\n\t\t\t\n\t\t\t// Still inside this collision map?\n\t\t\tif(\ttileX >= 0 && tileX < this.width ) {\n\t\t\t\tfor( var tileY = firstTileY; tileY < lastTileY; tileY++ ) {\n\t\t\t\t\tif( prevTileX != -1 ) {\n\t\t\t\t\t\tt = this.data[tileY][prevTileX];\n\t\t\t\t\t\tif(\t\n\t\t\t\t\t\t\tt > 1 && t <= this.lastSlope && \n\t\t\t\t\t\t\tthis._checkTileDef(res, t, x, y, rvx, rvy, width, height, prevTileX, tileY) \n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tt = this.data[tileY][tileX];\n\t\t\t\t\tif(\n\t\t\t\t\t\tt == 1 || t > this.lastSlope || // fully solid tile?\n\t\t\t\t\t\t(t > 1 && this._checkTileDef(res, t, x, y, rvx, rvy, width, height, tileX, tileY)) // slope?\n\t\t\t\t\t) {\n\t\t\t\t\t\tif( t > 1 && t <= this.lastSlope && res.collision.slope ) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// full tile collision!\n\t\t\t\t\t\tres.collision.x = true;\n\t\t\t\t\t\tres.tile.x = t;\n\t\t\t\t\t\tx = res.pos.x = tileX * this.tilesize - pxOffsetX + tileOffsetX;\n\t\t\t\t\t\trvx = 0;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Vertical collision (floor, ceiling)\n\t\tif( vy ) {\n\t\t\tvar pxOffsetY = (vy > 0 ? height : 0);\n\t\t\tvar tileOffsetY = (vy < 0 ? this.tilesize : 0);\n\t\t\t\n\t\t\tvar firstTileX = Math.max( Math.floor(res.pos.x / this.tilesize), 0 );\n\t\t\tvar lastTileX = Math.min( Math.ceil((res.pos.x + width) / this.tilesize), this.width );\n\t\t\tvar tileY = Math.floor( (res.pos.y + pxOffsetY) / this.tilesize );\n\t\t\t\n\t\t\tvar prevTileY = Math.floor( (y + pxOffsetY) / this.tilesize );\n\t\t\tif( step > 0 || tileY == prevTileY || prevTileY < 0 || prevTileY >= this.height ) {\n\t\t\t\tprevTileY = -1;\n\t\t\t}\n\t\t\t\n\t\t\t// Still inside this collision map?\n\t\t\tif( tileY >= 0 && tileY < this.height ) {\n\t\t\t\tfor( var tileX = firstTileX; tileX < lastTileX; tileX++ ) {\n\t\t\t\t\tif( prevTileY != -1 ) {\n\t\t\t\t\t\tt = this.data[prevTileY][tileX];\n\t\t\t\t\t\tif( \n\t\t\t\t\t\t\tt > 1 && t <= this.lastSlope &&\n\t\t\t\t\t\t\tthis._checkTileDef(res, t, x, y, rvx, rvy, width, height, tileX, prevTileY) ) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tt = this.data[tileY][tileX];\n\t\t\t\t\tif(\n\t\t\t\t\t\tt == 1 || t > this.lastSlope || // fully solid tile?\n\t\t\t\t\t\t(t > 1 && this._checkTileDef(res, t, x, y, rvx, rvy, width, height, tileX, tileY)) // slope?\n\t\t\t\t\t) {\n\t\t\t\t\t\tif( t > 1 && t <= this.lastSlope && res.collision.slope ) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// full tile collision!\n\t\t\t\t\t\tres.collision.y = true;\n\t\t\t\t\t\tres.tile.y = t;\n\t\t\t\t\t\tres.pos.y = tileY * this.tilesize - pxOffsetY + tileOffsetY;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t// res is changed in place, nothing to return\n\t},\n\t\n\t\n\t_checkTileDef: function( res, t, x, y, vx, vy, width, height, tileX, tileY ) {\n\t\tvar def = this.tiledef[t];\n\t\tif( !def ) { return false; }\n\t\t\n\t\tvar lx = (tileX + def[0]) * this.tilesize,\n\t\t\tly = (tileY + def[1]) * this.tilesize,\n\t\t\tlvx = (def[2] - def[0]) * this.tilesize,\n\t\t\tlvy = (def[3] - def[1]) * this.tilesize,\n\t\t\tsolid = def[4];\n\t\t\n\t\t// Find the box corner to test, relative to the line\n\t\tvar tx = x + vx + (lvy < 0 ? width : 0) - lx,\n\t\t\tty = y + vy + (lvx > 0 ? height : 0) - ly;\n\t\t\n\t\t// Is the box corner behind the line?\n\t\tif( lvx * ty - lvy * tx > 0 ) {\n\t\t\t\n\t\t\t// Lines are only solid from one side - find the dot product of\n\t\t\t// line normal and movement vector and dismiss if wrong side\n\t\t\tif( vx * -lvy + vy * lvx < 0 ) {\n\t\t\t\treturn solid;\n\t\t\t}\n\t\t\t\n\t\t\t// Find the line normal\n\t\t\tvar length = Math.sqrt(lvx * lvx + lvy * lvy);\n\t\t\tvar nx = lvy/length,\n\t\t\t\tny = -lvx/length;\n\t\t\t\n\t\t\t// Project out of the line\n\t\t\tvar proj = tx * nx + ty * ny;\n\t\t\tvar px = nx * proj,\n\t\t\t\tpy = ny * proj;\n\t\t\t\n\t\t\t// If we project further out than we moved in, then this is a full\n\t\t\t// tile collision for solid tiles.\n\t\t\t// For non-solid tiles, make sure we were in front of the line. \n\t\t\tif( px*px+py*py >= vx*vx+vy*vy ) {\n\t\t\t\treturn solid || (lvx * (ty-vy) - lvy * (tx-vx) < 0.5);\n\t\t\t}\n\t\t\t\n\t\t\tres.pos.x = x + vx - px;\n\t\t\tres.pos.y = y + vy - py;\n\t\t\tres.collision.slope = {x: lvx, y: lvy, nx: nx, ny: ny};\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n});\n\n\n// Default Slope Tile definition. Each tile is defined by an array of 5 vars:\n// - 4 for the line in tile coordinates (0 -- 1)\n// - 1 specifing whether the tile is 'filled' behind the line or not\n// [ x1, y1, x2, y2, solid ]\n\n// Defining 'half', 'one third' and 'two thirds' as vars  makes it a bit\n// easier to read... I hope.\nvar H = 1/2,\n\tN = 1/3,\n\tM = 2/3,\n\tSOLID = true,\n\tNON_SOLID = false;\n\t\nig.CollisionMap.defaultTileDef = {\t\n\t/* 15 NE */\t 5: [0,1, 1,M, SOLID],  6: [0,M, 1,N, SOLID],  7: [0,N, 1,0, SOLID],\n\t/* 22 NE */\t 3: [0,1, 1,H, SOLID],  4: [0,H, 1,0, SOLID],\n\t/* 45 NE */  2: [0,1, 1,0, SOLID],\n\t/* 67 NE */ 10: [H,1, 1,0, SOLID], 21: [0,1, H,0, SOLID],\n\t/* 75 NE */ 32: [M,1, 1,0, SOLID], 43: [N,1, M,0, SOLID], 54: [0,1, N,0, SOLID],\n\t\n\t/* 15 SE */\t27: [0,0, 1,N, SOLID], 28: [0,N, 1,M, SOLID], 29: [0,M, 1,1, SOLID],\n\t/* 22 SE */\t25: [0,0, 1,H, SOLID], 26: [0,H, 1,1, SOLID],\n\t/* 45 SE */\t24: [0,0, 1,1, SOLID],\n\t/* 67 SE */\t11: [0,0, H,1, SOLID], 22: [H,0, 1,1, SOLID],\n\t/* 75 SE */\t33: [0,0, N,1, SOLID], 44: [N,0, M,1, SOLID], 55: [M,0, 1,1, SOLID],\n\t\n\t/* 15 NW */\t16: [1,N, 0,0, SOLID], 17: [1,M, 0,N, SOLID], 18: [1,1, 0,M, SOLID],\n\t/* 22 NW */\t14: [1,H, 0,0, SOLID], 15: [1,1, 0,H, SOLID],\n\t/* 45 NW */\t13: [1,1, 0,0, SOLID],\n\t/* 67 NW */\t 8: [H,1, 0,0, SOLID], 19: [1,1, H,0, SOLID],\n\t/* 75 NW */\t30: [N,1, 0,0, SOLID], 41: [M,1, N,0, SOLID], 52: [1,1, M,0, SOLID],\n\t\n\t/* 15 SW */ 38: [1,M, 0,1, SOLID], 39: [1,N, 0,M, SOLID], 40: [1,0, 0,N, SOLID],\n\t/* 22 SW */ 36: [1,H, 0,1, SOLID], 37: [1,0, 0,H, SOLID],\n\t/* 45 SW */ 35: [1,0, 0,1, SOLID],\n\t/* 67 SW */  9: [1,0, H,1, SOLID], 20: [H,0, 0,1, SOLID],\n\t/* 75 SW */ 31: [1,0, M,1, SOLID], 42: [M,0, N,1, SOLID], 53: [N,0, 0,1, SOLID],\n\t\n\t/* Go N  */ 12: [0,0, 1,0, NON_SOLID],\n\t/* Go S  */ 23: [1,1, 0,1, NON_SOLID],\n\t/* Go E  */ 34: [1,0, 1,1, NON_SOLID],\n\t/* Go W  */ 45: [0,1, 0,0, NON_SOLID]\n\t\n\t// Now that was fun!\n};\n\n\n// Static Dummy CollisionMap; never collides\nig.CollisionMap.staticNoCollision = { trace: function( x, y, vx, vy ) {\n\treturn {\n\t\tcollision: {x: false, y: false, slope: false},\n\t\tpos: {x: x+vx, y: y+vy},\n\t\ttile: {x: 0, y: 0}\n\t};\n}};\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./lib/impact/collision-map.js\n **/","ig.module(\r\n\t'impact.debug.debug'\r\n)\r\n.requires(\t\r\n\t'impact.debug.entities-panel',\r\n\t'impact.debug.maps-panel',\r\n\t'impact.debug.graph-panel'\r\n)\r\n.defines(function(){ \"use strict\";\r\n\t\r\n/* Empty module to require all debug panels */\r\n\r\n});\n\n\n/** WEBPACK FOOTER **\n ** ./lib/impact/debug/debug.js\n **/","ig.module(\r\n\t'impact.debug.entities-panel'\r\n)\r\n.requires(\r\n\t'impact.debug.menu',\r\n\t'impact.entity'\r\n)\r\n.defines(function(){ \"use strict\";\r\n\r\n\r\nig.Entity.inject({\r\n\tcolors: {\r\n\t\tnames: '#fff',\r\n\t\tvelocities: '#0f0',\r\n\t\tboxes: '#f00'\r\n\t},\r\n\t\r\n\tdraw: function() {\r\n\t\tthis.parent();\t\t\r\n\t\t\r\n\t\t// Collision Boxes\r\n\t\tif( ig.Entity._debugShowBoxes ) {\r\n\t\t\tig.system.context.strokeStyle = this.colors.boxes;\r\n\t\t\tig.system.context.lineWidth = 1.0;\r\n\t\t\tig.system.context.strokeRect(\t\r\n\t\t\t\tig.system.getDrawPos(this.pos.x.round() - ig.game.screen.x) - 0.5,\r\n\t\t\t\tig.system.getDrawPos(this.pos.y.round() - ig.game.screen.y) - 0.5,\r\n\t\t\t\tthis.size.x * ig.system.scale,\r\n\t\t\t\tthis.size.y * ig.system.scale\r\n\t\t\t);\r\n\t\t}\r\n\t\t\r\n\t\t// Velocities\r\n\t\tif( ig.Entity._debugShowVelocities ) {\r\n\t\t\tvar x = this.pos.x + this.size.x/2;\r\n\t\t\tvar y = this.pos.y + this.size.y/2;\r\n\t\t\t\r\n\t\t\tthis._debugDrawLine( this.colors.velocities, x, y, x + this.vel.x, y + this.vel.y );\r\n\t\t}\r\n\t\t\r\n\t\t// Names & Targets\r\n\t\tif( ig.Entity._debugShowNames ) {\r\n\t\t\tif( this.name ) {\r\n\t\t\t\tig.system.context.fillStyle = this.colors.names;\r\n\t\t\t\tig.system.context.fillText(\r\n\t\t\t\t\tthis.name,\r\n\t\t\t\t\tig.system.getDrawPos(this.pos.x - ig.game.screen.x), \r\n\t\t\t\t\tig.system.getDrawPos(this.pos.y - ig.game.screen.y)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif( typeof(this.target) == 'object' ) {\r\n\t\t\t\tfor( var t in this.target ) {\r\n\t\t\t\t\tvar ent = ig.game.getEntityByName( this.target[t] );\r\n\t\t\t\t\tif( ent ) {\r\n\t\t\t\t\t\tthis._debugDrawLine( this.colors.names,\r\n\t\t\t\t\t\t\tthis.pos.x + this.size.x/2, this.pos.y + this.size.y/2,\r\n\t\t\t\t\t\t\tent.pos.x + ent.size.x/2, ent.pos.y + ent.size.y/2\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\t\r\n\t_debugDrawLine: function( color, sx, sy, dx, dy ) {\r\n\t\tig.system.context.strokeStyle = color;\r\n\t\tig.system.context.lineWidth = 1.0;\r\n\r\n\t\tig.system.context.beginPath();\r\n\t\tig.system.context.moveTo( \r\n\t\t\tig.system.getDrawPos(sx - ig.game.screen.x),\r\n\t\t\tig.system.getDrawPos(sy - ig.game.screen.y)\r\n\t\t);\r\n\t\tig.system.context.lineTo( \r\n\t\t\tig.system.getDrawPos(dx - ig.game.screen.x),\r\n\t\t\tig.system.getDrawPos(dy - ig.game.screen.y)\r\n\t\t);\r\n\t\tig.system.context.stroke();\r\n\t\tig.system.context.closePath();\r\n\t}\r\n});\r\n\r\n\r\nig.Entity._debugEnableChecks = true;\r\nig.Entity._debugShowBoxes = false;\r\nig.Entity._debugShowVelocities = false;\r\nig.Entity._debugShowNames = false;\r\n\r\nig.Entity.oldCheckPair = ig.Entity.checkPair;\r\nig.Entity.checkPair = function( a, b ) {\r\n\tif( !ig.Entity._debugEnableChecks ) {\r\n\t\treturn;\r\n\t}\r\n\tig.Entity.oldCheckPair( a, b );\r\n};\r\n\r\n\r\nig.debug.addPanel({\r\n\ttype: ig.DebugPanel,\r\n\tname: 'entities',\r\n\tlabel: 'Entities',\r\n\toptions: [\r\n\t\t{\r\n\t\t\tname: 'Checks & Collisions',\r\n\t\t\tobject: ig.Entity,\r\n\t\t\tproperty: '_debugEnableChecks'\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'Show Collision Boxes',\r\n\t\t\tobject: ig.Entity,\r\n\t\t\tproperty: '_debugShowBoxes'\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'Show Velocities',\r\n\t\t\tobject: ig.Entity,\r\n\t\t\tproperty: '_debugShowVelocities'\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'Show Names & Targets',\r\n\t\t\tobject: ig.Entity,\r\n\t\t\tproperty: '_debugShowNames'\r\n\t\t}\r\n\t]\r\n});\r\n\r\n\r\n});\n\n\n/** WEBPACK FOOTER **\n ** ./lib/impact/debug/entities-panel.js\n **/","ig.module(\r\n\t'impact.debug.graph-panel'\r\n)\r\n.requires(\r\n\t'impact.debug.menu',\r\n\t'impact.system',\r\n\t'impact.game',\r\n\t'impact.image'\r\n)\r\n.defines(function(){ \"use strict\";\r\n\r\n\r\nig.Game.inject({\t\r\n\tdraw: function() {\r\n\t\tig.graph.beginClock('draw');\r\n\t\tthis.parent();\r\n\t\tig.graph.endClock('draw');\r\n\t},\r\n\t\r\n\t\r\n\tupdate: function() {\r\n\t\tig.graph.beginClock('update');\r\n\t\tthis.parent();\r\n\t\tig.graph.endClock('update');\r\n\t},\r\n\t\r\n\t\r\n\tcheckEntities: function() {\r\n\t\tig.graph.beginClock('checks');\r\n\t\tthis.parent();\r\n\t\tig.graph.endClock('checks');\r\n\t}\r\n});\r\n\r\n\r\n\r\nig.DebugGraphPanel = ig.DebugPanel.extend({\r\n\tclocks: {},\r\n\tmarks: [],\r\n\ttextY: 0,\r\n\theight: 128,\r\n\tms: 64,\r\n\ttimeBeforeRun: 0,\r\n\t\r\n\t\r\n\tinit: function( name, label ) {\r\n\t\tthis.parent( name, label );\r\n\t\t\r\n\t\tthis.mark16ms = (this.height - (this.height/this.ms) * 16).round();\r\n\t\tthis.mark33ms = (this.height - (this.height/this.ms) * 33).round();\r\n\t\tthis.msHeight = this.height/this.ms;\r\n\t\t\r\n\t\tthis.graph = ig.$new('canvas');\r\n\t\tthis.graph.width = window.innerWidth;\r\n\t\tthis.graph.height = this.height;\r\n\t\tthis.container.appendChild( this.graph );\r\n\t\tthis.ctx = this.graph.getContext('2d');\r\n\t\t\r\n\t\tthis.ctx.fillStyle = '#444';\r\n\t\tthis.ctx.fillRect( 0, this.mark16ms, this.graph.width, 1 );\r\n\t\tthis.ctx.fillRect( 0, this.mark33ms, this.graph.width, 1 );\r\n\t\t\r\n\t\tthis.addGraphMark( '16ms', this.mark16ms );\r\n\t\tthis.addGraphMark( '33ms', this.mark33ms );\r\n\t\t\r\n\t\tthis.addClock( 'draw', 'Draw', '#13baff' );\r\n\t\tthis.addClock( 'update', 'Entity Update', '#bb0fff' );\r\n\t\tthis.addClock( 'checks', 'Entity Checks & Collisions', '#a2e908' );\r\n\t\tthis.addClock( 'lag', 'System Lag', '#f26900' );\r\n\t\t\r\n\t\tig.mark = this.mark.bind(this);\r\n\t\tig.graph = this;\r\n\t},\r\n\t\r\n\t\r\n\taddGraphMark: function( name, height ) {\r\n\t\tvar span = ig.$new('span');\r\n\t\tspan.className = 'ig_debug_graph_mark';\r\n\t\tspan.textContent = name;\r\n\t\tspan.style.top = height.round() + 'px';\r\n\t\tthis.container.appendChild( span );\r\n\t},\r\n\t\r\n\t\r\n\taddClock: function( name, description, color ) {\t\t\r\n\t\tvar mark = ig.$new('span');\r\n\t\tmark.className = 'ig_debug_legend_color';\r\n\t\tmark.style.backgroundColor = color;\r\n\t\t\r\n\t\tvar number = ig.$new('span');\r\n\t\tnumber.className = 'ig_debug_legend_number';\r\n\t\tnumber.appendChild( document.createTextNode('0') );\r\n\t\t\r\n\t\tvar legend = ig.$new('span');\r\n\t\tlegend.className = 'ig_debug_legend';\r\n\t\tlegend.appendChild( mark );\r\n\t\tlegend.appendChild( document.createTextNode(description +' (') );\r\n\t\tlegend.appendChild( number );\r\n\t\tlegend.appendChild( document.createTextNode('ms)') );\r\n\t\t\r\n\t\tthis.container.appendChild( legend );\r\n\t\t\r\n\t\tthis.clocks[name] = {\r\n\t\t\tdescription: description,\r\n\t\t\tcolor: color,\r\n\t\t\tcurrent: 0,\r\n\t\t\tstart: Date.now(),\r\n\t\t\tavg: 0,\r\n\t\t\thtml: number\r\n\t\t};\r\n\t},\r\n\t\r\n\t\r\n\tbeginClock: function( name, offset ) {\r\n\t\tthis.clocks[name].start = Date.now() + (offset || 0);\r\n\t},\r\n\t\r\n\t\r\n\tendClock: function( name ) {\r\n\t\tvar c = this.clocks[name];\r\n\t\tc.current = Math.round(Date.now() - c.start);\r\n\t\tc.avg = c.avg * 0.8 + c.current * 0.2;\r\n\t},\r\n\t\r\n\t\r\n\tmark: function( msg, color ) {\r\n\t\tif( this.active ) {\r\n\t\t\tthis.marks.push( {msg:msg, color:(color||'#fff')} );\r\n\t\t}\r\n\t},\r\n\t\r\n\t\r\n\tbeforeRun: function() {\r\n\t\tthis.endClock('lag');\r\n\t\tthis.timeBeforeRun = Date.now();\r\n\t},\r\n\t\r\n\t\r\n\tafterRun: function() {\r\n\t\tvar frameTime = Date.now() - this.timeBeforeRun;\r\n\t\tvar nextFrameDue = (1000/ig.system.fps) - frameTime;\r\n\t\tthis.beginClock('lag', Math.max(nextFrameDue, 0));\r\n\t\t\r\n\t\t\r\n\t\tvar x = this.graph.width-1;\r\n\t\tvar y = this.height;\r\n\t\t\r\n\t\tthis.ctx.drawImage( this.graph, -1, 0 );\r\n\t\t\r\n\t\tthis.ctx.fillStyle = '#000';\r\n\t\tthis.ctx.fillRect( x, 0, 1, this.height );\r\n\t\t\r\n\t\tthis.ctx.fillStyle = '#444';\r\n\t\tthis.ctx.fillRect( x, this.mark16ms, 1, 1 );\r\n\t\t\r\n\t\tthis.ctx.fillStyle = '#444';\r\n\t\tthis.ctx.fillRect( x, this.mark33ms, 1, 1 );\r\n\t\t\r\n\t\tfor( var ci in this.clocks ) {\r\n\t\t\tvar c = this.clocks[ci];\r\n\t\t\tc.html.textContent = c.avg.toFixed(2);\r\n\t\t\t\r\n\t\t\tif( c.color && c.current > 0 ) {\r\n\t\t\t\tthis.ctx.fillStyle = c.color;\r\n\t\t\t\tvar h = c.current * this.msHeight;\r\n\t\t\t\ty -= h;\r\n\t\t\t\tthis.ctx.fillRect(\tx, y, 1, h );\r\n\t\t\t\tc.current = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.ctx.textAlign = 'right';\r\n\t\tthis.ctx.textBaseline = 'top';\r\n\t\tthis.ctx.globalAlpha = 0.5;\r\n\t\t\r\n\t\tfor( var i = 0; i < this.marks.length; i++ ) {\r\n\t\t\tvar m = this.marks[i];\r\n\t\t\tthis.ctx.fillStyle = m.color;\r\n\t\t\tthis.ctx.fillRect(\tx, 0, 1, this.height );\r\n\t\t\tif( m.msg ) {\r\n\t\t\t\tthis.ctx.fillText( m.msg, x-1, this.textY );\r\n\t\t\t\tthis.textY = (this.textY+8)%32;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.ctx.globalAlpha = 1;\r\n\t\tthis.marks = [];\r\n\t}\r\n});\r\n\r\n\r\nig.debug.addPanel({\r\n\ttype: ig.DebugGraphPanel,\r\n\tname: 'graph',\r\n\tlabel: 'Performance'\r\n});\r\n\r\n\r\n});\n\n\n/** WEBPACK FOOTER **\n ** ./lib/impact/debug/graph-panel.js\n **/","ig.module(\r\n\t'impact.debug.maps-panel'\r\n)\r\n.requires(\r\n\t'impact.debug.menu',\r\n\t'impact.game',\r\n\t'impact.background-map'\r\n)\r\n.defines(function(){ \"use strict\";\r\n\r\n\r\nig.Game.inject({\r\n\tloadLevel: function( data ) {\r\n\t\tthis.parent(data);\r\n\t\tig.debug.panels.maps.load(this);\r\n\t}\r\n});\r\n\r\n\t\r\nig.DebugMapsPanel = ig.DebugPanel.extend({\r\n\tmaps: [],\r\n\tmapScreens: [],\r\n\t\r\n\t\r\n\tinit: function( name, label ) {\r\n\t\tthis.parent( name, label );\r\n\t\tthis.load();\r\n\t},\r\n\t\r\n\t\r\n\tload: function( game ) {\r\n\t\tthis.options = [];\r\n\t\tthis.panels = [];\r\n\t\t\r\n\t\tif( !game || !game.backgroundMaps.length ) {\r\n\t\t\tthis.container.innerHTML = '<em>No Maps Loaded</em>';\r\n\t\t\treturn;\t\r\n\t\t}\r\n\t\t\r\n\t\tthis.maps = game.backgroundMaps;\r\n\t\tthis.mapScreens = [];\r\n\t\tthis.container.innerHTML = '';\r\n\t\t\r\n\t\tfor( var m = 0; m < this.maps.length; m++ ) {\r\n\t\t\tvar map = this.maps[m];\r\n\t\t\t\r\n\t\t\tvar subPanel = new ig.DebugPanel( m, 'Layer '+m );\r\n\t\t\t\r\n\t\t\tvar head = new ig.$new('strong');\r\n\t\t\thead.textContent = m +': ' + map.tiles.path;\r\n\t\t\tsubPanel.container.appendChild( head );\r\n\t\t\t\r\n\t\t\tsubPanel.addOption( new ig.DebugOption('Enabled', map, 'enabled') );\r\n\t\t\tsubPanel.addOption( new ig.DebugOption('Pre Rendered', map, 'preRender') );\r\n\t\t\tsubPanel.addOption( new ig.DebugOption('Show Chunks', map, 'debugChunks') );\r\n\t\t\t\r\n\t\t\tthis.generateMiniMap( subPanel, map, m );\r\n\t\t\tthis.addPanel( subPanel );\r\n\t\t}\r\n\t},\r\n\t\r\n\t\r\n\tgenerateMiniMap: function( panel, map, id ) {\r\n\t\tvar s = ig.system.scale; // we'll need this a lot\r\n\t\t\r\n\t\t// resize the tileset, so that one tile is 's' pixels wide and high\r\n\t\tvar ts = ig.$new('canvas');\r\n\t\tvar tsctx = ts.getContext('2d');\r\n\t\t\r\n\t\tvar w = map.tiles.width * s;\r\n\t\tvar h = map.tiles.height * s;\r\n\t\tvar ws = w / map.tilesize;\r\n\t\tvar hs = h / map.tilesize;\r\n\t\tts.width = ws;\r\n\t\tts.height = hs;\r\n\t\ttsctx.drawImage( map.tiles.data, 0, 0, w, h, 0, 0, ws, hs );\r\n\t\t\r\n\t\t// create the minimap canvas\r\n\t\tvar mapCanvas = ig.$new('canvas');\r\n\t\tmapCanvas.width = map.width * s;\r\n\t\tmapCanvas.height = map.height * s;\r\n\t\tvar ctx = mapCanvas.getContext('2d');\r\n\t\t\r\n\t\tif( ig.game.clearColor ) {\r\n\t\t\tctx.fillStyle = ig.game.clearColor; \r\n\t\t\tctx.fillRect(0, 0, w, h);\r\n\t\t}\r\n\t\t\r\n\t\t// draw the map\r\n\t\tvar tile = 0;\r\n\t\tfor( var x = 0; x < map.width; x++ ) {\r\n\t\t\tfor( var y = 0; y < map.height; y++ ) {\r\n\t\t\t\tif( (tile = map.data[y][x]) ) {\r\n\t\t\t\t\tctx.drawImage(\r\n\t\t\t\t\t\tts, \r\n\t\t\t\t\t\tMath.floor(((tile-1) * s) % ws),\r\n\t\t\t\t\t\tMath.floor((tile-1) * s / ws) * s,\r\n\t\t\t\t\t\ts, s,\r\n\t\t\t\t\t\tx * s, y * s,\r\n\t\t\t\t\t\ts, s\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tvar mapContainer = ig.$new('div');\r\n\t\tmapContainer.className = 'ig_debug_map_container';\r\n\t\tmapContainer.style.width = map.width * s + 'px';\r\n\t\tmapContainer.style.height = map.height * s + 'px';\r\n\t\t\r\n\t\tvar mapScreen = ig.$new('div');\r\n\t\tmapScreen.className = 'ig_debug_map_screen';\r\n\t\tmapScreen.style.width = ((ig.system.width / map.tilesize) * s - 2) + 'px';\r\n\t\tmapScreen.style.height = ((ig.system.height / map.tilesize) * s - 2) + 'px';\r\n\t\tthis.mapScreens[id] = mapScreen;\r\n\t\t\r\n\t\tmapContainer.appendChild( mapCanvas );\r\n\t\tmapContainer.appendChild( mapScreen );\r\n\t\tpanel.container.appendChild( mapContainer );\r\n\t},\r\n\t\r\n\t\r\n\tafterRun: function() {\r\n\t\t// Update the screen position DIV for each mini-map\r\n\t\tvar s = ig.system.scale;\r\n\t\tfor( var m = 0; m < this.maps.length; m++ ) {\r\n\t\t\tvar map = this.maps[m];\r\n\t\t\tvar screen = this.mapScreens[m];\r\n\t\t\t\r\n\t\t\tif( !map || !screen ) { // Quick sanity check\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar x = map.scroll.x / map.tilesize;\r\n\t\t\tvar y = map.scroll.y / map.tilesize;\r\n\t\t\t\r\n\t\t\tif( map.repeat ) {\r\n\t\t\t\tx %= map.width;\r\n\t\t\t\ty %= map.height;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tscreen.style.left = (x * s) + 'px';\r\n\t\t\tscreen.style.top = (y * s) + 'px';\r\n\t\t}\r\n\t}\r\n});\r\n\r\n\r\nig.debug.addPanel({\r\n\ttype: ig.DebugMapsPanel,\r\n\tname: 'maps',\r\n\tlabel: 'Background Maps'\r\n});\r\n\r\n\r\n});\n\n\n/** WEBPACK FOOTER **\n ** ./lib/impact/debug/maps-panel.js\n **/","ig.module(\r\n\t'impact.debug.menu'\r\n)\r\n.requires(\r\n\t'dom.ready',\r\n\t'impact.system'\r\n)\r\n.defines(function(){ \"use strict\";\r\n\r\n\r\nig.System.inject({\t\r\n\trun: function() {\r\n\t\tig.debug.beforeRun();\r\n\t\tthis.parent();\r\n\t\tig.debug.afterRun();\r\n\t},\r\n\t\r\n\tsetGameNow: function( gameClass ) {\r\n\t\tthis.parent( gameClass );\r\n\t\tig.debug.ready();\r\n\t}\r\n});\r\n\r\n\r\nig.Debug = ig.Class.extend({\r\n\toptions: {},\r\n\tpanels: {},\r\n\tnumbers:{},\r\n\tcontainer: null,\r\n\tpanelMenu: null,\r\n\tactivePanel: null,\r\n\t\r\n\tdebugTime: 0,\r\n\tdebugTickAvg: 0.016,\r\n\tdebugRealTime: Date.now(),\r\n\t\r\n\tinit: function() {\r\n\t\t// Inject the Stylesheet\r\n\t\tvar style = ig.$new('link');\r\n\t\tstyle.rel = 'stylesheet';\r\n\t\tstyle.type = 'text/css';\r\n\t\tstyle.href = ig.prefix + 'lib/impact/debug/debug.css';\r\n\t\tig.$('body')[0].appendChild( style );\r\n\r\n\t\t// Create the Debug Container\r\n\t\tthis.container = ig.$new('div');\r\n\t\tthis.container.className ='ig_debug';\r\n\t\tig.$('body')[0].appendChild( this.container );\r\n\t\t\r\n\t\t// Create and add the Menu Container\r\n\t\tthis.panelMenu = ig.$new('div');\r\n\t\tthis.panelMenu.innerHTML = '<div class=\"ig_debug_head\">Impact.Debug:</div>';\r\n\t\tthis.panelMenu.className ='ig_debug_panel_menu';\r\n\t\t\r\n\t\tthis.container.appendChild( this.panelMenu );\r\n\t\t\r\n\t\t// Create and add the Stats Container\r\n\t\tthis.numberContainer = ig.$new('div');\r\n\t\tthis.numberContainer.className ='ig_debug_stats';\r\n\t\tthis.panelMenu.appendChild( this.numberContainer );\r\n\t\t\r\n\t\t// Set ig.log(), ig.assert() and ig.show()\r\n\t\tif( window.console && window.console.log && window.console.assert ) {\r\n\t\t\t// Can't use .bind() on native functions in IE9 :/\r\n\t\t\tig.log = console.log.bind ? console.log.bind(console) : console.log;\r\n\t\t\tig.assert = console.assert.bind ? console.assert.bind(console) : console.assert;\r\n\t\t}\r\n\t\tig.show = this.showNumber.bind(this);\r\n\t},\r\n\t\r\n\t\r\n\taddNumber: function( name, width ) {\r\n\t\tvar number = ig.$new('span');\t\t\r\n\t\tthis.numberContainer.appendChild( number );\r\n\t\tthis.numberContainer.appendChild( document.createTextNode(name) );\r\n\t\t\r\n\t\tthis.numbers[name] = number;\r\n\t},\r\n\t\r\n\t\r\n\tshowNumber: function( name, number, width ) {\r\n\t\tif( !this.numbers[name] ) {\r\n\t\t\tthis.addNumber( name, width );\r\n\t\t}\r\n\t\tthis.numbers[name].textContent = number;\r\n\t},\r\n\t\r\n\t\r\n\taddPanel: function( panelDef ) {\r\n\t\t// Create the panel and options\r\n\t\tvar panel = new (panelDef.type)( panelDef.name, panelDef.label );\r\n\t\tif( panelDef.options ) {\r\n\t\t\tfor( var i = 0; i < panelDef.options.length; i++ ) {\r\n\t\t\t\tvar opt = panelDef.options[i];\r\n\t\t\t\tpanel.addOption( new ig.DebugOption(opt.name, opt.object, opt.property) );\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.panels[ panel.name ] = panel;\r\n\t\tpanel.container.style.display = 'none';\r\n\t\tthis.container.appendChild( panel.container );\r\n\t\t\r\n\t\t\r\n\t\t// Create the menu item\r\n\t\tvar menuItem = ig.$new('div');\r\n\t\tmenuItem.className = 'ig_debug_menu_item';\r\n\t\tmenuItem.textContent = panel.label;\r\n\t\tmenuItem.addEventListener(\r\n\t\t\t'click',\r\n\t\t\t(function(ev){ this.togglePanel(panel); }).bind(this),\r\n\t\t\tfalse\r\n\t\t);\r\n\t\tpanel.menuItem = menuItem;\r\n\t\t\r\n\t\t// Insert menu item in alphabetical order into the menu\r\n\t\tvar inserted = false;\r\n\t\tfor( var i = 1; i < this.panelMenu.childNodes.length; i++ ) {\r\n\t\t\tvar cn = this.panelMenu.childNodes[i];\r\n\t\t\tif( cn.textContent > panel.label ) {\r\n\t\t\t\tthis.panelMenu.insertBefore( menuItem, cn );\r\n\t\t\t\tinserted = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif( !inserted ) {\r\n\t\t\t// Not inserted? Append at the end!\r\n\t\t\tthis.panelMenu.appendChild( menuItem );\r\n\t\t}\r\n\t},\r\n\t\r\n\t\r\n\tshowPanel: function( name ) {\r\n\t\tthis.togglePanel( this.panels[name] );\r\n\t},\r\n\t\r\n\t\r\n\ttogglePanel: function( panel ) {\r\n\t\tif( panel != this.activePanel && this.activePanel ) {\r\n\t\t\tthis.activePanel.toggle( false );\r\n\t\t\tthis.activePanel.menuItem.className = 'ig_debug_menu_item';\r\n\t\t\tthis.activePanel = null;\r\n\t\t}\r\n\t\t\r\n\t\tvar dsp = panel.container.style.display;\r\n\t\tvar active = (dsp != 'block');\r\n\t\tpanel.toggle( active );\r\n\t\tpanel.menuItem.className = 'ig_debug_menu_item' + (active ? ' active' : '');\r\n\t\t\r\n\t\tif( active ) {\r\n\t\t\tthis.activePanel = panel;\r\n\t\t}\r\n\t},\r\n\t\r\n\t\r\n\tready: function() {\r\n\t\tfor( var p in this.panels ) {\r\n\t\t\tthis.panels[p].ready();\r\n\t\t}\r\n\t},\r\n\t\r\n\t\r\n\tbeforeRun: function() {\r\n\t\tvar timeBeforeRun = Date.now();\r\n\t\tthis.debugTickAvg = this.debugTickAvg * 0.8 + (timeBeforeRun - this.debugRealTime) * 0.2;\r\n\t\tthis.debugRealTime = timeBeforeRun;\r\n\t\t\r\n\t\tif( this.activePanel ) {\r\n\t\t\tthis.activePanel.beforeRun();\r\n\t\t}\r\n\t},\r\n\t\r\n\t\r\n\tafterRun: function() {\r\n\t\tvar frameTime = Date.now() - this.debugRealTime;\r\n\t\tvar nextFrameDue = (1000/ig.system.fps) - frameTime;\r\n\t\t\r\n\t\tthis.debugTime = this.debugTime * 0.8 + frameTime * 0.2;\r\n\t\t\r\n\t\t\r\n\t\tif( this.activePanel ) {\r\n\t\t\tthis.activePanel.afterRun();\r\n\t\t}\r\n\t\t\r\n\t\tthis.showNumber( 'ms',  this.debugTime.toFixed(2) );\r\n\t\tthis.showNumber( 'fps',  Math.round(1000/this.debugTickAvg) );\r\n\t\tthis.showNumber( 'draws', ig.Image.drawCount );\r\n\t\tif( ig.game && ig.game.entities ) {\r\n\t\t\tthis.showNumber( 'entities', ig.game.entities.length );\r\n\t\t}\r\n\t\tig.Image.drawCount = 0;\r\n\t}\r\n});\r\n\r\n\r\n\r\nig.DebugPanel = ig.Class.extend({\r\n\tactive: false,\r\n\tcontainer: null,\r\n\toptions: [],\r\n\tpanels: [],\r\n\tlabel: '',\r\n\tname: '',\r\n\t\r\n\t\r\n\tinit: function( name, label ) {\r\n\t\tthis.name = name;\r\n\t\tthis.label = label;\r\n\t\tthis.container = ig.$new('div');\r\n\t\tthis.container.className = 'ig_debug_panel ' + this.name;\r\n\t},\r\n\t\r\n\t\r\n\ttoggle: function( active ) {\r\n\t\tthis.active = active;\r\n\t\tthis.container.style.display = active ? 'block' : 'none';\r\n\t},\r\n\t\r\n\t\r\n\taddPanel: function( panel ) {\r\n\t\tthis.panels.push( panel );\r\n\t\tthis.container.appendChild( panel.container );\r\n\t},\r\n\t\r\n\t\r\n\taddOption: function( option ) {\r\n\t\tthis.options.push( option );\r\n\t\tthis.container.appendChild( option.container );\r\n\t},\r\n\t\r\n\t\r\n\tready: function(){},\r\n\tbeforeRun: function(){},\r\n\tafterRun: function(){}\r\n});\r\n\r\n\r\n\r\nig.DebugOption = ig.Class.extend({\r\n\tname: '',\r\n\tlabelName: '',\r\n\tclassName: 'ig_debug_option',\r\n\tlabel: null,\r\n\tmark: null,\r\n\tcontainer: null,\r\n\tactive: false,\r\n\t\r\n\tcolors: {\r\n\t\tenabled: '#fff',\r\n\t\tdisabled: '#444'\r\n\t},\r\n\t\r\n\t\r\n\tinit: function( name, object, property ) {\r\n\t\tthis.name = name;\r\n\t\tthis.object = object;\r\n\t\tthis.property = property;\r\n\t\t\r\n\t\tthis.active = this.object[this.property];\r\n\t\t\r\n\t\tthis.container = ig.$new('div');\r\n\t\tthis.container.className = 'ig_debug_option';\r\n\t\t\r\n\t\tthis.label = ig.$new('span');\r\n\t\tthis.label.className = 'ig_debug_label';\r\n\t\tthis.label.textContent = this.name;\r\n\t\t\r\n\t\tthis.mark = ig.$new('span');\r\n\t\tthis.mark.className = 'ig_debug_label_mark';\r\n\t\t\r\n\t\tthis.container.appendChild( this.mark );\r\n\t\tthis.container.appendChild( this.label );\r\n\t\tthis.container.addEventListener( 'click', this.click.bind(this), false );\r\n\t\t\r\n\t\tthis.setLabel();\r\n\t},\r\n\t\r\n\t\r\n\tsetLabel: function() {\r\n\t\tthis.mark.style.backgroundColor = this.active ? this.colors.enabled : this.colors.disabled;\r\n\t},\r\n\t\r\n\t\r\n\tclick: function( ev ) {\r\n\t\tthis.active = !this.active;\r\n\t\tthis.object[this.property] = this.active;\r\n\t\tthis.setLabel();\r\n\t\t\r\n\t\tev.stopPropagation();\r\n\t\tev.preventDefault();\r\n\t\treturn false;\r\n\t}\r\n});\r\n\r\n\r\n\r\n// Create the debug instance!\r\nig.debug = new ig.Debug();\r\n\r\n});\n\n\n/** WEBPACK FOOTER **\n ** ./lib/impact/debug/menu.js\n **/","ig.module(\n\t'impact.entity-pool'\n)\n.requires(\n\t'impact.game'\n)\n.defines(function(){ \"use strict\";\n\nig.EntityPool = {\n\tpools: {},\n\t\t\n\tmixin: { \n\t\tstaticInstantiate: function( x, y, settings ) {\n\t\t\treturn ig.EntityPool.getFromPool( this.classId, x, y, settings );\n\t\t},\n\t\t\n\t\terase: function() {\n\t\t\tig.EntityPool.putInPool( this );\n\t\t}\n\t},\n\t\n\tenableFor: function( Class ) {\n\t\tClass.inject(this.mixin);\n\t},\n\t\n\tgetFromPool: function( classId, x, y, settings ) {\n\t\tvar pool = this.pools[classId];\n\t\tif( !pool || !pool.length ) { return null; }\n\t\t\n\t\tvar instance = pool.pop();\n\t\tinstance.reset(x, y, settings);\n\t\treturn instance;\n\t},\n\t\n\tputInPool: function( instance ) {\n\t\tif( !this.pools[instance.classId] ) {\n\t\t\tthis.pools[instance.classId] = [instance];\n\t\t}\n\t\telse {\n\t\t\tthis.pools[instance.classId].push(instance);\n\t\t}\n\t},\n\t\n\tdrainPool: function( classId ) {\n\t\tdelete this.pools[classId];\n\t},\n\t\n\tdrainAllPools: function() {\n\t\tthis.pools = {};\n\t}\n};\n\nig.Game.inject({\n\tloadLevel: function( data ) {\n\t\tig.EntityPool.drainAllPools();\n\t\tthis.parent(data);\n\t}\n});\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/impact/entity-pool.js\n **/","ig.module(\n\t'impact.entity'\n)\n.requires(\n\t'impact.animation',\n\t'impact.impact'\n)\n.defines(function(){ \"use strict\";\n\nig.Entity = ig.Class.extend({\n\tid: 0,\n\tsettings: {},\n\t\n\tsize: {x: 16, y:16},\n\toffset: {x: 0, y: 0},\n\t\n\tpos: {x: 0, y:0},\n\tlast: {x: 0, y:0},\n\tvel: {x: 0, y: 0},\n\taccel: {x: 0, y: 0},\n\tfriction: {x: 0, y: 0},\n\tmaxVel: {x: 100, y: 100},\n\tzIndex: 0,\n\tgravityFactor: 1,\n\tstanding: false,\n\tbounciness: 0,\n\tminBounceVelocity: 40,\n    __id: null,\n\t\n\tanims: {},\n\tanimSheet: null,\n\tcurrentAnim: null,\n\thealth: 10,\n\t\n\ttype: 0, // TYPE.NONE\n\tcheckAgainst: 0, // TYPE.NONE\n\tcollides: 0, // COLLIDES.NEVER\n\t\n\t_killed: false,\n\t\n\tslopeStanding: {min: (44).toRad(), max: (136).toRad() },\n\t\n\tinit: function( x, y, settings ) {;\n\t\tthis.id = ++ig.Entity._lastId;\n\t\tthis.pos.x = this.last.x = x;\n\t\tthis.pos.y = this.last.y = y;\n\n\t\tig.merge( this, settings );\n\t},\n\t\n\treset: function( x, y, settings ) {\n\t\tvar proto = this.constructor.prototype;\n\t\tthis.pos.x = x;\n\t\tthis.pos.y = y;\n\t\tthis.last.x = x;\n\t\tthis.last.y = y;\n\t\tthis.vel.x = proto.vel.x;\n\t\tthis.vel.y = proto.vel.y;\n\t\tthis.accel.x = proto.accel.x;\n\t\tthis.accel.y = proto.accel.y;\n\t\tthis.health = proto.health;\n\t\tthis._killed = proto._killed;\n\t\tthis.standing = proto.standing;\n\t\t\n\t\tthis.type = proto.type;\n\t\tthis.checkAgainst = proto.checkAgainst;\n\t\tthis.collides = proto.collides;\n\t\t\n\t\tig.merge( this, settings );\n\t},\n\t\n\taddAnim: function( name, frameTime, sequence, stop ) {\n\t\tif( !this.animSheet ) {\n\t\t\tthrow( 'No animSheet to add the animation '+name+' to.' );\n\t\t}\n\t\tvar a = new ig.Animation( this.animSheet, frameTime, sequence, stop );\n\t\tthis.anims[name] = a;\n\t\tif( !this.currentAnim ) {\n\t\t\tthis.currentAnim = a;\n\t\t}\n\t\t\n\t\treturn a;\n\t},\n\t\n\tupdate: function() {\n\t\tthis.last.x = this.pos.x;\n\t\tthis.last.y = this.pos.y;\n\t\tthis.vel.y += ig.game.gravity * ig.system.tick * this.gravityFactor;\n\t\t\n\t\tthis.vel.x = this.getNewVelocity( this.vel.x, this.accel.x, this.friction.x, this.maxVel.x );\n\t\tthis.vel.y = this.getNewVelocity( this.vel.y, this.accel.y, this.friction.y, this.maxVel.y );\n\t\t//console.log(this.__id, this.vel);\n\t\t// movement & collision\n\t\tvar mx = this.vel.x * ig.system.tick;\n\t\tvar my = this.vel.y * ig.system.tick;\n\t\tvar res = ig.game.collisionMap.trace( \n\t\t\tthis.pos.x, this.pos.y, mx, my, this.size.x, this.size.y\n\t\t);\n        //console.log(this.__id, mx, my);\n\t\tthis.handleMovementTrace( res );\n\t\t\n\t\tif( this.currentAnim ) {\n\t\t\tthis.currentAnim.update();\n\t\t}\n\t},\n\t\n\t\n\tgetNewVelocity: function( vel, accel, friction, max ) {\n\t\tif( accel ) {\n\t\t\treturn ( vel + accel * ig.system.tick ).limit( -max, max );\n\t\t}\n\t\telse if( friction ) {\n\t\t\tvar delta = friction * ig.system.tick;\n\t\t\t\n\t\t\tif( vel - delta > 0) {\n\t\t\t\treturn vel - delta;\n\t\t\t} \n\t\t\telse if( vel + delta < 0 ) {\n\t\t\t\treturn vel + delta;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t}\n\n\t\treturn vel.limit( -max, max );\n\t},\n\t\n\t\n\thandleMovementTrace: function( res ) {\n\t\tthis.standing = false;\n\t\t\n\t\tif( res.collision.y ) {\n\t\t\tif( this.bounciness > 0 && Math.abs(this.vel.y) > this.minBounceVelocity ) {\n\t\t\t\tthis.vel.y *= -this.bounciness;\t\t\t\t\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif( this.vel.y > 0 ) {\n\t\t\t\t\tthis.standing = true;\n\t\t\t\t}\n\t\t\t\tthis.vel.y = 0;\n\t\t\t}\n\t\t}\n\t\tif( res.collision.x ) {\n\t\t\tif( this.bounciness > 0 && Math.abs(this.vel.x) > this.minBounceVelocity ) {\n\t\t\t\tthis.vel.x *= -this.bounciness;\t\t\t\t\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.vel.x = 0;\n\t\t\t}\n\t\t}\n\t\tif( res.collision.slope ) {\n\t\t\tvar s = res.collision.slope;\n\t\t\t\n\t\t\tif( this.bounciness > 0 ) {\n\t\t\t\tvar proj = this.vel.x * s.nx + this.vel.y * s.ny;\n\t\t\t\t\n\t\t\t\tthis.vel.x = (this.vel.x - s.nx * proj * 2) * this.bounciness;\n\t\t\t\tthis.vel.y = (this.vel.y - s.ny * proj * 2) * this.bounciness;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar lengthSquared = s.x * s.x + s.y * s.y;\n\t\t\t\tvar dot = (this.vel.x * s.x + this.vel.y * s.y)/lengthSquared;\n\t\t\t\t\n\t\t\t\tthis.vel.x = s.x * dot;\n\t\t\t\tthis.vel.y = s.y * dot;\n\t\t\t\t\n\t\t\t\tvar angle = Math.atan2( s.x, s.y );\n\t\t\t\tif( angle > this.slopeStanding.min && angle < this.slopeStanding.max ) {\n\t\t\t\t\tthis.standing = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.pos = res.pos;\n\t},\n\t\n\t\n\tdraw: function() {\n\t\tif( this.currentAnim ) {\n\t\t\tthis.currentAnim.draw(\n\t\t\t\tthis.pos.x - this.offset.x - ig.game._rscreen.x,\n\t\t\t\tthis.pos.y - this.offset.y - ig.game._rscreen.y\n\t\t\t);\n\t\t}\n\t},\n\t\n\t\n\tkill: function() {\n\t\tig.game.removeEntity( this );\n\t},\n\t\n\t\n\treceiveDamage: function( amount, from ) {\n\t\tthis.health -= amount;\n\t\tif( this.health <= 0 ) {\n\t\t\tthis.kill();\n\t\t}\n\t},\n\t\n\t\n\ttouches: function( other ) {\t\t\n\t\treturn !(\n\t\t\tthis.pos.x >= other.pos.x + other.size.x ||\n\t\t\tthis.pos.x + this.size.x <= other.pos.x ||\n\t\t\tthis.pos.y >= other.pos.y + other.size.y ||\n\t\t\tthis.pos.y + this.size.y <= other.pos.y\n\t\t);\n\t},\n\t\n\t\n\tdistanceTo: function( other ) {\n\t\tvar xd = (this.pos.x + this.size.x/2) - (other.pos.x + other.size.x/2); \n\t\tvar yd = (this.pos.y + this.size.y/2) - (other.pos.y + other.size.y/2);\n\t\treturn Math.sqrt( xd*xd + yd*yd );\n\t},\n\t\n\t\n\tangleTo: function( other ) {\n\t\treturn Math.atan2(\n\t\t\t(other.pos.y + other.size.y/2) - (this.pos.y + this.size.y/2),\n\t\t\t(other.pos.x + other.size.x/2) - (this.pos.x + this.size.x/2)\n\t\t);\n\t},\n\t\n\t\n\tcheck: function( other ) {},\n\tcollideWith: function( other, axis ) {},\n\tready: function() {},\n\terase: function() {}\n});\n\n\n// Last used entity id; incremented with each spawned entity\n\nig.Entity._lastId = 0;\n\n\n// Collision Types - Determine if and how entities collide with each other\n\n// In ACTIVE vs. LITE or FIXED vs. ANY collisions, only the \"weak\" entity moves,\n// while the other one stays fixed. In ACTIVE vs. ACTIVE and ACTIVE vs. PASSIVE\n// collisions, both entities are moved. LITE or PASSIVE entities don't collide\n// with other LITE or PASSIVE entities at all. The behaiviour for FIXED vs.\n// FIXED collisions is undefined.\n\nig.Entity.COLLIDES = {\n\tNEVER: 0,\n\tLITE: 1,\n\tPASSIVE: 2,\n\tACTIVE: 4,\n\tFIXED: 8\n};\n\n\n// Entity Types - used for checks\n\nig.Entity.TYPE = {\n\tNONE: 0,\n\tA: 1,\n\tB: 2,\n\tBOTH: 3\n};\n\n\n\nig.Entity.checkPair = function( a, b ) {\n\t\n\t// Do these entities want checks?\n\tif( a.checkAgainst & b.type ) {\n\t\ta.check( b );\n\t}\n\t\n\tif( b.checkAgainst & a.type ) {\n\t\tb.check( a );\n\t}\n\t\n\t// If this pair allows collision, solve it! At least one entity must\n\t// collide ACTIVE or FIXED, while the other one must not collide NEVER.\n\tif(\n\t\ta.collides && b.collides &&\n\t\ta.collides + b.collides > ig.Entity.COLLIDES.ACTIVE\n\t) {\n\t\tig.Entity.solveCollision( a, b );\n\t}\n};\n\n\nig.Entity.solveCollision = function( a, b ) {\n\t\n\t// If one entity is FIXED, or the other entity is LITE, the weak\n\t// (FIXED/NON-LITE) entity won't move in collision response\n\tvar weak = null;\n\tif(\n\t\ta.collides == ig.Entity.COLLIDES.LITE ||\n\t\tb.collides == ig.Entity.COLLIDES.FIXED\n\t) {\n\t\tweak = a;\n\t}\n\telse if(\n\t\tb.collides == ig.Entity.COLLIDES.LITE ||\n\t\ta.collides == ig.Entity.COLLIDES.FIXED\n\t) {\n\t\tweak = b;\n\t}\n\t\t\n\t\n\t// Did they already overlap on the X-axis in the last frame? If so,\n\t// this must be a vertical collision!\n\tif(\n\t\ta.last.x + a.size.x > b.last.x &&\n\t\ta.last.x < b.last.x + b.size.x\n\t) {\n\t\t// Which one is on top?\n\t\tif( a.last.y < b.last.y ) {\n\t\t\tig.Entity.seperateOnYAxis( a, b, weak );\n\t\t}\n\t\telse {\n\t\t\tig.Entity.seperateOnYAxis( b, a, weak );\n\t\t}\n\t\ta.collideWith( b, 'y' );\n\t\tb.collideWith( a, 'y' );\n\t}\n\t\n\t// Horizontal collision\n\telse if(\n\t\ta.last.y + a.size.y > b.last.y &&\n\t\ta.last.y < b.last.y + b.size.y\n\t){\n\t\t// Which one is on the left?\n\t\tif( a.last.x < b.last.x ) {\n\t\t\tig.Entity.seperateOnXAxis( a, b, weak );\n\t\t}\n\t\telse {\n\t\t\tig.Entity.seperateOnXAxis( b, a, weak );\n\t\t}\n\t\ta.collideWith( b, 'x' );\n\t\tb.collideWith( a, 'x' );\n\t}\n};\n\n\n// FIXME: This is a mess. Instead of doing all the movements here, the entities\n// should get notified of the collision (with all details) and resolve it\n// themselfs.\n\nig.Entity.seperateOnXAxis = function( left, right, weak ) {\n\tvar nudge = (left.pos.x + left.size.x - right.pos.x);\n\t\n\t// We have a weak entity, so just move this one\n\tif( weak ) {\n\t\tvar strong = left === weak ? right : left;\n\t\tweak.vel.x = -weak.vel.x * weak.bounciness + strong.vel.x;\n\t\t\n\t\tvar resWeak = ig.game.collisionMap.trace( \n\t\t\tweak.pos.x, weak.pos.y, weak == left ? -nudge : nudge, 0, weak.size.x, weak.size.y\n\t\t);\n\t\tweak.pos.x = resWeak.pos.x;\n\t}\n\t\n\t// Normal collision - both move\n\telse {\n\t\tvar v2 = (left.vel.x - right.vel.x)/2;\n\t\tleft.vel.x = -v2;\n\t\tright.vel.x = v2;\n\t\n\t\tvar resLeft = ig.game.collisionMap.trace( \n\t\t\tleft.pos.x, left.pos.y, -nudge/2, 0, left.size.x, left.size.y\n\t\t);\n\t\tleft.pos.x = Math.floor(resLeft.pos.x);\n\t\t\n\t\tvar resRight = ig.game.collisionMap.trace( \n\t\t\tright.pos.x, right.pos.y, nudge/2, 0, right.size.x, right.size.y\n\t\t);\n\t\tright.pos.x = Math.ceil(resRight.pos.x);\n\t}\n};\n\n\nig.Entity.seperateOnYAxis = function( top, bottom, weak ) {\n\tvar nudge = (top.pos.y + top.size.y - bottom.pos.y);\n\t\n\t// We have a weak entity, so just move this one\n\tif( weak ) {\n\t\tvar strong = top === weak ? bottom : top;\n\t\tweak.vel.y = -weak.vel.y * weak.bounciness + strong.vel.y;\n\t\t\n\t\t// Riding on a platform?\n\t\tvar nudgeX = 0;\n\t\tif( weak == top && Math.abs(weak.vel.y - strong.vel.y) < weak.minBounceVelocity ) {\n\t\t\tweak.standing = true;\n\t\t\tnudgeX = strong.vel.x * ig.system.tick;\n\t\t}\n\t\t\n\t\tvar resWeak = ig.game.collisionMap.trace( \n\t\t\tweak.pos.x, weak.pos.y, nudgeX, weak == top ? -nudge : nudge, weak.size.x, weak.size.y\n\t\t);\n\t\tweak.pos.y = resWeak.pos.y;\n\t\tweak.pos.x = resWeak.pos.x;\n\t}\n\t\n\t// Bottom entity is standing - just bounce the top one\n\telse if( ig.game.gravity && (bottom.standing || top.vel.y > 0) ) {\t\n\t\tvar resTop = ig.game.collisionMap.trace( \n\t\t\ttop.pos.x, top.pos.y, 0, -(top.pos.y + top.size.y - bottom.pos.y), top.size.x, top.size.y\n\t\t);\n\t\ttop.pos.y = resTop.pos.y;\n\t\t\n\t\tif( top.bounciness > 0 && top.vel.y > top.minBounceVelocity ) {\n\t\t\ttop.vel.y *= -top.bounciness;\t\t\n\t\t}\n\t\telse {\n\t\t\ttop.standing = true;\n\t\t\ttop.vel.y = 0;\n\t\t}\n\t}\n\t\n\t// Normal collision - both move\n\telse {\n\t\tvar v2 = (top.vel.y - bottom.vel.y)/2;\n\t\ttop.vel.y = -v2;\n\t\tbottom.vel.y = v2;\n\t\t\n\t\tvar nudgeX = bottom.vel.x * ig.system.tick;\n\t\tvar resTop = ig.game.collisionMap.trace( \n\t\t\ttop.pos.x, top.pos.y, nudgeX, -nudge/2, top.size.x, top.size.y\n\t\t);\n\t\ttop.pos.y = resTop.pos.y;\n\t\t\n\t\tvar resBottom = ig.game.collisionMap.trace( \n\t\t\tbottom.pos.x, bottom.pos.y, 0, nudge/2, bottom.size.x, bottom.size.y\n\t\t);\n\t\tbottom.pos.y = resBottom.pos.y;\n\t}\n};\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./lib/impact/entity.js\n **/","ig.module(\n\t'impact.font'\n)\n.requires(\n\t'impact.image'\n)\n.defines(function(){ \"use strict\";\n\n\nig.Font = ig.Image.extend({\n\twidthMap: [],\n\tindices: [],\n\tfirstChar: 32,\n\talpha: 1,\n\tletterSpacing: 1,\n\tlineSpacing: 0,\n\t\n\t\n\tonload: function( ev ) {\n\t\tthis._loadMetrics( this.data );\n\t\tthis.parent( ev );\n\t},\n\n\n\twidthForString: function( text ) {\n\t\t// Multiline?\n\t\tif( text.indexOf('\\n') !== -1 ) {\n\t\t\tvar lines = text.split( '\\n' );\n\t\t\tvar width = 0;\n\t\t\tfor( var i = 0; i < lines.length; i++ ) {\n\t\t\t\twidth = Math.max( width, this._widthForLine(lines[i]) );\n\t\t\t}\n\t\t\treturn width;\n\t\t}\n\t\telse {\n\t\t\treturn this._widthForLine( text );\n\t\t}\n\t},\n\n\t\n\t_widthForLine: function( text ) {\n\t\tvar width = 0;\n\t\tfor( var i = 0; i < text.length; i++ ) {\n\t\t\twidth += this.widthMap[text.charCodeAt(i) - this.firstChar] + this.letterSpacing;\n\t\t}\n\t\treturn width;\n\t},\n\n\n\theightForString: function( text ) {\n\t\treturn text.split('\\n').length * (this.height + this.lineSpacing);\n\t},\n\t\n\t\n\tdraw: function( text, x, y, align ) {\n\t\tif( typeof(text) != 'string' ) {\n\t\t\ttext = text.toString();\n\t\t}\n\t\t\n\t\t// Multiline?\n\t\tif( text.indexOf('\\n') !== -1 ) {\n\t\t\tvar lines = text.split( '\\n' );\n\t\t\tvar lineHeight = this.height + this.lineSpacing;\n\t\t\tfor( var i = 0; i < lines.length; i++ ) {\n\t\t\t\tthis.draw( lines[i], x, y + i * lineHeight, align );\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif( align == ig.Font.ALIGN.RIGHT || align == ig.Font.ALIGN.CENTER ) {\n\t\t\tvar width = this._widthForLine( text );\n\t\t\tx -= align == ig.Font.ALIGN.CENTER ? width/2 : width;\n\t\t}\n\t\t\n\n\t\tif( this.alpha !== 1 ) {\n\t\t\tig.system.context.globalAlpha = this.alpha;\n\t\t}\n\n\t\tfor( var i = 0; i < text.length; i++ ) {\n\t\t\tvar c = text.charCodeAt(i);\n\t\t\tx += this._drawChar( c - this.firstChar, x, y );\n\t\t}\n\n\t\tif( this.alpha !== 1 ) {\n\t\t\tig.system.context.globalAlpha = 1;\n\t\t}\n\t\tig.Image.drawCount += text.length;\n\t},\n\t\n\t\n\t_drawChar: function( c, targetX, targetY ) {\n\t\tif( !this.loaded || c < 0 || c >= this.indices.length ) { return 0; }\n\t\t\n\t\tvar scale = ig.system.scale;\n\t\t\n\t\t\n\t\tvar charX = this.indices[c] * scale;\n\t\tvar charY = 0;\n\t\tvar charWidth = this.widthMap[c] * scale;\n\t\tvar charHeight = (this.height-2) * scale;\t\t\n\t\t\n\t\tig.system.context.drawImage( \n\t\t\tthis.data,\n\t\t\tcharX, charY,\n\t\t\tcharWidth, charHeight,\n\t\t\tig.system.getDrawPos(targetX), ig.system.getDrawPos(targetY),\n\t\t\tcharWidth, charHeight\n\t\t);\n\t\t\n\t\treturn this.widthMap[c] + this.letterSpacing;\n\t},\n\t\n\t\n\t_loadMetrics: function( image ) {\n\t\t// Draw the bottommost line of this font image into an offscreen canvas\n\t\t// and analyze it pixel by pixel.\n\t\t// A run of non-transparent pixels represents a character and its width\n\t\t\n\t\tthis.height = image.height-1;\n\t\tthis.widthMap = [];\n\t\tthis.indices = [];\n\t\t\n\t\tvar px = ig.getImagePixels( image, 0, image.height-1, image.width, 1 );\n\t\t\n\t\tvar currentChar = 0;\n\t\tvar currentWidth = 0;\n\t\tfor( var x = 0; x < image.width; x++ ) {\n\t\t\tvar index = x * 4 + 3; // alpha component of this pixel\n\t\t\tif( px.data[index] > 127 ) {\n\t\t\t\tcurrentWidth++;\n\t\t\t}\n\t\t\telse if( px.data[index] < 128 && currentWidth ) {\n\t\t\t\tthis.widthMap.push( currentWidth );\n\t\t\t\tthis.indices.push( x-currentWidth );\n\t\t\t\tcurrentChar++;\n\t\t\t\tcurrentWidth = 0;\n\t\t\t}\n\t\t}\n\t\tthis.widthMap.push( currentWidth );\n\t\tthis.indices.push( x-currentWidth );\n\t}\n});\n\n\nig.Font.ALIGN = {\n\tLEFT: 0,\n\tRIGHT: 1,\n\tCENTER: 2\n};\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/impact/font.js\n **/","ig.module(\n\t'impact.game'\n)\n.requires(\n\t'impact.impact',\n\t'impact.entity',\n\t'impact.collision-map',\n\t'impact.background-map'\n)\n.defines(function(){ \"use strict\";\n\nig.Game = ig.Class.extend({\n\t\n\tclearColor: '#000000',\n\tgravity: 0,\n\tscreen: {x: 0, y: 0},\n\t_rscreen: {x: 0, y: 0},\n\t\n\tentities: [],\n\t\n\tnamedEntities: {},\n\tcollisionMap: ig.CollisionMap.staticNoCollision,\n\tbackgroundMaps: [],\n\tbackgroundAnims: {},\n\t\n\tautoSort: false,\n\tsortBy: null,\n\t\n\tcellSize: 64,\n\t\n\t_deferredKill: [],\n\t_levelToLoad: null,\n\t_doSortEntities: false,\n    \n\tstaticInstantiate: function() {\n\t\tthis.sortBy = this.sortBy || ig.Game.SORT.Z_INDEX;\n\t\tig.game = this;\n\t\treturn null;\n\t},\n\t\n\t\n\tloadLevel: function( data ) {\n\t\tthis.screen = {x: 0, y: 0};\n\n\t\t// Entities\n\t\tthis.entities = [];\n\t\tthis.namedEntities = {};\n\t\tfor( var i = 0; i < data.entities.length; i++ ) {\n\t\t\tvar ent = data.entities[i];\n\t\t\tthis.spawnEntity( ent.type, ent.x, ent.y, ent.settings );\n\t\t}\n\t\tthis.sortEntities();\n\t\t\n\t\t// Map Layer\n\t\tthis.collisionMap = ig.CollisionMap.staticNoCollision;\n\t\tthis.backgroundMaps = [];\n\t\tfor( var i = 0; i < data.layer.length; i++ ) {\n\t\t\tvar ld = data.layer[i];\n\t\t\tif( ld.name == 'collision' ) {\n\t\t\t\tthis.collisionMap = new ig.CollisionMap(ld.tilesize, ld.data );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar newMap = new ig.BackgroundMap(ld.tilesize, ld.data, ld.tilesetName);\n\t\t\t\tnewMap.anims = this.backgroundAnims[ld.tilesetName] || {};\n\t\t\t\tnewMap.repeat = ld.repeat;\n\t\t\t\tnewMap.distance = ld.distance;\n\t\t\t\tnewMap.foreground = !!ld.foreground;\n\t\t\t\tnewMap.preRender = !!ld.preRender;\n\t\t\t\tnewMap.name = ld.name;\n\t\t\t\tthis.backgroundMaps.push( newMap );\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Call post-init ready function on all entities\n\t\tfor( var i = 0; i < this.entities.length; i++ ) {\n\t\t\tthis.entities[i].ready();\n\t\t}\n\t},\n\t\n\t\n\tloadLevelDeferred: function( data ) {\n\t\tthis._levelToLoad = data;\n\t},\n\t\n\t\n\tgetMapByName: function( name ) {\n\t\tif( name == 'collision' ) {\n\t\t\treturn this.collisionMap;\n\t\t}\n\t\t\n\t\tfor( var i = 0; i < this.backgroundMaps.length; i++ ) {\n\t\t\tif( this.backgroundMaps[i].name == name ) {\n\t\t\t\treturn this.backgroundMaps[i];\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn null;\n\t},\n\t\n\t\n\tgetEntityByName: function( name ) {\n\t\treturn this.namedEntities[name];\n\t},\n\t\n\t\n\tgetEntitiesByType: function( type ) {\n\t\tvar entityClass = typeof(type) === 'string'\n\t\t\t? ig.global[type]\n\t\t\t: type;\n\t\t\t\n\t\tvar a = [];\n\t\tfor( var i = 0; i < this.entities.length; i++ ) {\n\t\t\tvar ent = this.entities[i];\n\t\t\tif( ent instanceof entityClass && !ent._killed ) {\n\t\t\t\ta.push( ent );\n\t\t\t}\n\t\t}\n\t\treturn a;\n\t},\n\t\n\t\n\tspawnEntity: function( type, x, y, settings ) {\n\t\tvar entityClass = typeof(type) === 'string'\n\t\t\t? ig.global[type]\n\t\t\t: type;\n\n\t\tif( !entityClass ) {\n\t\t\tthrow(\"Can't spawn entity of type \" + type);\n\t\t}\n\t\tvar ent = new (entityClass)( x, y, settings || {} );\n\t\tthis.entities.push( ent );\n\t\tif( ent.name ) {\n\t\t\tthis.namedEntities[ent.name] = ent;\n\t\t}\n\n\t\treturn ent;\n\t},\n\t\n\t\n\tsortEntities: function() {\n\t\tthis.entities.sort( this.sortBy );\n\t},\n\t\n\t\n\tsortEntitiesDeferred: function() {\n\t\tthis._doSortEntities = true;\n\t},\n\t\n\t\n\tremoveEntity: function( ent ) {\n\t\t// Remove this entity from the named entities\n\t\tif( ent.name ) {\n\t\t\tdelete this.namedEntities[ent.name];\n\t\t}\n\t\t\n\t\t// We can not remove the entity from the entities[] array in the midst\n\t\t// of an update cycle, so remember all killed entities and remove\n\t\t// them later.\n\t\t// Also make sure this entity doesn't collide anymore and won't get\n\t\t// updated or checked\n\t\tent._killed = true;\n\t\tent.type = ig.Entity.TYPE.NONE;\n\t\tent.checkAgainst = ig.Entity.TYPE.NONE;\n\t\tent.collides = ig.Entity.COLLIDES.NEVER;\n\t\tthis._deferredKill.push( ent );\n\t},\n\t\n\t\n\trun: function() {\n\t\tthis.update();\n\t\tthis.draw();\n\t},\n\t\n\t\n\tupdate: function(){\n\t\t// load new level?\n\t\tif( this._levelToLoad ) {\n\t\t\tthis.loadLevel( this._levelToLoad );\n\t\t\tthis._levelToLoad = null;\n\t\t}\n\n\t\t// update entities\n\t\tthis.updateEntities();\n\t\tthis.checkEntities();\n\t\t\n\t\t// remove all killed entities\n\t\tfor( var i = 0; i < this._deferredKill.length; i++ ) {\n\t\t\tthis._deferredKill[i].erase();\n\t\t\tthis.entities.erase( this._deferredKill[i] );\n\t\t}\n\t\tthis._deferredKill = [];\n\t\t\n\t\t// sort entities?\n\t\tif( this._doSortEntities || this.autoSort ) {\n\t\t\tthis.sortEntities();\n\t\t\tthis._doSortEntities = false;\n\t\t}\n\t\t\n\t\t// update background animations\n\t\tfor( var tileset in this.backgroundAnims ) {\n\t\t\tvar anims = this.backgroundAnims[tileset];\n\t\t\tfor( var a in anims ) {\n\t\t\t\tanims[a].update();\n\t\t\t}\n\t\t}\n\t},\n\t\n\t\n\tupdateEntities: function() {\n\t\tfor( var i = 0; i < this.entities.length; i++ ) {\n\t\t\tvar ent = this.entities[i];\n\t\t\tif( !ent._killed ) {\n\t\t\t\tent.update();\n\t\t\t}\n\t\t}\n\t},\n\t\n\t\n\tdraw: function(){\n\t\tif( this.clearColor ) {\n\t\t\tig.system.clear( this.clearColor );\n\t\t}\n\t\t\n\t\t// This is a bit of a circle jerk. Entities reference game._rscreen \n\t\t// instead of game.screen when drawing themselfs in order to be \n\t\t// \"synchronized\" to the rounded(?) screen position\n\t\tthis._rscreen.x = ig.system.getDrawPos(this.screen.x)/ig.system.scale;\n\t\tthis._rscreen.y = ig.system.getDrawPos(this.screen.y)/ig.system.scale;\n\t\t\n\t\t\n\t\tvar mapIndex;\n\t\tfor( mapIndex = 0; mapIndex < this.backgroundMaps.length; mapIndex++ ) {\n\t\t\tvar map = this.backgroundMaps[mapIndex];\n\t\t\tif( map.foreground ) {\n\t\t\t\t// All foreground layers are drawn after the entities\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tmap.setScreenPos( this.screen.x, this.screen.y );\n\t\t\tmap.draw();\n\t\t}\n\t\t\n\t\t\n\t\tthis.drawEntities();\n\t\t\n\t\t\n\t\tfor( mapIndex; mapIndex < this.backgroundMaps.length; mapIndex++ ) {\n\t\t\tvar map = this.backgroundMaps[mapIndex];\n\t\t\tmap.setScreenPos( this.screen.x, this.screen.y );\n\t\t\tmap.draw();\n\t\t}\n\t},\n\t\n\t\n\tdrawEntities: function() {\n\t\tfor( var i = 0; i < this.entities.length; i++ ) {\n\t\t\tthis.entities[i].draw();\n\t\t}\n\t},\n\n\t\n\tcheckEntities: function() {\n\t\t// Insert all entities into a spatial hash and check them against any\n\t\t// other entity that already resides in the same cell. Entities that are\n\t\t// bigger than a single cell, are inserted into each one they intersect\n\t\t// with.\n\t\t\n\t\t// A list of entities, which the current one was already checked with,\n\t\t// is maintained for each entity.\n\t\t\n\t\tvar hash = {};\n\t\tfor( var e = 0; e < this.entities.length; e++ ) {\n\t\t\tvar entity = this.entities[e];\n\t\t\t\n\t\t\t// Skip entities that don't check, don't get checked and don't collide\n\t\t\tif(\n\t\t\t\tentity.type == ig.Entity.TYPE.NONE &&\n\t\t\t\tentity.checkAgainst == ig.Entity.TYPE.NONE &&\n\t\t\t\tentity.collides == ig.Entity.COLLIDES.NEVER\n\t\t\t) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t\n\t\t\tvar checked = {},\n\t\t\t\txmin = Math.floor( entity.pos.x/this.cellSize ),\n\t\t\t\tymin = Math.floor( entity.pos.y/this.cellSize ),\n\t\t\t\txmax = Math.floor( (entity.pos.x+entity.size.x)/this.cellSize ) + 1,\n\t\t\t\tymax = Math.floor( (entity.pos.y+entity.size.y)/this.cellSize ) + 1;\n\t\t\t\n\t\t\tfor( var x = xmin; x < xmax; x++ ) {\n\t\t\t\tfor( var y = ymin; y < ymax; y++ ) {\n\t\t\t\t\t\n\t\t\t\t\t// Current cell is empty - create it and insert!\n\t\t\t\t\tif( !hash[x] ) {\n\t\t\t\t\t\thash[x] = {};\n\t\t\t\t\t\thash[x][y] = [entity];\n\t\t\t\t\t}\n\t\t\t\t\telse if( !hash[x][y] ) {\n\t\t\t\t\t\thash[x][y] = [entity];\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// Check against each entity in this cell, then insert\n\t\t\t\t\telse {\n\t\t\t\t\t\tvar cell = hash[x][y];\n\t\t\t\t\t\tfor( var c = 0; c < cell.length; c++ ) {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// Intersects and wasn't already checkd?\n\t\t\t\t\t\t\tif( entity.touches(cell[c]) && !checked[cell[c].id] ) {\n\t\t\t\t\t\t\t\tchecked[cell[c].id] = true;\n\t\t\t\t\t\t\t\tig.Entity.checkPair( entity, cell[c] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcell.push(entity);\n\t\t\t\t\t}\n\t\t\t\t} // end for y size\n\t\t\t} // end for x size\n\t\t} // end for entities\n\t}\n});\n\nig.Game.SORT = {\n\tZ_INDEX: function( a, b ){ return a.zIndex - b.zIndex; },\n\tPOS_X: function( a, b ){ return (a.pos.x+a.size.x) - (b.pos.x+b.size.x); },\n\tPOS_Y: function( a, b ){ return (a.pos.y+a.size.y) - (b.pos.y+b.size.y); }\n};\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./lib/impact/game.js\n **/","ig.module(\n\t'impact.image'\n)\n.defines(function(){ \"use strict\";\n\nig.Image = ig.Class.extend({\n\tdata: null,\n\twidth: 0,\n\theight: 0,\n\tloaded: false,\n\tfailed: false,\n\tloadCallback: null,\n\tpath: '',\n\t\n\t\n\tstaticInstantiate: function( path ) {\n\t\treturn ig.Image.cache[path] || null;\n\t},\n\t\n\t\n\tinit: function( path ) {\n\t\tthis.path = path;\n\t\tthis.load();\n\t},\n\t\n\t\n\tload: function( loadCallback ) {\n\t\tif( this.loaded ) {\n\t\t\tif( loadCallback ) {\n\t\t\t\tloadCallback( this.path, true );\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\telse if( !this.loaded && ig.ready ) {\n\t\t\tthis.loadCallback = loadCallback || null;\n\t\t\t\n\t\t\tthis.data = new Image();\n\t\t\tthis.data.onload = this.onload.bind(this);\n\t\t\tthis.data.onerror = this.onerror.bind(this);\n\t\t\tthis.data.src = ig.prefix + this.path + ig.nocache;\n\t\t}\n\t\telse {\n\t\t\tig.addResource( this );\n\t\t}\n\t\t\n\t\tig.Image.cache[this.path] = this;\n\t},\n\t\n\t\n\treload: function() { \n\t\tthis.loaded = false;\n\t\tthis.data = new Image();\n\t\tthis.data.onload = this.onload.bind(this);\n\t\tthis.data.src = this.path + '?' + Date.now();\n\t},\n\t\n\t\n\tonload: function( event ) {\n\t\tthis.width = this.data.width;\n\t\tthis.height = this.data.height;\n\t\tthis.loaded = true;\n\t\t\n\t\tif( ig.system.scale != 1 ) {\n\t\t\tthis.resize( ig.system.scale );\n\t\t}\n\t\t\n\t\tif( this.loadCallback ) {\n\t\t\tthis.loadCallback( this.path, true );\n\t\t}\n\t},\n\t\n\t\n\tonerror: function( event ) {\n\t\tthis.failed = true;\n\t\t\n\t\tif( this.loadCallback ) {\n\t\t\tthis.loadCallback( this.path, false );\n\t\t}\n\t},\n\t\n\t\n\tresize: function( scale ) {\n\t\t// Nearest-Neighbor scaling\n\t\t\n\t\t// The original image is drawn into an offscreen canvas of the same size\n\t\t// and copied into another offscreen canvas with the new size. \n\t\t// The scaled offscreen canvas becomes the image (data) of this object.\n\t\t\n\t\tvar origPixels = ig.getImagePixels( this.data, 0, 0, this.width, this.height );\n\t\t\n\t\tvar widthScaled = this.width * scale;\n\t\tvar heightScaled = this.height * scale;\n\n\t\tvar scaled = ig.$new('canvas');\n\t\tscaled.width = widthScaled;\n\t\tscaled.height = heightScaled;\n\t\tvar scaledCtx = scaled.getContext('2d');\n\t\tvar scaledPixels = scaledCtx.getImageData( 0, 0, widthScaled, heightScaled );\n\t\t\t\n\t\tfor( var y = 0; y < heightScaled; y++ ) {\n\t\t\tfor( var x = 0; x < widthScaled; x++ ) {\n\t\t\t\tvar index = (Math.floor(y / scale) * this.width + Math.floor(x / scale)) * 4;\n\t\t\t\tvar indexScaled = (y * widthScaled + x) * 4;\n\t\t\t\tscaledPixels.data[ indexScaled ] = origPixels.data[ index ];\n\t\t\t\tscaledPixels.data[ indexScaled+1 ] = origPixels.data[ index+1 ];\n\t\t\t\tscaledPixels.data[ indexScaled+2 ] = origPixels.data[ index+2 ];\n\t\t\t\tscaledPixels.data[ indexScaled+3 ] = origPixels.data[ index+3 ];\n\t\t\t}\n\t\t}\n\t\tscaledCtx.putImageData( scaledPixels, 0, 0 );\n\t\tthis.data = scaled;\n\t},\n\t\n\t\n\tdraw: function( targetX, targetY, sourceX, sourceY, width, height ) {\n\t\tif( !this.loaded ) { return; }\n\t\t\n\t\tvar scale = ig.system.scale;\n\t\tsourceX = sourceX ? sourceX * scale : 0;\n\t\tsourceY = sourceY ? sourceY * scale : 0;\n\t\twidth = (width ? width : this.width) * scale;\n\t\theight = (height ? height : this.height) * scale;\n\t\t\n\t\tig.system.context.drawImage( \n\t\t\tthis.data, sourceX, sourceY, width, height,\n\t\t\tig.system.getDrawPos(targetX), \n\t\t\tig.system.getDrawPos(targetY),\n\t\t\twidth, height\n\t\t);\n\t\t\n\t\tig.Image.drawCount++;\n\t},\n\t\n\t\n\tdrawTile: function( targetX, targetY, tile, tileWidth, tileHeight, flipX, flipY ) {\n\t\ttileHeight = tileHeight ? tileHeight : tileWidth;\n\t\t\n\t\tif( !this.loaded || tileWidth > this.width || tileHeight > this.height ) { return; }\n\t\t\n\t\tvar scale = ig.system.scale;\n\t\tvar tileWidthScaled = Math.floor(tileWidth * scale);\n\t\tvar tileHeightScaled = Math.floor(tileHeight * scale);\n\t\t\n\t\tvar scaleX = flipX ? -1 : 1;\n\t\tvar scaleY = flipY ? -1 : 1;\n\t\t\n\t\tif( flipX || flipY ) {\n\t\t\tig.system.context.save();\n\t\t\tig.system.context.scale( scaleX, scaleY );\n\t\t}\n\t\tig.system.context.drawImage( \n\t\t\tthis.data, \n\t\t\t( Math.floor(tile * tileWidth) % this.width ) * scale,\n\t\t\t( Math.floor(tile * tileWidth / this.width) * tileHeight ) * scale,\n\t\t\ttileWidthScaled,\n\t\t\ttileHeightScaled,\n\t\t\tig.system.getDrawPos(targetX) * scaleX - (flipX ? tileWidthScaled : 0), \n\t\t\tig.system.getDrawPos(targetY) * scaleY - (flipY ? tileHeightScaled : 0),\n\t\t\ttileWidthScaled,\n\t\t\ttileHeightScaled\n\t\t);\n\t\tif( flipX || flipY ) {\n\t\t\tig.system.context.restore();\n\t\t}\n\t\t\n\t\tig.Image.drawCount++;\n\t}\n});\n\nig.Image.drawCount = 0;\nig.Image.cache = {};\nig.Image.reloadCache = function() {\n\tfor( var path in ig.Image.cache ) {\n\t\tig.Image.cache[path].reload();\n\t}\n};\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./lib/impact/image.js\n **/","\r\n// -----------------------------------------------------------------------------\r\n// Impact Game Engine 1.24\r\n// http://impactjs.com/\r\n// -----------------------------------------------------------------------------\r\n\r\n\r\n(function(window){ \"use strict\";\r\n\r\n// -----------------------------------------------------------------------------\r\n// Native Object extensions\r\n\r\nNumber.prototype.map = function(istart, istop, ostart, ostop) {\r\n\treturn ostart + (ostop - ostart) * ((this - istart) / (istop - istart));\r\n};\r\n\r\nNumber.prototype.limit = function(min, max) {\r\n\treturn Math.min(max, Math.max(min, this));\r\n};\r\n\r\nNumber.prototype.round = function(precision) {\r\n\tprecision = Math.pow(10, precision || 0);\r\n\treturn Math.round(this * precision) / precision;\r\n};\r\n\r\nNumber.prototype.floor = function() {\r\n\treturn Math.floor(this);\r\n};\r\n\r\nNumber.prototype.ceil = function() {\r\n\treturn Math.ceil(this);\r\n};\r\n\r\nNumber.prototype.toInt = function() {\r\n\treturn (this | 0);\r\n};\r\n\r\nNumber.prototype.toRad = function() {\r\n\treturn (this / 180) * Math.PI;\r\n};\r\n\r\nNumber.prototype.toDeg = function() {\r\n\treturn (this * 180) / Math.PI;\r\n};\r\n\r\nObject.defineProperty(Array.prototype, 'erase', {value: function(item) {\r\n\tfor( var i = this.length; i--; ) {\r\n\t\tif( this[i] === item ) {\r\n\t\t\tthis.splice(i, 1);\r\n\t\t}\r\n\t}\r\n\treturn this;\r\n}});\r\n\r\nObject.defineProperty(Array.prototype, 'random', {value: function(item) {\r\n\treturn this[ Math.floor(Math.random() * this.length) ];\r\n}});\r\n\r\nFunction.prototype.bind = Function.prototype.bind || function (oThis) {\r\n\tif( typeof this !== \"function\" ) {\r\n\t\tthrow new TypeError(\"Function.prototype.bind - what is trying to be bound is not callable\");\r\n\t}\r\n\r\n\tvar aArgs = Array.prototype.slice.call(arguments, 1),\r\n\t\tfToBind = this,\r\n\t\tfNOP = function () {},\r\n\t\tfBound = function () {\r\n\t\t\treturn fToBind.apply(\r\n\t\t\t\t(this instanceof fNOP && oThis ? this : oThis),\r\n\t\t\t\taArgs.concat(Array.prototype.slice.call(arguments))\r\n\t\t\t);\r\n\t\t};\r\n\r\n\tfNOP.prototype = this.prototype;\r\n\tfBound.prototype = new fNOP();\r\n\r\n\treturn fBound;\r\n};\r\n\r\n\r\n// -----------------------------------------------------------------------------\r\n// ig Namespace\r\n\r\nwindow.ig = {\r\n\tgame: null,\r\n\tdebug: null,\r\n\tversion: '1.24',\r\n\tglobal: window,\r\n\tmodules: {},\r\n\tresources: [],\r\n\tready: false,\r\n\tbaked: false,\r\n\tnocache: '',\r\n\tua: {},\r\n\tprefix: (window.ImpactPrefix || ''),\r\n\tlib: 'lib/',\r\n\t\r\n\t_current: null,\r\n\t_loadQueue: [],\r\n\t_waitForOnload: 0,\r\n\t\r\n\t\r\n\t$: function( selector ) {\r\n\t\treturn selector.charAt(0) == '#'\r\n\t\t\t? document.getElementById( selector.substr(1) )\r\n\t\t\t: document.getElementsByTagName( selector );\r\n\t},\r\n\t\r\n\t\r\n\t$new: function( name ) {\r\n\t\treturn document.createElement( name );\r\n\t},\r\n\t\r\n\t\r\n\tcopy: function( object ) {\r\n\t\tif(\r\n\t\t   !object || typeof(object) != 'object' ||\r\n\t\t   object instanceof HTMLElement ||\r\n\t\t   object instanceof ig.Class\r\n\t\t) {\r\n\t\t\treturn object;\r\n\t\t}\r\n\t\telse if( object instanceof Array ) {\r\n\t\t\tvar c = [];\r\n\t\t\tfor( var i = 0, l = object.length; i < l; i++) {\r\n\t\t\t\tc[i] = ig.copy(object[i]);\r\n\t\t\t}\r\n\t\t\treturn c;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tvar c = {};\r\n\t\t\tfor( var i in object ) {\r\n\t\t\t\tc[i] = ig.copy(object[i]);\r\n\t\t\t}\r\n\t\t\treturn c;\r\n\t\t}\r\n\t},\r\n\t\r\n\t\r\n\tmerge: function( original, extended ) {\r\n\t\tfor( var key in extended ) {\r\n\t\t\tvar ext = extended[key];\r\n\t\t\tif(\r\n\t\t\t\ttypeof(ext) != 'object' ||\r\n\t\t\t\text instanceof HTMLElement ||\r\n\t\t\t\text instanceof ig.Class ||\r\n\t\t\t\text === null\r\n\t\t\t) {\r\n\t\t\t\toriginal[key] = ext;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif( !original[key] || typeof(original[key]) != 'object' ) {\r\n\t\t\t\t\toriginal[key] = (ext instanceof Array) ? [] : {};\r\n\t\t\t\t}\r\n\t\t\t\tig.merge( original[key], ext );\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn original;\r\n\t},\r\n\t\r\n\t\r\n\tksort: function( obj ) {\r\n\t\tif( !obj || typeof(obj) != 'object' ) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t\t\r\n\t\tvar keys = [], values = [];\r\n\t\tfor( var i in obj ) {\r\n\t\t\tkeys.push(i);\r\n\t\t}\r\n\t\t\r\n\t\tkeys.sort();\r\n\t\tfor( var i = 0; i < keys.length; i++ ) {\r\n\t\t\tvalues.push( obj[keys[i]] );\r\n\t\t}\r\n\t\t\r\n\t\treturn values;\r\n\t},\r\n\r\n\t// Ah, yes. I love vendor prefixes. So much fun!\r\n\tsetVendorAttribute: function( el, attr, val ) {\r\n\t\tvar uc = attr.charAt(0).toUpperCase() + attr.substr(1);\r\n\t\tel[attr] = el['ms'+uc] = el['moz'+uc] = el['webkit'+uc] = el['o'+uc] = val;\r\n\t},\r\n\r\n\r\n\tgetVendorAttribute: function( el, attr ) {\r\n\t\tvar uc = attr.charAt(0).toUpperCase() + attr.substr(1);\r\n\t\treturn el[attr] || el['ms'+uc] || el['moz'+uc] || el['webkit'+uc] || el['o'+uc];\r\n\t},\r\n\r\n\r\n\tnormalizeVendorAttribute: function( el, attr ) {\r\n\t\tvar prefixedVal = ig.getVendorAttribute( el, attr );\r\n\t\tif( !el[attr] && prefixedVal ) {\r\n\t\t\tel[attr] = prefixedVal;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// This function normalizes getImageData to extract the real, actual\r\n\t// pixels from an image. The naive method recently failed on retina\r\n\t// devices with a backgingStoreRatio != 1\r\n\tgetImagePixels: function( image, x, y, width, height ) {\r\n\t\tvar canvas = ig.$new('canvas');\r\n\t\tcanvas.width = image.width;\r\n\t\tcanvas.height = image.height;\r\n\t\tvar ctx = canvas.getContext('2d');\r\n\t\t\r\n\t\t// Try to draw pixels as accurately as possible\r\n\t\tig.System.SCALE.CRISP(canvas, ctx);\r\n\r\n\t\tvar ratio = ig.getVendorAttribute( ctx, 'backingStorePixelRatio' ) || 1;\r\n\t\tig.normalizeVendorAttribute( ctx, 'getImageDataHD' );\r\n\r\n\t\tvar realWidth = image.width / ratio,\r\n\t\t\trealHeight = image.height / ratio;\r\n\r\n\t\tcanvas.width = Math.ceil( realWidth );\r\n\t\tcanvas.height = Math.ceil( realHeight );\r\n\r\n\t\tctx.drawImage( image, 0, 0, realWidth, realHeight );\r\n\t\t\r\n\t\treturn (ratio === 1)\r\n\t\t\t? ctx.getImageData( x, y, width, height )\r\n\t\t\t: ctx.getImageDataHD( x, y, width, height );\r\n\t},\r\n\r\n\t\r\n\tmodule: function( name ) {\r\n\t\tif( ig._current ) {\r\n\t\t\tthrow( \"Module '\"+ig._current.name+\"' defines nothing\" );\r\n\t\t}\r\n\t\tif( ig.modules[name] && ig.modules[name].body ) {\r\n\t\t\tthrow( \"Module '\"+name+\"' is already defined\" );\r\n\t\t}\r\n\t\t\r\n\t\tig._current = {name: name, requires: [], loaded: false, body: null};\r\n\t\tig.modules[name] = ig._current;\r\n\t\tig._loadQueue.push(ig._current);\r\n\t\treturn ig;\r\n\t},\r\n\t\r\n\t\r\n\trequires: function() {\r\n\t\tig._current.requires = Array.prototype.slice.call(arguments);\r\n\t\treturn ig;\r\n\t},\r\n\t\r\n\t\r\n\tdefines: function( body ) {\r\n\t\tig._current.body = body;\r\n\t\tig._current = null;\r\n\t\tig._initDOMReady();\r\n\t},\r\n\t\r\n\t\r\n\taddResource: function( resource ) {\r\n\t\tig.resources.push( resource );\r\n\t},\r\n\t\r\n\t\r\n\tsetNocache: function( set ) {\r\n\t\tig.nocache = set\r\n\t\t\t? '?' + Date.now()\r\n\t\t\t: '';\r\n\t},\r\n\t\r\n\t\r\n\t// Stubs for ig.Debug\r\n\tlog: function() {},\r\n\tassert: function( condition, msg ) {},\r\n\tshow: function( name, number ) {},\r\n\tmark: function( msg, color ) {},\r\n\t\r\n\t\r\n\t_loadScript: function( name, requiredFrom ) {\r\n\t\tig.modules[name] = {name: name, requires:[], loaded: false, body: null};\r\n\t\tig._waitForOnload++;\r\n\t\t\r\n\t\tvar path = ig.prefix + ig.lib + name.replace(/\\./g, '/') + '.js' + ig.nocache;\r\n\t\tvar script = ig.$new('script');\r\n\t\tscript.type = 'text/javascript';\r\n\t\tscript.src = path;\r\n\t\tscript.onload = function() {\r\n\t\t\tig._waitForOnload--;\r\n\t\t\tig._execModules();\r\n\t\t};\r\n\t\tscript.onerror = function() {\r\n\t\t\tthrow(\r\n\t\t\t\t'Failed to load module '+name+' at ' + path + ' ' +\r\n\t\t\t\t'required from ' + requiredFrom\r\n\t\t\t);\r\n\t\t};\r\n\t\tig.$('head')[0].appendChild(script);\r\n\t},\r\n\r\n\t\r\n\t_execModules: function() {\r\n\t\tvar modulesLoaded = false;\r\n\t\tfor( var i = 0; i < ig._loadQueue.length; i++ ) {\r\n\t\t\tvar m = ig._loadQueue[i];\r\n\t\t\tvar dependenciesLoaded = true;\r\n\t\t\t\r\n\t\t\tfor( var j = 0; j < m.requires.length; j++ ) {\r\n\t\t\t\tvar name = m.requires[j];\r\n\t\t\t\tif( !ig.modules[name] ) {\r\n\t\t\t\t\tdependenciesLoaded = false;\r\n\t\t\t\t\tig._loadScript( name, m.name );\r\n\t\t\t\t}\r\n\t\t\t\telse if( !ig.modules[name].loaded ) {\r\n\t\t\t\t\tdependenciesLoaded = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif( dependenciesLoaded && m.body ) {\r\n\t\t\t\tig._loadQueue.splice(i, 1);\r\n\t\t\t\tm.loaded = true;\r\n\t\t\t\tm.body();\r\n\t\t\t\tmodulesLoaded = true;\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif( modulesLoaded ) {\r\n\t\t\tig._execModules();\r\n\t\t}\r\n\t\t\r\n\t\t// No modules executed, no more files to load but loadQueue not empty?\r\n\t\t// Must be some unresolved dependencies!\r\n\t\telse if( !ig.baked && ig._waitForOnload == 0 && ig._loadQueue.length != 0 ) {\r\n\t\t\tvar unresolved = [];\r\n\t\t\tfor( var i = 0; i < ig._loadQueue.length; i++ ) {\r\n\t\t\t\t\r\n\t\t\t\t// Which dependencies aren't loaded?\r\n\t\t\t\tvar unloaded = [];\r\n\t\t\t\tvar requires = ig._loadQueue[i].requires;\r\n\t\t\t\tfor( var j = 0; j < requires.length; j++ ) {\r\n\t\t\t\t\tvar m = ig.modules[ requires[j] ];\r\n\t\t\t\t\tif( !m || !m.loaded ) {\r\n\t\t\t\t\t\tunloaded.push( requires[j] );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tunresolved.push( ig._loadQueue[i].name + ' (requires: ' + unloaded.join(', ') + ')');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthrow( \r\n\t\t\t\t\"Unresolved (or circular?) dependencies. \" +\r\n\t\t\t\t\"Most likely there's a name/path mismatch for one of the listed modules \" +\r\n\t\t\t\t\"or a previous syntax error prevents a module from loading:\\n\" +\r\n\t\t\t\tunresolved.join('\\n')\t\t\t\t\r\n\t\t\t);\r\n\t\t}\r\n\t},\r\n\t\r\n\t\r\n\t_DOMReady: function() {\r\n\t\tif( !ig.modules['dom.ready'].loaded ) {\r\n\t\t\tif ( !document.body ) {\r\n\t\t\t\treturn setTimeout( ig._DOMReady, 13 );\r\n\t\t\t}\r\n\t\t\tig.modules['dom.ready'].loaded = true;\r\n\t\t\tig._waitForOnload--;\r\n\t\t\tig._execModules();\r\n\t\t}\r\n\t\treturn 0;\r\n\t},\r\n\t\r\n\t\r\n\t_boot: function() {\r\n\t\tif( document.location.href.match(/\\?nocache/) ) {\r\n\t\t\tig.setNocache( true );\r\n\t\t}\r\n\t\t\r\n\t\t// Probe user agent string\r\n\t\tig.ua.pixelRatio = window.devicePixelRatio || 1;\r\n\t\tig.ua.viewport = {\r\n\t\t\twidth: window.innerWidth,\r\n\t\t\theight: window.innerHeight\r\n\t\t};\r\n\t\tig.ua.screen = {\r\n\t\t\twidth: window.screen.availWidth * ig.ua.pixelRatio,\r\n\t\t\theight: window.screen.availHeight * ig.ua.pixelRatio\r\n\t\t};\r\n\t\t\r\n\t\tig.ua.iPhone = /iPhone/i.test(navigator.userAgent);\r\n\t\tig.ua.iPhone4 = (ig.ua.iPhone && ig.ua.pixelRatio == 2);\r\n\t\tig.ua.iPad = /iPad/i.test(navigator.userAgent);\r\n\t\tig.ua.android = /android/i.test(navigator.userAgent);\r\n\t\tig.ua.winPhone = /Windows Phone/i.test(navigator.userAgent);\r\n\t\tig.ua.iOS = ig.ua.iPhone || ig.ua.iPad;\r\n\t\tig.ua.mobile = ig.ua.iOS || ig.ua.android || ig.ua.winPhone || /mobile/i.test(navigator.userAgent);\r\n\t\tig.ua.touchDevice = (('ontouchstart' in window) || (window.navigator.msMaxTouchPoints));\r\n\t},\r\n\t\r\n\t\r\n\t_initDOMReady: function() {\r\n\t\tif( ig.modules['dom.ready'] ) {\r\n\t\t\tig._execModules();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tig._boot();\r\n\t\t\r\n\t\t\r\n\t\tig.modules['dom.ready'] = { requires: [], loaded: false, body: null };\r\n\t\tig._waitForOnload++;\r\n\t\tif ( document.readyState === 'complete' ) {\r\n\t\t\tig._DOMReady();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdocument.addEventListener( 'DOMContentLoaded', ig._DOMReady, false );\r\n\t\t\twindow.addEventListener( 'load', ig._DOMReady, false );\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\n// -----------------------------------------------------------------------------\r\n// Provide ig.setAnimation and ig.clearAnimation as a compatible way to use\r\n// requestAnimationFrame if available or setInterval otherwise\r\n\r\n// Use requestAnimationFrame if available\r\nig.normalizeVendorAttribute( window, 'requestAnimationFrame' );\r\nif( window.requestAnimationFrame ) {\r\n\tvar next = 1,\r\n\t\tanims = {};\r\n\r\n\twindow.ig.setAnimation = function( callback, element ) {\r\n\t\tvar current = next++;\r\n\t\tanims[current] = true;\r\n\r\n\t\tvar animate = function() {\r\n\t\t\tif( !anims[current] ) { return; } // deleted?\r\n\t\t\twindow.requestAnimationFrame( animate, element );\r\n\t\t\tcallback();\r\n\t\t};\r\n\t\twindow.requestAnimationFrame( animate, element );\r\n\t\treturn current;\r\n\t};\r\n\r\n\twindow.ig.clearAnimation = function( id ) {\r\n\t\tdelete anims[id];\r\n\t};\r\n}\r\n\r\n// [set/clear]Interval fallback\r\nelse {\r\n\twindow.ig.setAnimation = function( callback, element ) {\r\n\t\treturn window.setInterval( callback, 1000/60 );\r\n\t};\r\n\twindow.ig.clearAnimation = function( id ) {\r\n\t\twindow.clearInterval( id );\r\n\t};\r\n}\r\n\r\n\r\n// -----------------------------------------------------------------------------\r\n// Class object based on John Resigs code; inspired by base2 and Prototype\r\n// http://ejohn.org/blog/simple-javascript-inheritance/\r\n\r\nvar initializing = false, fnTest = /xyz/.test(function(){xyz;}) ? /\\bparent\\b/ : /.*/;\r\nvar lastClassId = 0;\r\n\r\nwindow.ig.Class = function(){};\r\nvar inject = function(prop) {\t\r\n\tvar proto = this.prototype;\r\n\tvar parent = {};\r\n\tfor( var name in prop ) {\t\t\r\n\t\tif( \r\n\t\t\ttypeof(prop[name]) == \"function\" &&\r\n\t\t\ttypeof(proto[name]) == \"function\" && \r\n\t\t\tfnTest.test(prop[name])\r\n\t\t) {\r\n\t\t\tparent[name] = proto[name]; // save original function\r\n\t\t\tproto[name] = (function(name, fn){\r\n\t\t\t\treturn function() {\r\n\t\t\t\t\tvar tmp = this.parent;\r\n\t\t\t\t\tthis.parent = parent[name];\r\n\t\t\t\t\tvar ret = fn.apply(this, arguments);\t\t\t \r\n\t\t\t\t\tthis.parent = tmp;\r\n\t\t\t\t\treturn ret;\r\n\t\t\t\t};\r\n\t\t\t})( name, prop[name] );\r\n\t\t}\r\n\t\telse {\r\n\t\t\tproto[name] = prop[name];\r\n\t\t}\r\n\t}\r\n};\r\n\r\nwindow.ig.Class.extend = function(prop) {\r\n\tvar parent = this.prototype;\r\n \r\n\tinitializing = true;\r\n\tvar prototype = new this();\r\n\tinitializing = false;\r\n \r\n\tfor( var name in prop ) {\r\n\t\tif( \r\n\t\t\ttypeof(prop[name]) == \"function\" &&\r\n\t\t\ttypeof(parent[name]) == \"function\" && \r\n\t\t\tfnTest.test(prop[name])\r\n\t\t) {\r\n\t\t\tprototype[name] = (function(name, fn){\r\n\t\t\t\treturn function() {\r\n\t\t\t\t\tvar tmp = this.parent;\r\n\t\t\t\t\tthis.parent = parent[name];\r\n\t\t\t\t\tvar ret = fn.apply(this, arguments);\t\t\t \r\n\t\t\t\t\tthis.parent = tmp;\r\n\t\t\t\t\treturn ret;\r\n\t\t\t\t};\r\n\t\t\t})( name, prop[name] );\r\n\t\t}\r\n\t\telse {\r\n\t\t\tprototype[name] = prop[name];\r\n\t\t}\r\n\t}\r\n \r\n\tfunction Class() {\r\n\t\tif( !initializing ) {\r\n\r\n\t\t\t// If this class has a staticInstantiate method, invoke it\r\n\t\t\t// and check if we got something back. If not, the normal\r\n\t\t\t// constructor (init) is called.\r\n\t\t\tif( this.staticInstantiate ) {\r\n\t\t\t\tvar obj = this.staticInstantiate.apply(this, arguments);\r\n\t\t\t\tif( obj ) {\r\n\t\t\t\t\treturn obj;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor( var p in this ) {\r\n\t\t\t\tif( typeof(this[p]) == 'object' ) {\r\n\t\t\t\t\tthis[p] = ig.copy(this[p]); // deep copy!\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif( this.init ) {\r\n\t\t\t\tthis.init.apply(this, arguments);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\tClass.prototype = prototype;\r\n\tClass.prototype.constructor = Class;\r\n\tClass.extend = window.ig.Class.extend;\r\n\tClass.inject = inject;\r\n\tClass.classId = prototype.classId = ++lastClassId;\r\n\t\r\n\treturn Class;\r\n};\r\n\r\n// Merge the ImpactMixin - if present - into the 'ig' namespace. This gives other\r\n// code the chance to modify 'ig' before it's doing any work.\r\nif( window.ImpactMixin ) {\r\n\tig.merge(ig, window.ImpactMixin);\r\n}\r\n\r\n})(window);\r\n\r\n\r\n\r\n// -----------------------------------------------------------------------------\r\n// The main() function creates the system, input, sound and game objects,\r\n// creates a preloader and starts the run loop\r\n\r\nig.module(\r\n\t'impact.impact'\r\n)\r\n.requires(\r\n\t'dom.ready',\r\n\t'impact.loader',\r\n\t'impact.system',\r\n\t'impact.input',\r\n\t'impact.sound'\r\n)\r\n.defines(function(){ \"use strict\";\r\n\r\nig.main = function( canvasId, gameClass, fps, width, height, scale, loaderClass ) {\r\n\tig.system = new ig.System( canvasId, fps, width, height, scale || 1 );\r\n\tig.input = new ig.Input();\r\n\tig.soundManager = new ig.SoundManager();\r\n\tig.music = new ig.Music();\r\n\tig.ready = true;\r\n\t\r\n\tvar loader = new (loaderClass || ig.Loader)( gameClass, ig.resources );\r\n\tloader.load();\r\n};\r\n\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/impact/impact.js\n **/","ig.module(\n\t'impact.input'\n)\n.defines(function(){ \"use strict\";\n\t\nig.KEY = {\n\t'MOUSE1': -1,\n\t'MOUSE2': -3,\n\t'MWHEEL_UP': -4,\n\t'MWHEEL_DOWN': -5,\n\t\n\t'BACKSPACE': 8,\n\t'TAB': 9,\n\t'ENTER': 13,\n\t'PAUSE': 19,\n\t'CAPS': 20,\n\t'ESC': 27,\n\t'SPACE': 32,\n\t'PAGE_UP': 33,\n\t'PAGE_DOWN': 34,\n\t'END': 35,\n\t'HOME': 36,\n\t'LEFT_ARROW': 37,\n\t'UP_ARROW': 38,\n\t'RIGHT_ARROW': 39,\n\t'DOWN_ARROW': 40,\n\t'INSERT': 45,\n\t'DELETE': 46,\n\t'_0': 48,\n\t'_1': 49,\n\t'_2': 50,\n\t'_3': 51,\n\t'_4': 52,\n\t'_5': 53,\n\t'_6': 54,\n\t'_7': 55,\n\t'_8': 56,\n\t'_9': 57,\n\t'A': 65,\n\t'B': 66,\n\t'C': 67,\n\t'D': 68,\n\t'E': 69,\n\t'F': 70,\n\t'G': 71,\n\t'H': 72,\n\t'I': 73,\n\t'J': 74,\n\t'K': 75,\n\t'L': 76,\n\t'M': 77,\n\t'N': 78,\n\t'O': 79,\n\t'P': 80,\n\t'Q': 81,\n\t'R': 82,\n\t'S': 83,\n\t'T': 84,\n\t'U': 85,\n\t'V': 86,\n\t'W': 87,\n\t'X': 88,\n\t'Y': 89,\n\t'Z': 90,\n\t'NUMPAD_0': 96,\n\t'NUMPAD_1': 97,\n\t'NUMPAD_2': 98,\n\t'NUMPAD_3': 99,\n\t'NUMPAD_4': 100,\n\t'NUMPAD_5': 101,\n\t'NUMPAD_6': 102,\n\t'NUMPAD_7': 103,\n\t'NUMPAD_8': 104,\n\t'NUMPAD_9': 105,\n\t'MULTIPLY': 106,\n\t'ADD': 107,\n\t'SUBSTRACT': 109,\n\t'DECIMAL': 110,\n\t'DIVIDE': 111,\n\t'F1': 112,\n\t'F2': 113,\n\t'F3': 114,\n\t'F4': 115,\n\t'F5': 116,\n\t'F6': 117,\n\t'F7': 118,\n\t'F8': 119,\n\t'F9': 120,\n\t'F10': 121,\n\t'F11': 122,\n\t'F12': 123,\n\t'SHIFT': 16,\n\t'CTRL': 17,\n\t'ALT': 18,\n\t'PLUS': 187,\n\t'COMMA': 188,\n\t'MINUS': 189,\n\t'PERIOD': 190\n};\n\n\nig.Input = ig.Class.extend({\n\tbindings: {},\n\tactions: {},\n\tpresses: {},\n\tlocks: {},\n\tdelayedKeyup: {},\n\t\n\tisUsingMouse: false,\n\tisUsingKeyboard: false,\n\tisUsingAccelerometer: false,\n\tmouse: {x: 0, y: 0},\n\taccel: {x: 0, y: 0, z: 0},\n\t\n\t\n\tinitMouse: function() {\n\t\tif( this.isUsingMouse ) { return; }\n\t\tthis.isUsingMouse = true;\n\t\tvar mouseWheelBound = this.mousewheel.bind(this);\n\t\tig.system.canvas.addEventListener('mousewheel', mouseWheelBound, false );\n\t\tig.system.canvas.addEventListener('DOMMouseScroll', mouseWheelBound, false );\n\t\t\n\t\tig.system.canvas.addEventListener('contextmenu', this.contextmenu.bind(this), false );\n\t\tig.system.canvas.addEventListener('mousedown', this.keydown.bind(this), false );\n\t\tig.system.canvas.addEventListener('mouseup', this.keyup.bind(this), false );\n\t\tig.system.canvas.addEventListener('mousemove', this.mousemove.bind(this), false );\n\t\t\n\t\tif( ig.ua.touchDevice ) {\n\t\t\t// Standard\n\t\t\tig.system.canvas.addEventListener('touchstart', this.keydown.bind(this), false );\n\t\t\tig.system.canvas.addEventListener('touchend', this.keyup.bind(this), false );\n\t\t\tig.system.canvas.addEventListener('touchmove', this.mousemove.bind(this), false );\n\t\t\t\n\t\t\t// MS\n\t\t\tig.system.canvas.addEventListener('MSPointerDown', this.keydown.bind(this), false );\n\t\t\tig.system.canvas.addEventListener('MSPointerUp', this.keyup.bind(this), false );\n\t\t\tig.system.canvas.addEventListener('MSPointerMove', this.mousemove.bind(this), false );\n\t\t\tig.system.canvas.style.msTouchAction = 'none';\n\t\t}\n\t},\n\n\t\n\tinitKeyboard: function() {\n\t\tif( this.isUsingKeyboard ) { return; }\n\t\tthis.isUsingKeyboard = true;\n\t\twindow.addEventListener('keydown', this.keydown.bind(this), false );\n\t\twindow.addEventListener('keyup', this.keyup.bind(this), false );\n\t},\n\t\n\t\n\tinitAccelerometer: function() {\n\t\tif( this.isUsingAccelerometer ) { return; }\n\t\tthis.isUsingAccelerometer = true;\n\t\twindow.addEventListener('devicemotion', this.devicemotion.bind(this), false );\n\t},\n\n\t\n\tmousewheel: function( event ) {\n\t\tvar delta = event.wheelDelta ? event.wheelDelta : (event.detail * -1);\n\t\tvar code = delta > 0 ? ig.KEY.MWHEEL_UP : ig.KEY.MWHEEL_DOWN;\n\t\tvar action = this.bindings[code];\n\t\tif( action ) {\n\t\t\tthis.actions[action] = true;\n\t\t\tthis.presses[action] = true;\n\t\t\tthis.delayedKeyup[action] = true;\n\t\t\tevent.stopPropagation();\n\t\t\tevent.preventDefault();\n\t\t}\n\t},\n\t\n\t\n\tmousemove: function( event ) {\t\t\n\t\tvar internalWidth = parseInt(ig.system.canvas.offsetWidth) || ig.system.realWidth;\n\t\tvar scale = ig.system.scale * (internalWidth / ig.system.realWidth);\n\t\t\n\t\tvar pos = {left: 0, top: 0};\n\t\tif( ig.system.canvas.getBoundingClientRect ) {\n\t\t\tpos = ig.system.canvas.getBoundingClientRect();\n\t\t}\n\t\t\n\t\tvar ev = event.touches ? event.touches[0] : event;\n\t\tthis.mouse.x = (ev.clientX - pos.left) / scale;\n\t\tthis.mouse.y = (ev.clientY - pos.top) / scale;\n\t},\n\t\n\t\n\tcontextmenu: function( event ) {\n\t\tif( this.bindings[ig.KEY.MOUSE2] ) {\n\t\t\tevent.stopPropagation();\n\t\t\tevent.preventDefault();\n\t\t}\n\t},\n\t\n\t\n\tkeydown: function( event ) {\n\t\tvar tag = event.target.tagName;\n\t\tif( tag == 'INPUT' || tag == 'TEXTAREA' ) { return; }\n\t\t\n\t\tvar code = event.type == 'keydown' \n\t\t\t? event.keyCode \n\t\t\t: (event.button == 2 ? ig.KEY.MOUSE2 : ig.KEY.MOUSE1);\n\t\t\n\t\t// Focus window element for mouse clicks. Prevents issues when\n\t\t// running the game in an iframe.\n\t\tif( code < 0 && !ig.ua.mobile ) {\n\t\t\twindow.focus();\n\t\t}\n\t\t\n\t\tif( event.type == 'touchstart' || event.type == 'mousedown' ) {\n\t\t\tthis.mousemove( event );\n\t\t}\n\t\t\t\n\t\tvar action = this.bindings[code];\n\t\tif( action ) {\n\t\t\tthis.actions[action] = true;\n\t\t\tif( !this.locks[action] ) {\n\t\t\t\tthis.presses[action] = true;\n\t\t\t\tthis.locks[action] = true;\n\t\t\t}\n\t\t\tevent.preventDefault();\n\t\t}\n\t},\n\t\n\t\n\tkeyup: function( event ) {\n\t\tvar tag = event.target.tagName;\n\t\tif( tag == 'INPUT' || tag == 'TEXTAREA' ) { return; }\n\t\t\n\t\tvar code = event.type == 'keyup' \n\t\t\t? event.keyCode \n\t\t\t: (event.button == 2 ? ig.KEY.MOUSE2 : ig.KEY.MOUSE1);\n\t\t\n\t\tvar action = this.bindings[code];\n\t\tif( action ) {\n\t\t\tthis.delayedKeyup[action] = true;\n\t\t\tevent.preventDefault();\n\t\t}\n\t},\n\t\n\t\n\tdevicemotion: function( event ) {\n\t\tthis.accel = event.accelerationIncludingGravity;\n\t},\n\t\n\t\n\tbind: function( key, action ) {\n\t\tif( key < 0 ) { this.initMouse(); }\n\t\telse if( key > 0 ) { this.initKeyboard(); }\n\t\tthis.bindings[key] = action;\n\t},\n\t\n\t\n\tbindTouch: function( selector, action ) {\n\t\tvar element = ig.$( selector );\n\t\t\n\t\tvar that = this;\n\t\telement.addEventListener('touchstart', function(ev) {that.touchStart( ev, action );}, false);\n\t\telement.addEventListener('touchend', function(ev) {that.touchEnd( ev, action );}, false);\n\t\telement.addEventListener('MSPointerDown', function(ev) {that.touchStart( ev, action );}, false);\n\t\telement.addEventListener('MSPointerUp', function(ev) {that.touchEnd( ev, action );}, false);\n\t},\n\t\n\t\n\tunbind: function( key ) {\n\t\tvar action = this.bindings[key];\n\t\tthis.delayedKeyup[action] = true;\n\t\t\n\t\tthis.bindings[key] = null;\n\t},\n\t\n\t\n\tunbindAll: function() {\n\t\tthis.bindings = {};\n\t\tthis.actions = {};\n\t\tthis.presses = {};\n\t\tthis.locks = {};\n\t\tthis.delayedKeyup = {};\n\t},\n\t\n\t\n\tstate: function( action ) {\n\t\treturn this.actions[action];\n\t},\n\t\n\t\n\tpressed: function( action ) {\n\t\treturn this.presses[action];\n\t},\n\t\n\treleased: function( action ) {\n\t\treturn !!this.delayedKeyup[action];\n\t},\n\t\t\n\tclearPressed: function() {\n\t\tfor( var action in this.delayedKeyup ) {\n\t\t\tthis.actions[action] = false;\n\t\t\tthis.locks[action] = false;\n\t\t}\n\t\tthis.delayedKeyup = {};\n\t\tthis.presses = {};\n\t},\n\t\n\ttouchStart: function( event, action ) {\n\t\tthis.actions[action] = true;\n\t\tthis.presses[action] = true;\n\t\t\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\t\treturn false;\n\t},\n\t\n\t\n\ttouchEnd: function( event, action ) {\n\t\tthis.delayedKeyup[action] = true;\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\t\treturn false;\n\t}\n});\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./lib/impact/input.js\n **/","ig.module(\n\t'impact.loader'\n)\n.requires(\n\t'impact.image',\n\t'impact.font',\n\t'impact.sound'\n)\n.defines(function(){ \"use strict\";\n\nig.Loader = ig.Class.extend({\n\tresources: [],\n\t\n\tgameClass: null,\n\tstatus: 0,\n\tdone: false,\n\t\n\t_unloaded: [],\n\t_drawStatus: 0,\n\t_intervalId: 0,\n\t_loadCallbackBound: null,\n\t\n\t\n\tinit: function( gameClass, resources ) {\n\t\tthis.gameClass = gameClass;\n\t\tthis.resources = resources;\n\t\tthis._loadCallbackBound = this._loadCallback.bind(this);\n\t\t\n\t\tfor( var i = 0; i < this.resources.length; i++ ) {\n\t\t\tthis._unloaded.push( this.resources[i].path );\n\t\t}\n\t},\n\t\n\t\n\tload: function() {\n\t\tig.system.clear( '#000' );\n\t\t\n\t\tif( !this.resources.length ) {\n\t\t\tthis.end();\n\t\t\treturn;\n\t\t}\n\n\t\tfor( var i = 0; i < this.resources.length; i++ ) {\n\t\t\tthis.loadResource( this.resources[i] );\n\t\t}\n\t\tthis._intervalId = setInterval( this.draw.bind(this), 16 );\n\t},\n\t\n\t\n\tloadResource: function( res ) {\n\t\tres.load( this._loadCallbackBound );\n\t},\n\t\n\t\n\tend: function() {\n\t\tif( this.done ) { return; }\n\t\t\n\t\tthis.done = true;\n\t\tclearInterval( this._intervalId );\n\t\tig.system.setGame( this.gameClass );\n\t},\n\t\n\t\n\tdraw: function() {\n\t\tthis._drawStatus += (this.status - this._drawStatus)/5;\n\t\tvar s = ig.system.scale;\n\t\tvar w = ig.system.width * 0.6;\n\t\tvar h = ig.system.height * 0.1;\n\t\tvar x = ig.system.width * 0.5-w/2;\n\t\tvar y = ig.system.height * 0.5-h/2;\n\t\t\n\t\tig.system.context.fillStyle = '#000';\n\t\tig.system.context.fillRect( 0, 0, 480, 320 );\n\t\t\n\t\tig.system.context.fillStyle = '#fff';\n\t\tig.system.context.fillRect( x*s, y*s, w*s, h*s );\n\t\t\n\t\tig.system.context.fillStyle = '#000';\n\t\tig.system.context.fillRect( x*s+s, y*s+s, w*s-s-s, h*s-s-s );\n\t\t\n\t\tig.system.context.fillStyle = '#fff';\n\t\tig.system.context.fillRect( x*s, y*s, w*s*this._drawStatus, h*s );\n\t},\n\t\n\t\n\t_loadCallback: function( path, status ) {\n\t\tif( status ) {\n\t\t\tthis._unloaded.erase( path );\n\t\t}\n\t\telse {\n\t\t\tthrow( 'Failed to load resource: ' + path );\n\t\t}\n\t\t\n\t\tthis.status = 1 - (this._unloaded.length / this.resources.length);\n\t\tif( this._unloaded.length == 0 ) { // all done?\n\t\t\tsetTimeout( this.end.bind(this), 250 );\n\t\t}\n\t}\n});\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./lib/impact/loader.js\n **/","ig.module(\n\t'impact.map'\n)\n.defines(function(){ \"use strict\";\n\nig.Map = ig.Class.extend({\n\ttilesize: 8,\n\twidth: 1,\n\theight: 1,\n\tdata: [[]],\n\tname: null,\n\t\n\t\n\tinit: function( tilesize, data ) {\n\t\tthis.tilesize = tilesize;\n\t\tthis.data = data;\n\t\tthis.height = data.length;\n\t\tthis.width = data[0].length;\n\n\t\tthis.pxWidth = this.width * this.tilesize;\n\t\tthis.pxHeight = this.height * this.tilesize;\n\t},\n\t\n\t\n\tgetTile: function( x, y ) {\n\t\tvar tx = Math.floor( x / this.tilesize );\n\t\tvar ty = Math.floor( y / this.tilesize );\n\t\tif( \n\t\t\t(tx >= 0 && tx <  this.width) &&\n\t\t\t(ty >= 0 && ty < this.height)\n\t\t) {\n\t\t\treturn this.data[ty][tx];\n\t\t} \n\t\telse {\n\t\t\treturn 0;\n\t\t}\n\t},\n\t\n\t\n\tsetTile: function( x, y, tile ) {\n\t\tvar tx = Math.floor( x / this.tilesize );\n\t\tvar ty = Math.floor( y / this.tilesize );\n\t\tif( \n\t\t\t(tx >= 0 && tx < this.width) &&\n\t\t\t(ty >= 0 && ty < this.height)\n\t\t) {\n\t\t\tthis.data[ty][tx] = tile;\n\t\t}\n\t}\n});\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./lib/impact/map.js\n **/","ig.module(\n\t'impact.sound'\n)\n.defines(function(){ \"use strict\";\n\t\nig.SoundManager = ig.Class.extend({\n\tclips: {},\n\tvolume: 1,\n\tformat: null,\n\t\n\tinit: function() {\n\t\t// Quick sanity check if the Browser supports the Audio tag\n\t\tif( !ig.Sound.enabled || !window.Audio ) {\n\t\t\tig.Sound.enabled = false;\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t// Probe sound formats and determine the file extension to load\n\t\tvar probe = new Audio();\n\t\tfor( var i = 0; i < ig.Sound.use.length; i++ ) {\n\t\t\tvar format = ig.Sound.use[i];\n\t\t\tif( probe.canPlayType(format.mime) ) {\n\t\t\t\tthis.format = format;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\t// No compatible format found? -> Disable sound\n\t\tif( !this.format ) {\n\t\t\tig.Sound.enabled = false;\n\t\t}\n\n\t\t// Create WebAudio Context\n\t\tif( ig.Sound.enabled && ig.Sound.useWebAudio ) {\n\t\t\tthis.audioContext = new AudioContext();\n\t\t\tthis.boundWebAudioUnlock = this.unlockWebAudio.bind(this);\n\t\t\tdocument.addEventListener('touchstart', this.boundWebAudioUnlock, false);\n\n\t\t}\n\t},\n\t\n\tunlockWebAudio: function() {\n\t\tdocument.removeEventListener('touchstart', this.boundWebAudioUnlock, false);\n\t\t\n\t\t// create empty buffer\n\t\tvar buffer = this.audioContext.createBuffer(1, 1, 22050);\n\t\tvar source = this.audioContext.createBufferSource();\n\t\tsource.buffer = buffer;\n\n\t\tsource.connect(this.audioContext.destination);\n\t\tsource.start(0);\n\t},\n\n\tload: function( path, multiChannel, loadCallback ) {\n\t\tif( multiChannel && ig.Sound.useWebAudio ) {\n\t\t\t// Requested as Multichannel and we're using WebAudio?\n\t\t\treturn this.loadWebAudio( path, multiChannel, loadCallback );\n\t\t}\n\t\telse {\n\t\t\t// Oldschool HTML5 Audio - always used for Music\n\t\t\treturn this.loadHTML5Audio( path, multiChannel, loadCallback );\n\t\t}\n\t},\n\n\tloadWebAudio: function( path, multiChannel, loadCallback ) {\n\t\t// Path to the soundfile with the right extension (.ogg or .mp3)\n\t\tvar realPath = ig.prefix + path.replace(/[^\\.]+$/, this.format.ext) + ig.nocache;\n\n\t\tif( this.clips[path] ) {\n\t\t\treturn this.clips[path];\n\t\t}\n\n\t\tvar audioSource = new ig.Sound.WebAudioSource()\n\t\tthis.clips[path] = audioSource;\n\n\t\tvar request = new XMLHttpRequest();\n\t\trequest.open('GET', realPath, true);\n\t\trequest.responseType = 'arraybuffer';\n\n\n\t\tvar that = this;\n\t\trequest.onload = function(ev) {\n\t\t\tthat.audioContext.decodeAudioData(request.response, \n\t\t\t\tfunction(buffer) {\n\t\t\t\t\taudioSource.buffer = buffer;\n\t\t\t\t\tloadCallback( path, true, ev );\n\t\t\t\t}, \n\t\t\t\tfunction(ev) {\n\t\t\t\t\tloadCallback( path, false, ev );\n\t\t\t\t}\n\t\t\t);\n\t\t};\n\t\trequest.onerror = function(ev) {\n\t\t\tloadCallback( path, false, ev );\n\t\t};\n\t\trequest.send();\n\n\t\treturn audioSource;\n\t},\n\t\n\tloadHTML5Audio: function( path, multiChannel, loadCallback ) {\n\t\t\n\t\t// Path to the soundfile with the right extension (.ogg or .mp3)\n\t\tvar realPath = ig.prefix + path.replace(/[^\\.]+$/, this.format.ext) + ig.nocache;\n\t\t\n\t\t// Sound file already loaded?\n\t\tif( this.clips[path] ) {\n\t\t\t// Loaded as WebAudio, but now requested as HTML5 Audio? Probably Music?\n\t\t\tif( this.clips[path] instanceof ig.Sound.WebAudioSource ) {\n\t\t\t\treturn this.clips[path];\n\t\t\t}\n\t\t\t\n\t\t\t// Only loaded as single channel and now requested as multichannel?\n\t\t\tif( multiChannel && this.clips[path].length < ig.Sound.channels ) {\n\t\t\t\tfor( var i = this.clips[path].length; i < ig.Sound.channels; i++ ) {\n\t\t\t\t\tvar a = new Audio( realPath );\n\t\t\t\t\ta.load();\n\t\t\t\t\tthis.clips[path].push( a );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this.clips[path][0];\n\t\t}\n\t\t\n\t\tvar clip = new Audio( realPath );\n\t\tif( loadCallback ) {\n\t\t\t\n\t\t\t// The canplaythrough event is dispatched when the browser determines\n\t\t\t// that the sound can be played without interuption, provided the\n\t\t\t// download rate doesn't change.\n\t\t\t// Mobile browsers stubbornly refuse to preload HTML5, so we simply\n\t\t\t// ignore the canplaythrough event and immediately \"fake\" a successful\n\t\t\t// load callback\n\t\t\tif( ig.ua.mobile ) {\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tloadCallback( path, true, null );\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tclip.addEventListener( 'canplaythrough', function cb(ev){\n\t\t\t\t\tclip.removeEventListener('canplaythrough', cb, false);\n\t\t\t\t\tloadCallback( path, true, ev );\n\t\t\t\t}, false );\n\n\t\t\t\tclip.addEventListener( 'error', function(ev){\n\t\t\t\t\tloadCallback( path, false, ev );\n\t\t\t\t}, false);\n\t\t\t}\n\t\t}\n\t\tclip.preload = 'auto';\n\t\tclip.load();\n\t\t\n\t\t\n\t\tthis.clips[path] = [clip];\n\t\tif( multiChannel ) {\n\t\t\tfor( var i = 1; i < ig.Sound.channels; i++ ) {\n\t\t\t\tvar a = new Audio(realPath);\n\t\t\t\ta.load();\n\t\t\t\tthis.clips[path].push( a );\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn clip;\n\t},\n\t\n\t\n\tget: function( path ) {\n\t\t// Find and return a channel that is not currently playing\t\n\t\tvar channels = this.clips[path];\n\n\t\t// Is this a WebAudio source? We only ever have one for each Sound\n\t\tif( channels && channels instanceof ig.Sound.WebAudioSource ) {\n\t\t\treturn channels;\n\t\t}\n\n\t\t// Oldschool HTML5 Audio - find a channel that's not currently \n\t\t// playing or, if all are playing, rewind one\n\t\tfor( var i = 0, clip; clip = channels[i++]; ) {\n\t\t\tif( clip.paused || clip.ended ) {\n\t\t\t\tif( clip.ended ) {\n\t\t\t\t\tclip.currentTime = 0;\n\t\t\t\t}\n\t\t\t\treturn clip;\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Still here? Pause and rewind the first channel\n\t\tchannels[0].pause();\n\t\tchannels[0].currentTime = 0;\n\t\treturn channels[0];\n\t}\n});\n\n\n\nig.Music = ig.Class.extend({\n\ttracks: [],\n\tnamedTracks: {},\n\tcurrentTrack: null,\n\tcurrentIndex: 0,\n\trandom: false,\n\t\n\t_volume: 1,\n\t_loop: false,\n\t_fadeInterval: 0,\n\t_fadeTimer: null,\n\t_endedCallbackBound: null,\n\t\n\t\n\tinit: function() {\n\t\tthis._endedCallbackBound = this._endedCallback.bind(this);\n\t\t\n\t\tObject.defineProperty(this,\"volume\", { \n\t\t\tget: this.getVolume.bind(this),\n\t\t\tset: this.setVolume.bind(this)\n\t\t});\n\t\t\n\t\tObject.defineProperty(this,\"loop\", { \n\t\t\tget: this.getLooping.bind(this),\n\t\t\tset: this.setLooping.bind(this)\n\t\t});\n\t},\n\t\n\t\n\tadd: function( music, name ) {\n\t\tif( !ig.Sound.enabled ) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tvar path = music instanceof ig.Sound ? music.path : music;\n\t\t\n\t\tvar track = ig.soundManager.load(path, false);\n\n\t\t// Did we get a WebAudio Source? This is suboptimal; Music should be loaded\n\t\t// as HTML5 Audio so it can be streamed\n\t\tif( track instanceof ig.Sound.WebAudioSource ) {\n\t\t\t// Since this error will likely occour at game start, we stop the game\n\t\t\t// to not produce any more errors.\n\t\t\tig.system.stopRunLoop();\n\t\t\tthrow(\n\t\t\t\t\"Sound '\"+path+\"' loaded as Multichannel but used for Music. \" +\n\t\t\t\t\"Set the multiChannel param to false when loading, e.g.: new ig.Sound(path, false)\"\n\t\t\t);\n\t\t}\n\n\t\ttrack.loop = this._loop;\n\t\ttrack.volume = this._volume;\n\t\ttrack.addEventListener( 'ended', this._endedCallbackBound, false );\n\t\tthis.tracks.push( track );\n\t\t\n\t\tif( name ) {\n\t\t\tthis.namedTracks[name] = track;\n\t\t}\n\t\t\n\t\tif( !this.currentTrack ) {\n\t\t\tthis.currentTrack = track;\n\t\t}\n\t},\n\t\n\t\n\tnext: function() {\n\t\tif( !this.tracks.length ) { return; }\n\t\t\n\t\tthis.stop();\n\t\tthis.currentIndex = this.random\n\t\t\t? Math.floor(Math.random() * this.tracks.length)\n\t\t\t: (this.currentIndex + 1) % this.tracks.length;\n\t\tthis.currentTrack = this.tracks[this.currentIndex];\n\t\tthis.play();\n\t},\n\t\n\t\n\tpause: function() {\n\t\tif( !this.currentTrack ) { return; }\n\t\tthis.currentTrack.pause();\n\t},\n\t\n\t\n\tstop: function() {\n\t\tif( !this.currentTrack ) { return; }\n\t\tthis.currentTrack.pause();\n\t\tthis.currentTrack.currentTime = 0;\n\t},\n\t\n\t\n\tplay: function( name ) {\n\t\t// If a name was provided, stop playing the current track (if any)\n\t\t// and play the named track\n\t\tif( name && this.namedTracks[name] ) {\n\t\t\tvar newTrack = this.namedTracks[name];\n\t\t\tif( newTrack != this.currentTrack ) {\n\t\t\t\tthis.stop();\n\t\t\t\tthis.currentTrack = newTrack;\n\t\t\t}\n\t\t}\n\t\telse if( !this.currentTrack ) { \n\t\t\treturn; \n\t\t}\n\t\tthis.currentTrack.play();\n\t},\n\t\n\t\t\n\tgetLooping: function() {\n\t\treturn this._loop;\n\t},\n\t\n\t\n\tsetLooping: function( l ) {\n\t\tthis._loop = l;\n\t\tfor( var i in this.tracks ) {\n\t\t\tthis.tracks[i].loop = l;\n\t\t}\n\t},\t\n\t\t\n\t\n\tgetVolume: function() {\n\t\treturn this._volume;\n\t},\n\t\n\t\n\tsetVolume: function( v ) {\n\t\tthis._volume = v.limit(0,1);\n\t\tfor( var i in this.tracks ) {\n\t\t\tthis.tracks[i].volume = this._volume;\n\t\t}\n\t},\n\t\n\t\n\tfadeOut: function( time ) {\n\t\tif( !this.currentTrack ) { return; }\n\t\t\n\t\tclearInterval( this._fadeInterval );\n\t\tthis.fadeTimer = new ig.Timer( time );\n\t\tthis._fadeInterval = setInterval( this._fadeStep.bind(this), 50 );\n\t},\n\t\n\t\n\t_fadeStep: function() {\n\t\tvar v = this.fadeTimer.delta()\n\t\t\t.map(-this.fadeTimer.target, 0, 1, 0)\n\t\t\t.limit( 0, 1 )\n\t\t\t* this._volume;\n\t\t\n\t\tif( v <= 0.01 ) {\n\t\t\tthis.stop();\n\t\t\tthis.currentTrack.volume = this._volume;\n\t\t\tclearInterval( this._fadeInterval );\n\t\t}\n\t\telse {\n\t\t\tthis.currentTrack.volume = v;\n\t\t}\n\t},\n\t\n\t_endedCallback: function() {\n\t\tif( this._loop ) {\n\t\t\tthis.play();\n\t\t}\n\t\telse {\n\t\t\tthis.next();\n\t\t}\n\t}\n});\n\n\n\nig.Sound = ig.Class.extend({\n\tpath: '',\n\tvolume: 1,\n\tcurrentClip: null,\n\tmultiChannel: true,\n\t_loop: false,\n\t\n\t\n\tinit: function( path, multiChannel ) {\n\t\tthis.path = path;\n\t\tthis.multiChannel = (multiChannel !== false);\n\n\t\tObject.defineProperty(this,\"loop\", { \n\t\t\tget: this.getLooping.bind(this),\n\t\t\tset: this.setLooping.bind(this)\n\t\t});\n\t\t\n\t\tthis.load();\n\t},\n\n\tgetLooping: function() {\n\t\treturn this._loop;\n\t},\n\n\tsetLooping: function( loop ) {\n\t\tthis._loop = loop;\n\n\t\tif( this.currentClip ) {\n\t\t\tthis.currentClip.loop = loop;\n\t\t}\n\t},\t\n\t\n\tload: function( loadCallback ) {\n\t\tif( !ig.Sound.enabled ) {\n\t\t\tif( loadCallback ) {\n\t\t\t\tloadCallback( this.path, true );\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif( ig.ready ) {\n\t\t\tig.soundManager.load( this.path, this.multiChannel, loadCallback );\n\t\t}\n\t\telse {\n\t\t\tig.addResource( this );\n\t\t}\n\t},\n\t\n\t\n\tplay: function() {\n\t\tif( !ig.Sound.enabled ) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.currentClip = ig.soundManager.get( this.path );\n\t\tthis.currentClip.loop = this._loop;\n\t\tthis.currentClip.volume = ig.soundManager.volume * this.volume;\n\t\tthis.currentClip.play();\n\t},\n\t\n\t\n\tstop: function() {\n\t\tif( this.currentClip ) {\n\t\t\tthis.currentClip.pause();\n\t\t\tthis.currentClip.currentTime = 0;\n\t\t}\n\t}\n});\n\n\nig.Sound.WebAudioSource = ig.Class.extend({\n\tsources: [],\n\tgain: null,\n\tbuffer: null,\n\t_loop: false,\n\n\tinit: function() {\n\t\tthis.gain = ig.soundManager.audioContext.createGain();\n\t\tthis.gain.connect(ig.soundManager.audioContext.destination);\n\n\t\tObject.defineProperty(this,\"loop\", { \n\t\t\tget: this.getLooping.bind(this),\n\t\t\tset: this.setLooping.bind(this)\n\t\t});\n\n\t\tObject.defineProperty(this,\"volume\", { \n\t\t\tget: this.getVolume.bind(this),\n\t\t\tset: this.setVolume.bind(this)\n\t\t});\n\t},\n\n\tplay: function() {\n\t\tif( !this.buffer ) { return; }\n\t\tvar source = ig.soundManager.audioContext.createBufferSource();\n\t\tsource.buffer = this.buffer;\n\t\tsource.connect(this.gain); \n\t\tsource.loop = this._loop;\n\n\t\t// Add this new source to our sources array and remove it again\n\t\t// later when it has finished playing.\n\t\tvar that = this;\n\t\tthis.sources.push(source);\n\t\tsource.onended = function(){ that.sources.erase(source); }\n\n\t\tsource.start(0);\n\t},\n\n\tpause: function() {\n\t\tfor( var i = 0; i < this.sources.length; i++ ) {\n\t\t\ttry{\n\t\t\t\tthis.sources[i].stop();\n\t\t\t} catch(err){}\n\t\t}\n\t},\n\n\tgetLooping: function() {\n\t\treturn this._loop;\n\t},\n\n\tsetLooping: function( loop ) {\n\t\tthis._loop = loop;\n\n\t\tfor( var i = 0; i < this.sources.length; i++ ) {\n\t\t\tthis.sources[i].loop = loop;\n\t\t}\n\t},\n\n\tgetVolume: function() {\n\t\treturn this.gain.gain.value;\n\t},\n\n\tsetVolume: function( volume ) {\n\t\tthis.gain.gain.value = volume;\n\t}\n});\n\n\nig.Sound.FORMAT = {\n\tMP3: {ext: 'mp3', mime: 'audio/mpeg'},\n\tM4A: {ext: 'm4a', mime: 'audio/mp4; codecs=mp4a'},\n\tOGG: {ext: 'ogg', mime: 'audio/ogg; codecs=vorbis'},\n\tWEBM: {ext: 'webm', mime: 'audio/webm; codecs=vorbis'},\n\tCAF: {ext: 'caf', mime: 'audio/x-caf'}\n};\nig.Sound.use = [ig.Sound.FORMAT.OGG, ig.Sound.FORMAT.MP3];\nig.Sound.channels = 4;\nig.Sound.enabled = true;\n\nig.normalizeVendorAttribute(window, 'AudioContext');\nig.Sound.useWebAudio = !!window.AudioContext && !window.nwf;\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./lib/impact/sound.js\n **/","ig.module(\n\t'impact.system'\n)\n.requires(\n\t'impact.timer',\n\t'impact.image'\n)\n.defines(function(){ \"use strict\";\n\nig.System = ig.Class.extend({\n\tfps: 30,\n\twidth: 320,\n\theight: 240,\n\trealWidth: 320,\n\trealHeight: 240,\n\tscale: 1,\n\t\n\ttick: 0,\n\tanimationId: 0,\n\tnewGameClass: null,\n\trunning: false,\n\t\n\tdelegate: null,\n\tclock: null,\n\tcanvas: null,\n\tcontext: null,\n\t\n\tinit: function( canvasId, fps, width, height, scale ) {\n\t\tthis.fps = fps;\n\t\t\n\t\tthis.clock = new ig.Timer();\n\t\tthis.canvas = ig.$(canvasId);\n\t\tthis.resize( width, height, scale );\n\t\tthis.context = this.canvas.getContext('2d');\n\t\t\n\t\tthis.getDrawPos = ig.System.drawMode;\n\n\t\t// Automatically switch to crisp scaling when using a scale\n\t\t// other than 1\n\t\tif( this.scale != 1 ) {\n\t\t\tig.System.scaleMode = ig.System.SCALE.CRISP;\n\t\t}\n\t\tig.System.scaleMode( this.canvas, this.context );\n\t},\n\t\n\t\n\tresize: function( width, height, scale ) {\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.scale = scale || this.scale;\n\t\t\n\t\tthis.realWidth = this.width * this.scale;\n\t\tthis.realHeight = this.height * this.scale;\n\t\tthis.canvas.width = this.realWidth;\n\t\tthis.canvas.height = this.realHeight;\n\t},\n\t\n\t\n\tsetGame: function( gameClass ) {\n\t\tif( this.running ) {\n\t\t\tthis.newGameClass = gameClass;\n\t\t}\n\t\telse {\n\t\t\tthis.setGameNow( gameClass );\n\t\t}\n\t},\n\t\n\t\n\tsetGameNow: function( gameClass ) {\n\t\tig.game = new (gameClass)();\t\n\t\tig.system.setDelegate( ig.game );\n\t},\n\t\n\t\n\tsetDelegate: function( object ) {\n\t\tif( typeof(object.run) == 'function' ) {\n\t\t\tthis.delegate = object;\n\t\t\tthis.startRunLoop();\n\t\t} else {\n\t\t\tthrow( 'System.setDelegate: No run() function in object' );\n\t\t}\n\t},\n\t\n\t\n\tstopRunLoop: function() {\n\t\tig.clearAnimation( this.animationId );\n\t\tthis.running = false;\n\t},\n\t\n\t\n\tstartRunLoop: function() {\n\t\tthis.stopRunLoop();\n\t\tthis.animationId = ig.setAnimation( this.run.bind(this), this.canvas );\n\t\tthis.running = true;\n\t},\n\t\n\t\n\tclear: function( color ) {\n\t\tthis.context.fillStyle = color;\n\t\tthis.context.fillRect( 0, 0, this.realWidth, this.realHeight );\n\t},\n\t\n\t\n\trun: function() {\n\t\tig.Timer.step();\n\t\tthis.tick = this.clock.tick();\n\t\t\n\t\tthis.delegate.run();\n\t\tig.input.clearPressed();\n\t\t\n\t\tif( this.newGameClass ) {\n\t\t\tthis.setGameNow( this.newGameClass );\n\t\t\tthis.newGameClass = null;\n\t\t}\n\t},\n\t\n\t\n\tgetDrawPos: null // Set through constructor\n});\n\nig.System.DRAW = {\n\tAUTHENTIC: function( p ) { return Math.round(p) * this.scale; },\n\tSMOOTH: function( p ) { return Math.round(p * this.scale); },\n\tSUBPIXEL: function( p ) { return p * this.scale; }\n};\nig.System.drawMode = ig.System.DRAW.SMOOTH;\n\nig.System.SCALE = {\n\tCRISP: function( canvas, context ) {\n\t\tig.setVendorAttribute( context, 'imageSmoothingEnabled', false );\n\t\tcanvas.style.imageRendering = '-moz-crisp-edges';\n\t\tcanvas.style.imageRendering = '-o-crisp-edges';\n\t\tcanvas.style.imageRendering = '-webkit-optimize-contrast';\n\t\tcanvas.style.imageRendering = 'crisp-edges';\n\t\tcanvas.style.msInterpolationMode = 'nearest-neighbor'; // No effect on Canvas :/\n\t},\n\tSMOOTH: function( canvas, context ) {\n\t\tig.setVendorAttribute( context, 'imageSmoothingEnabled', true );\n\t\tcanvas.style.imageRendering = '';\n\t\tcanvas.style.msInterpolationMode = '';\n\t}\n};\nig.System.scaleMode = ig.System.SCALE.SMOOTH;\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/impact/system.js\n **/","ig.module(\n\t'impact.timer'\n)\n.defines(function(){ \"use strict\";\n\nig.Timer = ig.Class.extend({\n\ttarget: 0,\n\tbase: 0,\n\tlast: 0,\n\tpausedAt: 0,\n\t\n\tinit: function( seconds ) {\n\t\tthis.base = ig.Timer.time;\n\t\tthis.last = ig.Timer.time;\n\t\t\n\t\tthis.target = seconds || 0;\n\t},\n\t\n\t\n\tset: function( seconds ) {\n\t\tthis.target = seconds || 0;\n\t\tthis.base = ig.Timer.time;\n\t\tthis.pausedAt = 0;\n\t},\n\t\n\t\n\treset: function() {\n\t\tthis.base = ig.Timer.time;\n\t\tthis.pausedAt = 0;\n\t},\n\t\n\t\n\ttick: function() {\n\t\tvar delta = ig.Timer.time - this.last;\n\t\tthis.last = ig.Timer.time;\n\t\treturn (this.pausedAt ? 0 : delta);\n\t},\n\t\n\t\n\tdelta: function() {\n\t\treturn (this.pausedAt || ig.Timer.time) - this.base - this.target;\n\t},\n\n\n\tpause: function() {\n\t\tif( !this.pausedAt ) {\n\t\t\tthis.pausedAt = ig.Timer.time;\n\t\t}\n\t},\n\n\n\tunpause: function() {\n\t\tif( this.pausedAt ) {\n\t\t\tthis.base += ig.Timer.time - this.pausedAt;\n\t\t\tthis.pausedAt = 0;\n\t\t}\n\t}\n});\n\nig.Timer._last = 0;\nig.Timer.time = Number.MIN_VALUE;\nig.Timer.timeScale = 1;\nig.Timer.maxStep = 0.05;\n\nig.Timer.step = function() {\n\tvar current = Date.now();\n\tvar delta = (current - ig.Timer._last) / 1000;\n\tig.Timer.time += Math.min(delta, ig.Timer.maxStep) * ig.Timer.timeScale;\n\tig.Timer._last = current;\n};\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./lib/impact/timer.js\n **/","var map = {\n\t\"./game/entities/bullets/BulletBombe.js\": 26,\n\t\"./game/entities/bullets/bullet.js\": 27,\n\t\"./game/entities/characters/Character.js\": 28,\n\t\"./game/entities/characters/CharacterFlight.js\": 29,\n\t\"./game/entities/characters/CharacterSpike.js\": 30,\n\t\"./game/levels/level.js\": 31,\n\t\"./game/main.js\": 32,\n\t\"./game/screens/Arena.js\": 33,\n\t\"./impact/animation.js\": 34,\n\t\"./impact/background-map.js\": 35,\n\t\"./impact/collision-map.js\": 36,\n\t\"./impact/debug/debug.js\": 37,\n\t\"./impact/debug/entities-panel.js\": 38,\n\t\"./impact/debug/graph-panel.js\": 39,\n\t\"./impact/debug/maps-panel.js\": 40,\n\t\"./impact/debug/menu.js\": 41,\n\t\"./impact/entity-pool.js\": 42,\n\t\"./impact/entity.js\": 43,\n\t\"./impact/font.js\": 44,\n\t\"./impact/game.js\": 45,\n\t\"./impact/image.js\": 46,\n\t\"./impact/impact.js\": 47,\n\t\"./impact/input.js\": 48,\n\t\"./impact/loader.js\": 49,\n\t\"./impact/map.js\": 50,\n\t\"./impact/sound.js\": 51,\n\t\"./impact/system.js\": 52,\n\t\"./impact/timer.js\": 53\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\treturn map[req] || (function() { throw new Error(\"Cannot find module '\" + req + \"'.\") }());\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 25;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./example/lib ^((?![\\\\/]impactES6|weltmeister[\\\\/]).)*\\.js$\n ** module id = 25\n ** module chunks = 0\n **/","ig.require('game.entities.bullets.bullet');\n\n\nexport default class BulletBombe extends ig.EntityBullet {\n    /* LIFECYCLE */\n}\n\nig.bindProperties(BulletBombe, {\n    animSheet   : new ig.AnimationSheet('example/media/fire01.png', 14, 32),\n    size        : {x: 14, y: 32},\n    vel         : {x: 0, y: 300},\n    amount      : 40\n});\n\n\n/** WEBPACK FOOTER **\n ** ./example/lib/game/entities/bullets/BulletBombe.js\n **/","ig.module(\n    'game.entities.bullets.bullet'\n\n).requires(\n    'impact.entity'\n    \n).defines(function () {\n\n    ig.EntityBullet = ig.Entity.extend({\n        /* ATTRIBUTES */\n        amount: 10,\n        owner : null,\n        \n        \n        /* LIFECYCLE */\n        init: function (x, y, settings) \n        {\n            this.parent(x, y, settings);\n            \n            if (this.owner) {\n                this.type           = this.owner.type;\n                this.checkAgainst   = (this.type === ig.Entity.TYPE.A) ? ig.Entity.TYPE.B : ig.Entity.TYPE.A;\n            }\n\n            if (this.animSheet) {\n                this.addAnim('idle', 1, [0]);\n            }\n        },\n        \n        update: function ()\n        {\n            this.parent();\n\n            if (this.pos.x < 0 || this.pos.y < 0 || this.pos.x > ig.system.width || this.pos.y > ig.system.height) {\n                this.kill();\n            }\n\n            return 4;\n        },\n        \n        check: function (other)\n        {\n            other.receiveDamage(this.amount);\n            this.kill();\n        }\n    });\n    \n});\n\n\n/** WEBPACK FOOTER **\n ** ./example/lib/game/entities/bullets/bullet.js\n **/","ig.require('impact.entity');\n\n\nexport default class Character extends ig.Entity {\n    /* LIFECYCLE */\n    update ()\n    {\n        super.update();\n\n        if (this.currentAnim) {\n            this.updateAnimation();\n        }\n    }\n\n    check ()\n    {\n        this.kill();\n    }\n\n\n    /* METHODS */\n    updateAnimation ()\n    {\n        this.currentAnim.flip.x = this.flip;\n    }\n\n    setDirection (speedType, x, y)\n    {\n        if (speedType !== \"vel\" && speedType !== \"accel\") {\n            return null;\n        }\n\n        this[speedType].y   = (y || 0) * this.speed;\n        this[speedType].x   = (x || 0) * this.speed;\n    }\n\n    setVel (x, y)\n    {\n        this.setDirection('vel', x, y);\n    }\n\n    setAccel (x, y)\n    {\n        if (!x && !y && !this.accel.x && !this.accel.y) {\n            return null;\n        }\n\n        this.setDirection('accel', x, y);\n    }\n\n    fire ()\n    {\n        if (this._killed) {\n            return false;\n        }\n\n        if (!this.timerWeaponWait) {\n            this.timerWeaponWait = new ig.Timer(this.timeWeaponWait / 100);\n            return true;\n\n        } else if (this.timerWeaponWait.delta() > 0) {\n            this.timerWeaponWait = null;\n            return true;\n        }\n\n        return false;\n    }\n}\n\nig.bindProperties(Character, {\n    zIndex          : 0,\n    speed           : 100,\n    health          : 200,\n    timeWeaponWait  : 200,\n    gravityFactor   : 0\n});\n\n\n/** WEBPACK FOOTER **\n ** ./example/lib/game/entities/characters/Character.js\n **/","import Character from \"./Character\";\nimport BulletBombe from \"./../bullets/BulletBombe\";\n\n\nexport default class CharacterFlight extends Character {\n    /* LIFECYCLE */\n    init (x, y, settings)\n    {\n        super.init(x, y, settings);\n\n        this.addAnim('idle', 1, [0]);\n    }\n\n    update ()\n    {\n        super.update();\n    }\n    \n    \n    /* METHOD */\n    fire ()\n    {\n        if (super.fire()) {\n            ig.game.spawnEntity(BulletBombe, this.pos.x + (this.size.x / 2), this.pos.y + this.size.y, { owner: this });\n        }\n    }\n}\n\nig.bindProperties(CharacterFlight, {\n    animSheet       : new ig.AnimationSheet('example/media/helicopter.png', 43, 36),\n    size            : {x: 43, y: 36},\n    type            : ig.Entity.TYPE.A,\n    checkAgainst    : ig.Entity.TYPE.B,\n    gravityFactor   : 0,\n    zIndex          : 1,\n    speed           : 300\n});\n\n\n/** WEBPACK FOOTER **\n ** ./example/lib/game/entities/characters/CharacterFlight.js\n **/","import Character from \"./Character\";\n\n\nexport default class CharacterSpike extends Character {\n    /* LIFECYCLE */\n    init (x, y, settings)\n    {\n        super.init(x, y, settings);\n\n        // Animations\n        this.addAnim('idle', 1, [0]);\n        this.addAnim('walk', 0.2, [1, 2]);\n    }\n}\n\n\nig.bindProperties(CharacterSpike, {\n    animSheet       : new ig.AnimationSheet('example/media/spiker.png', 30, 40),\n    size            : {x: 30, y: 40},\n    type            : ig.Entity.TYPE.B,\n    checkAgainst    : ig.Entity.TYPE.A\n});\n\n\n/** WEBPACK FOOTER **\n ** ./example/lib/game/entities/characters/CharacterSpike.js\n **/","ig.module( 'game.levels.level' )\n    .requires( 'impact.image' )\n    .defines(function(){\n        LevelLevel=/*JSON[*/{\n            \"entities\": [],\n            \"layer\": [\n                {\n                    \"name\": \"tiles\",\n                    \"width\": 16,\n                    \"height\": 10,\n                    \"linkWithCollision\": false,\n                    \"visible\": 1,\n                    \"tilesetName\": \"media/tiles/ground.png\",\n                    \"repeat\": false,\n                    \"preRender\": false,\n                    \"distance\": \"1\",\n                    \"tilesize\": 64,\n                    \"foreground\": false,\n                    \"data\": [\n                        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],\n                        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],\n                        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],\n                        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],\n                        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],\n                        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],\n                        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],\n                        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],\n                        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],\n                        [97,9,9,9,9,9,9,9,9,9,9,9,9,9,9,89]\n                    ]\n                },\n                {\n                    \"name\": \"collision\",\n                    \"width\": 32,\n                    \"height\": 20,\n                    \"linkWithCollision\": false,\n                    \"visible\": 1,\n                    \"tilesetName\": \"\",\n                    \"repeat\": false,\n                    \"preRender\": false,\n                    \"distance\": 1,\n                    \"tilesize\": 32,\n                    \"foreground\": false,\n                    \"data\": [\n                        [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],\n                        [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],\n                        [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],\n                        [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],\n                        [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],\n                        [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],\n                        [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],\n                        [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],\n                        [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],\n                        [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],\n                        [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],\n                        [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],\n                        [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],\n                        [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],\n                        [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],\n                        [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],\n                        [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],\n                        [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],\n                        [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],\n                        [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]\n                    ]\n                }\n            ]\n        }/*]JSON*/;\n        LevelLevelResources=[new ig.Image('media/tiles/ground.png')];\n    });\n\n\n/** WEBPACK FOOTER **\n ** ./example/lib/game/levels/level.js\n **/","import Arena from \"./screens/Arena\";\n\n// Method to require an impact library\n// Once it is loaded, it doesn't need to require it again\nig.require('impact.debug.debug');\n\n// Launch the game\nig.main('#canvas', Arena, 60, 500, 500, 1);\n\n\n/** WEBPACK FOOTER **\n ** ./example/lib/game/main.js\n **/","import CharacterFlight from \"./../entities/characters/CharacterFlight\";\nimport CharacterSpike from \"./../entities/characters/CharacterSpike\";\n\nig.require('impact.game');\n\n\nexport default class Arena extends ig.Game {\n    /* LIFECYCLE */\n    init ()\n    {\n        // Bind inputs for player\n        ig.input.bind(ig.KEY.UP_ARROW, 'up');\n        ig.input.bind(ig.KEY.RIGHT_ARROW, 'right');\n        ig.input.bind(ig.KEY.LEFT_ARROW, 'left');\n        ig.input.bind(ig.KEY.DOWN_ARROW, 'down');\n        ig.input.bind(ig.KEY.SPACE, 'fire');\n\n        this.player = ig.game.spawnEntity(CharacterFlight, 0, 0);\n        this.spike  = ig.game.spawnEntity(CharacterSpike, 50, ig.system.height - 100);\n        ig.game.spawnEntity(CharacterSpike, 200, ig.system.height - 100, { size: {x: 70, y: 70} });\n    }\n\n    update ()\n    {\n        super.update();\n\n        if (this.player) {\n            this.updateInputs();\n        }\n    }\n\n    draw ()\n    {\n        super.draw();\n\n        var x = ig.system.width / 2,\n            y = ig.system.height / 2;\n\n        this.font.draw('It Works!', x, y, ig.Font.ALIGN.CENTER);\n    }\n\n\n    /* METHODS */\n    updateInputs ()\n    {\n        var left    = ig.input.state('left');\n        var right   = ig.input.state('right');\n        var up      = ig.input.state('up');\n        var down    = ig.input.state('down');\n        var x       = 0;\n        var y       = 0;\n\n        if (left) { x--; }\n        if (right) { x++; }\n        if (down) { y++; }\n        if (up) { y--; }\n\n        this.player.setVel(x, y);\n\n        if (ig.input.pressed('fire')) {\n            this.player.fire();\n        }\n    }\n}\n\nig.bindProperties(Arena, {\n    gravity : 300,\n    player  : null,\n    font    : new ig.Font('media/04b03.font.png')\n});\n\n\n/** WEBPACK FOOTER **\n ** ./example/lib/game/screens/Arena.js\n **/","ig.module(\n\t'impact.animation'\n)\n.requires(\n\t'impact.timer',\n\t'impact.image' \n)\n.defines(function(){ \"use strict\";\n\nig.AnimationSheet = ig.Class.extend({\n\twidth: 8,\n\theight: 8,\n\timage: null,\n\t\n\tinit: function( path, width, height ) {\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\t\n\t\tthis.image = new ig.Image( path );\n\t}\n});\n\n\n\nig.Animation = ig.Class.extend({\n\tsheet: null,\n\ttimer: null,\n\t\n\tsequence: [],\t\n\tflip: {x: false, y: false},\n\tpivot: {x: 0, y: 0},\n\t\n\tframe: 0,\n\ttile: 0,\n\tloopCount: 0,\n\talpha: 1,\n\tangle: 0,\n\t\n\t\n\tinit: function( sheet, frameTime, sequence, stop ) {\n\t\tthis.sheet = sheet;\n\t\tthis.pivot = {x: sheet.width/2, y: sheet.height/2 };\n\t\tthis.timer = new ig.Timer();\n\n\t\tthis.frameTime = frameTime;\n\t\tthis.sequence = sequence;\n\t\tthis.stop = !!stop;\n\t\tthis.tile = this.sequence[0];\n\t},\n\t\n\t\n\trewind: function() {\n\t\tthis.timer.set();\n\t\tthis.loopCount = 0;\n\t\tthis.frame = 0;\n\t\tthis.tile = this.sequence[0];\n\t\treturn this;\n\t},\n\t\n\t\n\tgotoFrame: function( f ) {\n\t\t// Offset the timer by one tenth of a millisecond to make sure we\n\t\t// jump to the correct frame and circumvent rounding errors\n\t\tthis.timer.set( this.frameTime * -f - 0.0001 );\n\t\tthis.update();\n\t},\n\t\n\t\n\tgotoRandomFrame: function() {\n\t\tthis.gotoFrame( Math.floor(Math.random() * this.sequence.length) )\n\t},\n\t\n\t\n\tupdate: function() {\n\t\tvar frameTotal = Math.floor(this.timer.delta() / this.frameTime);\n\t\tthis.loopCount = Math.floor(frameTotal / this.sequence.length);\n\t\tif( this.stop && this.loopCount > 0 ) {\n\t\t\tthis.frame = this.sequence.length - 1;\n\t\t}\n\t\telse {\n\t\t\tthis.frame = frameTotal % this.sequence.length;\n\t\t}\n\t\tthis.tile = this.sequence[ this.frame ];\n\t},\n\t\n\t\n\tdraw: function( targetX, targetY ) {\n\t\tvar bbsize = Math.max(this.sheet.width, this.sheet.height);\n\t\t\n\t\t// On screen?\n\t\tif(\n\t\t   targetX > ig.system.width || targetY > ig.system.height ||\n\t\t   targetX + bbsize < 0 || targetY + bbsize < 0\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif( this.alpha != 1) {\n\t\t\tig.system.context.globalAlpha = this.alpha;\n\t\t}\n\t\t\n\t\tif( this.angle == 0 ) {\t\t\n\t\t\tthis.sheet.image.drawTile(\n\t\t\t\ttargetX, targetY,\n\t\t\t\tthis.tile, this.sheet.width, this.sheet.height,\n\t\t\t\tthis.flip.x, this.flip.y\n\t\t\t);\n\t\t}\n\t\telse {\n\t\t\tig.system.context.save();\n\t\t\tig.system.context.translate(\n\t\t\t\tig.system.getDrawPos(targetX + this.pivot.x),\n\t\t\t\tig.system.getDrawPos(targetY + this.pivot.y)\n\t\t\t);\n\t\t\tig.system.context.rotate( this.angle );\n\t\t\tthis.sheet.image.drawTile(\n\t\t\t\t-this.pivot.x, -this.pivot.y,\n\t\t\t\tthis.tile, this.sheet.width, this.sheet.height,\n\t\t\t\tthis.flip.x, this.flip.y\n\t\t\t);\n\t\t\tig.system.context.restore();\n\t\t}\n\t\t\n\t\tif( this.alpha != 1) {\n\t\t\tig.system.context.globalAlpha = 1;\n\t\t}\n\t}\n});\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./example/lib/impact/animation.js\n **/","ig.module(\n\t'impact.background-map'\n)\n.requires(\n\t'impact.map',\n\t'impact.image'\n)\n.defines(function(){ \"use strict\";\n\nig.BackgroundMap = ig.Map.extend({\t\n\ttiles: null,\n\tscroll: {x: 0, y:0},\n\tdistance: 1,\n\trepeat: false,\n\ttilesetName: '',\n\tforeground: false,\n\tenabled: true,\n\t\n\tpreRender: false,\n\tpreRenderedChunks: null,\n\tchunkSize: 512,\n\tdebugChunks: false,\n\t\n\t\n\tanims: {},\n\t\n\t\n\tinit: function( tilesize, data, tileset ) {\n\t\tthis.parent( tilesize, data );\n\t\tthis.setTileset( tileset );\n\t},\n\t\n\t\n\tsetTileset: function( tileset ) {\n\t\tthis.tilesetName  = tileset instanceof ig.Image ? tileset.path : tileset;\n\t\tthis.tiles = new ig.Image( this.tilesetName );\n\t\tthis.preRenderedChunks = null;\n\t},\n\t\n\t\n\tsetScreenPos: function( x, y ) {\n\t\tthis.scroll.x = x / this.distance;\n\t\tthis.scroll.y = y / this.distance;\n\t},\n\t\n\t\n\tpreRenderMapToChunks: function() {\n\t\tvar totalWidth = this.width * this.tilesize * ig.system.scale,\n\t\t\ttotalHeight = this.height * this.tilesize * ig.system.scale;\n\t\t\n\t\t// If this layer is smaller than the chunkSize, adjust the chunkSize\n\t\t// accordingly, so we don't have as much overdraw\n\t\tthis.chunkSize = Math.min( Math.max(totalWidth, totalHeight), this.chunkSize );\n\t\t\t\n\t\tvar chunkCols = Math.ceil(totalWidth / this.chunkSize),\n\t\t\tchunkRows = Math.ceil(totalHeight / this.chunkSize);\n\t\t\n\t\tthis.preRenderedChunks = [];\n\t\tfor( var y = 0; y < chunkRows; y++ ) {\n\t\t\tthis.preRenderedChunks[y] = [];\n\t\t\t\n\t\t\tfor( var x = 0; x < chunkCols; x++ ) {\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tvar chunkWidth = (x == chunkCols-1)\n\t\t\t\t\t? totalWidth - x * this.chunkSize\n\t\t\t\t\t: this.chunkSize;\n\t\t\t\t\t\n\t\t\t\tvar chunkHeight = (y == chunkRows-1)\n\t\t\t\t\t? totalHeight - y * this.chunkSize\n\t\t\t\t\t: this.chunkSize;\n\t\t\t\t\t\n\t\t\t\tthis.preRenderedChunks[y][x] = this.preRenderChunk( x, y, chunkWidth, chunkHeight );\n\t\t\t}\n\t\t}\n\t},\n\t\n\t\n\tpreRenderChunk: function( cx, cy, w, h ) {\n\t\tvar tw = w / this.tilesize / ig.system.scale + 1,\n\t\t\tth = h / this.tilesize / ig.system.scale + 1;\n\t\t\n\t\tvar nx = (cx * this.chunkSize / ig.system.scale) % this.tilesize,\n\t\t\tny = (cy * this.chunkSize / ig.system.scale) % this.tilesize;\n\t\t\n\t\tvar tx = Math.floor(cx * this.chunkSize / this.tilesize / ig.system.scale),\n\t\t\tty = Math.floor(cy * this.chunkSize / this.tilesize / ig.system.scale);\n\t\t\n\t\t\n\t\tvar chunk = ig.$new('canvas');\n\t\tchunk.width = w;\n\t\tchunk.height = h;\n\t\tchunk.retinaResolutionEnabled = false; // Opt out for Ejecta\n\t\t\n\t\tvar chunkContext = chunk.getContext('2d');\n\t\tig.System.scaleMode(chunk, chunkContext);\n\t\t\n\t\tvar screenContext = ig.system.context;\n\t\tig.system.context = chunkContext;\n\t\t\n\t\tfor( var x = 0; x < tw; x++ ) {\n\t\t\tfor( var y = 0; y < th; y++ ) {\n\t\t\t\tif( x + tx < this.width && y + ty < this.height ) {\n\t\t\t\t\tvar tile = this.data[y+ty][x+tx];\n\t\t\t\t\tif( tile ) {\n\t\t\t\t\t\tthis.tiles.drawTile(\n\t\t\t\t\t\t\tx * this.tilesize - nx,\ty * this.tilesize - ny,\n\t\t\t\t\t\t\ttile - 1, this.tilesize\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tig.system.context = screenContext;\n\t\t\n\t\treturn chunk;\n\t},\n\t\n\t\n\tdraw: function() {\n\t\tif( !this.tiles.loaded || !this.enabled ) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif( this.preRender ) {\n\t\t\tthis.drawPreRendered();\n\t\t}\n\t\telse {\n\t\t\tthis.drawTiled();\n\t\t}\n\t},\n\t\t\n\t\n\tdrawPreRendered: function() {\n\t\tif( !this.preRenderedChunks ) {\n\t\t\tthis.preRenderMapToChunks();\n\t\t}\n\t\t\n\t\tvar dx = ig.system.getDrawPos(this.scroll.x),\n\t\t\tdy = ig.system.getDrawPos(this.scroll.y);\n\t\t\t\n\t\t\t\n\t\tif( this.repeat ) {\n\t\t\tvar w = this.width * this.tilesize * ig.system.scale;\n\t\t\tdx = (dx%w + w) % w;\n\n\t\t\tvar h = this.height * this.tilesize * ig.system.scale;\n\t\t\tdy = (dy%h + h) % h;\n\t\t}\n\t\t\n\t\tvar minChunkX = Math.max( Math.floor(dx / this.chunkSize), 0 ),\n\t\t\tminChunkY = Math.max( Math.floor(dy / this.chunkSize), 0 ),\n\t\t\tmaxChunkX = Math.ceil((dx+ig.system.realWidth) / this.chunkSize),\n\t\t\tmaxChunkY = Math.ceil((dy+ig.system.realHeight) / this.chunkSize),\n\t\t\tmaxRealChunkX = this.preRenderedChunks[0].length,\n\t\t\tmaxRealChunkY = this.preRenderedChunks.length;\n\t\t\t\n\t\t\n\t\tif( !this.repeat ) {\n\t\t\tmaxChunkX = Math.min( maxChunkX, maxRealChunkX );\n\t\t\tmaxChunkY = Math.min( maxChunkY, maxRealChunkY );\n\t\t}\n\t\t\n\t\t\n\t\tvar nudgeY = 0;\n\t\tfor( var cy = minChunkY; cy < maxChunkY; cy++ ) {\n\t\t\t\n\t\t\tvar nudgeX = 0;\n\t\t\tfor( var cx = minChunkX; cx < maxChunkX; cx++ ) {\n\t\t\t\tvar chunk = this.preRenderedChunks[cy % maxRealChunkY][cx % maxRealChunkX];\n\t\t\t\t\n\t\t\t\tvar x = -dx + cx * this.chunkSize - nudgeX;\n\t\t\t\tvar y = -dy + cy * this.chunkSize - nudgeY;\n\t\t\t\tig.system.context.drawImage( chunk, x, y);\n\t\t\t\tig.Image.drawCount++;\n\t\t\t\t\n\t\t\t\tif( this.debugChunks ) {\n\t\t\t\t\tig.system.context.strokeStyle = '#f0f';\n\t\t\t\t\tig.system.context.strokeRect( x, y, this.chunkSize, this.chunkSize );\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// If we repeat in X and this chunk's width wasn't the full chunk size\n\t\t\t\t// and the screen is not already filled, we need to draw anohter chunk\n\t\t\t\t// AND nudge it to be flush with the last chunk\n\t\t\t\tif( this.repeat && chunk.width < this.chunkSize && x + chunk.width < ig.system.realWidth ) {\n\t\t\t\t\tnudgeX += this.chunkSize - chunk.width;\n\t\t\t\t\tmaxChunkX++;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// Same as above, but for Y\n\t\t\tif( this.repeat && chunk.height < this.chunkSize && y + chunk.height < ig.system.realHeight\t) {\n\t\t\t\tnudgeY += this.chunkSize - chunk.height;\n\t\t\t\tmaxChunkY++;\n\t\t\t}\n\t\t}\n\t},\n\t\n\t\n\tdrawTiled: function() {\t\n\t\tvar tile = 0,\n\t\t\tanim = null,\n\t\t\ttileOffsetX = (this.scroll.x / this.tilesize).toInt(),\n\t\t\ttileOffsetY = (this.scroll.y / this.tilesize).toInt(),\n\t\t\tpxOffsetX = this.scroll.x % this.tilesize,\n\t\t\tpxOffsetY = this.scroll.y % this.tilesize,\n\t\t\tpxMinX = -pxOffsetX - this.tilesize,\n\t\t\tpxMinY = -pxOffsetY - this.tilesize,\n\t\t\tpxMaxX = ig.system.width + this.tilesize - pxOffsetX,\n\t\t\tpxMaxY = ig.system.height + this.tilesize - pxOffsetY;\n\t\t\t\n\t\t\n\t\t// FIXME: could be sped up for non-repeated maps: restrict the for loops\n\t\t// to the map size instead of to the screen size and skip the 'repeat'\n\t\t// checks inside the loop.\n\t\t\n\t\tfor( var mapY = -1, pxY = pxMinY; pxY < pxMaxY; mapY++, pxY += this.tilesize) {\n\t\t\tvar tileY = mapY + tileOffsetY;\n\t\t\t\t\n\t\t\t// Repeat Y?\n\t\t\tif( tileY >= this.height || tileY < 0 ) {\n\t\t\t\tif( !this.repeat ) { continue; }\n\t\t\t\ttileY = (tileY%this.height + this.height) % this.height;\n\t\t\t}\n\t\t\t\n\t\t\tfor( var mapX = -1, pxX = pxMinX; pxX < pxMaxX; mapX++, pxX += this.tilesize ) {\n\t\t\t\tvar tileX = mapX + tileOffsetX;\n\t\t\t\t\n\t\t\t\t// Repeat X?\n\t\t\t\tif( tileX >= this.width || tileX < 0 ) {\n\t\t\t\t\tif( !this.repeat ) { continue; }\n\t\t\t\t\ttileX = (tileX%this.width + this.width) % this.width;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Draw!\n\t\t\t\tif( (tile = this.data[tileY][tileX]) ) {\n\t\t\t\t\tif( (anim = this.anims[tile-1]) ) { \n\t\t\t\t\t\tanim.draw( pxX, pxY );\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis.tiles.drawTile( pxX, pxY, tile-1, this.tilesize );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} // end for x\n\t\t} // end for y\n\t}\n});\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./example/lib/impact/background-map.js\n **/","ig.module(\n\t'impact.collision-map'\n)\n.requires(\n\t'impact.map'\n)\n.defines(function(){ \"use strict\";\n\nig.CollisionMap = ig.Map.extend({\n\t\n\tlastSlope: 1,\n\ttiledef: null,\n\t\n\tinit: function( tilesize, data, tiledef ) {\n\t\tthis.parent( tilesize, data );\n\t\tthis.tiledef = tiledef || ig.CollisionMap.defaultTileDef;\n\t\t\n\t\tfor( var t in this.tiledef ) {\n\t\t\tif( t|0 > this.lastSlope ) {\n\t\t\t\tthis.lastSlope = t|0;\n\t\t\t}\n\t\t}\n\t},\n\t\n\t\n\ttrace: function( x, y, vx, vy, objectWidth, objectHeight ) {\n\t\t// Set up the trace-result\n\t\tvar res = {\n\t\t\tcollision: {x: false, y: false, slope: false},\n\t\t\tpos: {x: x, y: y},\n\t\t\ttile: {x: 0, y: 0}\n\t\t};\n\t\t\n\t\t// Break the trace down into smaller steps if necessary\n\t\tvar steps = Math.ceil(Math.max(Math.abs(vx), Math.abs(vy)) / this.tilesize);\n\t\tif( steps > 1 ) {\n\t\t\tvar sx = vx / steps;\n\t\t\tvar sy = vy / steps;\n\t\t\t\n\t\t\tfor( var i = 0; i < steps && (sx || sy); i++ ) {\n\t\t\t\tthis._traceStep( res, x, y, sx, sy, objectWidth, objectHeight, vx, vy, i );\n\t\t\t\t\n\t\t\t\tx = res.pos.x;\n\t\t\t\ty = res.pos.y;\n\t\t\t\tif( res.collision.x ) {\tsx = 0; vx = 0; }\n\t\t\t\tif( res.collision.y ) {\tsy = 0;\tvy = 0; }\n\t\t\t\tif( res.collision.slope ) { break; }\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Just one step\n\t\telse {\n\t\t\tthis._traceStep( res, x, y, vx, vy, objectWidth, objectHeight, vx, vy, 0 );\n\t\t}\n\t\t\n\t\treturn res;\n\t},\n\t\n\t\n\t_traceStep: function( res, x, y, vx, vy, width, height, rvx, rvy, step ) {\n\t\t\n\t\tres.pos.x += vx;\n\t\tres.pos.y += vy;\n\t\t\n\t\tvar t = 0;\n\t\t\n\t\t// Horizontal collision (walls)\n\t\tif( vx ) {\n\t\t\tvar pxOffsetX = (vx > 0 ? width : 0);\n\t\t\tvar tileOffsetX = (vx < 0 ? this.tilesize : 0);\n\t\t\t\n\t\t\tvar firstTileY = Math.max( Math.floor(y / this.tilesize), 0 );\n\t\t\tvar lastTileY = Math.min( Math.ceil((y + height) / this.tilesize), this.height );\n\t\t\tvar tileX = Math.floor( (res.pos.x + pxOffsetX) / this.tilesize );\n\t\t\t\n\t\t\t// We need to test the new tile position as well as the current one, as we\n\t\t\t// could still collide with the current tile if it's a line def.\n\t\t\t// We can skip this test if this is not the first step or the new tile position\n\t\t\t// is the same as the current one.\n\t\t\tvar prevTileX = Math.floor( (x + pxOffsetX) / this.tilesize );\n\t\t\tif( step > 0 || tileX == prevTileX || prevTileX < 0 || prevTileX >= this.width ) {\n\t\t\t\tprevTileX = -1;\n\t\t\t}\n\t\t\t\n\t\t\t// Still inside this collision map?\n\t\t\tif(\ttileX >= 0 && tileX < this.width ) {\n\t\t\t\tfor( var tileY = firstTileY; tileY < lastTileY; tileY++ ) {\n\t\t\t\t\tif( prevTileX != -1 ) {\n\t\t\t\t\t\tt = this.data[tileY][prevTileX];\n\t\t\t\t\t\tif(\t\n\t\t\t\t\t\t\tt > 1 && t <= this.lastSlope && \n\t\t\t\t\t\t\tthis._checkTileDef(res, t, x, y, rvx, rvy, width, height, prevTileX, tileY) \n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tt = this.data[tileY][tileX];\n\t\t\t\t\tif(\n\t\t\t\t\t\tt == 1 || t > this.lastSlope || // fully solid tile?\n\t\t\t\t\t\t(t > 1 && this._checkTileDef(res, t, x, y, rvx, rvy, width, height, tileX, tileY)) // slope?\n\t\t\t\t\t) {\n\t\t\t\t\t\tif( t > 1 && t <= this.lastSlope && res.collision.slope ) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// full tile collision!\n\t\t\t\t\t\tres.collision.x = true;\n\t\t\t\t\t\tres.tile.x = t;\n\t\t\t\t\t\tx = res.pos.x = tileX * this.tilesize - pxOffsetX + tileOffsetX;\n\t\t\t\t\t\trvx = 0;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Vertical collision (floor, ceiling)\n\t\tif( vy ) {\n\t\t\tvar pxOffsetY = (vy > 0 ? height : 0);\n\t\t\tvar tileOffsetY = (vy < 0 ? this.tilesize : 0);\n\t\t\t\n\t\t\tvar firstTileX = Math.max( Math.floor(res.pos.x / this.tilesize), 0 );\n\t\t\tvar lastTileX = Math.min( Math.ceil((res.pos.x + width) / this.tilesize), this.width );\n\t\t\tvar tileY = Math.floor( (res.pos.y + pxOffsetY) / this.tilesize );\n\t\t\t\n\t\t\tvar prevTileY = Math.floor( (y + pxOffsetY) / this.tilesize );\n\t\t\tif( step > 0 || tileY == prevTileY || prevTileY < 0 || prevTileY >= this.height ) {\n\t\t\t\tprevTileY = -1;\n\t\t\t}\n\t\t\t\n\t\t\t// Still inside this collision map?\n\t\t\tif( tileY >= 0 && tileY < this.height ) {\n\t\t\t\tfor( var tileX = firstTileX; tileX < lastTileX; tileX++ ) {\n\t\t\t\t\tif( prevTileY != -1 ) {\n\t\t\t\t\t\tt = this.data[prevTileY][tileX];\n\t\t\t\t\t\tif( \n\t\t\t\t\t\t\tt > 1 && t <= this.lastSlope &&\n\t\t\t\t\t\t\tthis._checkTileDef(res, t, x, y, rvx, rvy, width, height, tileX, prevTileY) ) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tt = this.data[tileY][tileX];\n\t\t\t\t\tif(\n\t\t\t\t\t\tt == 1 || t > this.lastSlope || // fully solid tile?\n\t\t\t\t\t\t(t > 1 && this._checkTileDef(res, t, x, y, rvx, rvy, width, height, tileX, tileY)) // slope?\n\t\t\t\t\t) {\n\t\t\t\t\t\tif( t > 1 && t <= this.lastSlope && res.collision.slope ) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// full tile collision!\n\t\t\t\t\t\tres.collision.y = true;\n\t\t\t\t\t\tres.tile.y = t;\n\t\t\t\t\t\tres.pos.y = tileY * this.tilesize - pxOffsetY + tileOffsetY;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t// res is changed in place, nothing to return\n\t},\n\t\n\t\n\t_checkTileDef: function( res, t, x, y, vx, vy, width, height, tileX, tileY ) {\n\t\tvar def = this.tiledef[t];\n\t\tif( !def ) { return false; }\n\t\t\n\t\tvar lx = (tileX + def[0]) * this.tilesize,\n\t\t\tly = (tileY + def[1]) * this.tilesize,\n\t\t\tlvx = (def[2] - def[0]) * this.tilesize,\n\t\t\tlvy = (def[3] - def[1]) * this.tilesize,\n\t\t\tsolid = def[4];\n\t\t\n\t\t// Find the box corner to test, relative to the line\n\t\tvar tx = x + vx + (lvy < 0 ? width : 0) - lx,\n\t\t\tty = y + vy + (lvx > 0 ? height : 0) - ly;\n\t\t\n\t\t// Is the box corner behind the line?\n\t\tif( lvx * ty - lvy * tx > 0 ) {\n\t\t\t\n\t\t\t// Lines are only solid from one side - find the dot product of\n\t\t\t// line normal and movement vector and dismiss if wrong side\n\t\t\tif( vx * -lvy + vy * lvx < 0 ) {\n\t\t\t\treturn solid;\n\t\t\t}\n\t\t\t\n\t\t\t// Find the line normal\n\t\t\tvar length = Math.sqrt(lvx * lvx + lvy * lvy);\n\t\t\tvar nx = lvy/length,\n\t\t\t\tny = -lvx/length;\n\t\t\t\n\t\t\t// Project out of the line\n\t\t\tvar proj = tx * nx + ty * ny;\n\t\t\tvar px = nx * proj,\n\t\t\t\tpy = ny * proj;\n\t\t\t\n\t\t\t// If we project further out than we moved in, then this is a full\n\t\t\t// tile collision for solid tiles.\n\t\t\t// For non-solid tiles, make sure we were in front of the line. \n\t\t\tif( px*px+py*py >= vx*vx+vy*vy ) {\n\t\t\t\treturn solid || (lvx * (ty-vy) - lvy * (tx-vx) < 0.5);\n\t\t\t}\n\t\t\t\n\t\t\tres.pos.x = x + vx - px;\n\t\t\tres.pos.y = y + vy - py;\n\t\t\tres.collision.slope = {x: lvx, y: lvy, nx: nx, ny: ny};\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n});\n\n\n// Default Slope Tile definition. Each tile is defined by an array of 5 vars:\n// - 4 for the line in tile coordinates (0 -- 1)\n// - 1 specifing whether the tile is 'filled' behind the line or not\n// [ x1, y1, x2, y2, solid ]\n\n// Defining 'half', 'one third' and 'two thirds' as vars  makes it a bit\n// easier to read... I hope.\nvar H = 1/2,\n\tN = 1/3,\n\tM = 2/3,\n\tSOLID = true,\n\tNON_SOLID = false;\n\t\nig.CollisionMap.defaultTileDef = {\t\n\t/* 15 NE */\t 5: [0,1, 1,M, SOLID],  6: [0,M, 1,N, SOLID],  7: [0,N, 1,0, SOLID],\n\t/* 22 NE */\t 3: [0,1, 1,H, SOLID],  4: [0,H, 1,0, SOLID],\n\t/* 45 NE */  2: [0,1, 1,0, SOLID],\n\t/* 67 NE */ 10: [H,1, 1,0, SOLID], 21: [0,1, H,0, SOLID],\n\t/* 75 NE */ 32: [M,1, 1,0, SOLID], 43: [N,1, M,0, SOLID], 54: [0,1, N,0, SOLID],\n\t\n\t/* 15 SE */\t27: [0,0, 1,N, SOLID], 28: [0,N, 1,M, SOLID], 29: [0,M, 1,1, SOLID],\n\t/* 22 SE */\t25: [0,0, 1,H, SOLID], 26: [0,H, 1,1, SOLID],\n\t/* 45 SE */\t24: [0,0, 1,1, SOLID],\n\t/* 67 SE */\t11: [0,0, H,1, SOLID], 22: [H,0, 1,1, SOLID],\n\t/* 75 SE */\t33: [0,0, N,1, SOLID], 44: [N,0, M,1, SOLID], 55: [M,0, 1,1, SOLID],\n\t\n\t/* 15 NW */\t16: [1,N, 0,0, SOLID], 17: [1,M, 0,N, SOLID], 18: [1,1, 0,M, SOLID],\n\t/* 22 NW */\t14: [1,H, 0,0, SOLID], 15: [1,1, 0,H, SOLID],\n\t/* 45 NW */\t13: [1,1, 0,0, SOLID],\n\t/* 67 NW */\t 8: [H,1, 0,0, SOLID], 19: [1,1, H,0, SOLID],\n\t/* 75 NW */\t30: [N,1, 0,0, SOLID], 41: [M,1, N,0, SOLID], 52: [1,1, M,0, SOLID],\n\t\n\t/* 15 SW */ 38: [1,M, 0,1, SOLID], 39: [1,N, 0,M, SOLID], 40: [1,0, 0,N, SOLID],\n\t/* 22 SW */ 36: [1,H, 0,1, SOLID], 37: [1,0, 0,H, SOLID],\n\t/* 45 SW */ 35: [1,0, 0,1, SOLID],\n\t/* 67 SW */  9: [1,0, H,1, SOLID], 20: [H,0, 0,1, SOLID],\n\t/* 75 SW */ 31: [1,0, M,1, SOLID], 42: [M,0, N,1, SOLID], 53: [N,0, 0,1, SOLID],\n\t\n\t/* Go N  */ 12: [0,0, 1,0, NON_SOLID],\n\t/* Go S  */ 23: [1,1, 0,1, NON_SOLID],\n\t/* Go E  */ 34: [1,0, 1,1, NON_SOLID],\n\t/* Go W  */ 45: [0,1, 0,0, NON_SOLID]\n\t\n\t// Now that was fun!\n};\n\n\n// Static Dummy CollisionMap; never collides\nig.CollisionMap.staticNoCollision = { trace: function( x, y, vx, vy ) {\n\treturn {\n\t\tcollision: {x: false, y: false, slope: false},\n\t\tpos: {x: x+vx, y: y+vy},\n\t\ttile: {x: 0, y: 0}\n\t};\n}};\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./example/lib/impact/collision-map.js\n **/","ig.module(\r\n\t'impact.debug.debug'\r\n)\r\n.requires(\t\r\n\t'impact.debug.entities-panel',\r\n\t'impact.debug.maps-panel',\r\n\t'impact.debug.graph-panel'\r\n)\r\n.defines(function(){ \"use strict\";\r\n\t\r\n/* Empty module to require all debug panels */\r\n\r\n});\n\n\n/** WEBPACK FOOTER **\n ** ./example/lib/impact/debug/debug.js\n **/","ig.module(\r\n\t'impact.debug.entities-panel'\r\n)\r\n.requires(\r\n\t'impact.debug.menu',\r\n\t'impact.entity'\r\n)\r\n.defines(function(){ \"use strict\";\r\n\r\n\r\nig.Entity.inject({\r\n\tcolors: {\r\n\t\tnames: '#fff',\r\n\t\tvelocities: '#0f0',\r\n\t\tboxes: '#f00'\r\n\t},\r\n\t\r\n\tdraw: function() {\r\n\t\tthis.parent();\t\t\r\n\t\t\r\n\t\t// Collision Boxes\r\n\t\tif( ig.Entity._debugShowBoxes ) {\r\n\t\t\tig.system.context.strokeStyle = this.colors.boxes;\r\n\t\t\tig.system.context.lineWidth = 1.0;\r\n\t\t\tig.system.context.strokeRect(\t\r\n\t\t\t\tig.system.getDrawPos(this.pos.x.round() - ig.game.screen.x) - 0.5,\r\n\t\t\t\tig.system.getDrawPos(this.pos.y.round() - ig.game.screen.y) - 0.5,\r\n\t\t\t\tthis.size.x * ig.system.scale,\r\n\t\t\t\tthis.size.y * ig.system.scale\r\n\t\t\t);\r\n\t\t}\r\n\t\t\r\n\t\t// Velocities\r\n\t\tif( ig.Entity._debugShowVelocities ) {\r\n\t\t\tvar x = this.pos.x + this.size.x/2;\r\n\t\t\tvar y = this.pos.y + this.size.y/2;\r\n\t\t\t\r\n\t\t\tthis._debugDrawLine( this.colors.velocities, x, y, x + this.vel.x, y + this.vel.y );\r\n\t\t}\r\n\t\t\r\n\t\t// Names & Targets\r\n\t\tif( ig.Entity._debugShowNames ) {\r\n\t\t\tif( this.name ) {\r\n\t\t\t\tig.system.context.fillStyle = this.colors.names;\r\n\t\t\t\tig.system.context.fillText(\r\n\t\t\t\t\tthis.name,\r\n\t\t\t\t\tig.system.getDrawPos(this.pos.x - ig.game.screen.x), \r\n\t\t\t\t\tig.system.getDrawPos(this.pos.y - ig.game.screen.y)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif( typeof(this.target) == 'object' ) {\r\n\t\t\t\tfor( var t in this.target ) {\r\n\t\t\t\t\tvar ent = ig.game.getEntityByName( this.target[t] );\r\n\t\t\t\t\tif( ent ) {\r\n\t\t\t\t\t\tthis._debugDrawLine( this.colors.names,\r\n\t\t\t\t\t\t\tthis.pos.x + this.size.x/2, this.pos.y + this.size.y/2,\r\n\t\t\t\t\t\t\tent.pos.x + ent.size.x/2, ent.pos.y + ent.size.y/2\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\t\r\n\t_debugDrawLine: function( color, sx, sy, dx, dy ) {\r\n\t\tig.system.context.strokeStyle = color;\r\n\t\tig.system.context.lineWidth = 1.0;\r\n\r\n\t\tig.system.context.beginPath();\r\n\t\tig.system.context.moveTo( \r\n\t\t\tig.system.getDrawPos(sx - ig.game.screen.x),\r\n\t\t\tig.system.getDrawPos(sy - ig.game.screen.y)\r\n\t\t);\r\n\t\tig.system.context.lineTo( \r\n\t\t\tig.system.getDrawPos(dx - ig.game.screen.x),\r\n\t\t\tig.system.getDrawPos(dy - ig.game.screen.y)\r\n\t\t);\r\n\t\tig.system.context.stroke();\r\n\t\tig.system.context.closePath();\r\n\t}\r\n});\r\n\r\n\r\nig.Entity._debugEnableChecks = true;\r\nig.Entity._debugShowBoxes = false;\r\nig.Entity._debugShowVelocities = false;\r\nig.Entity._debugShowNames = false;\r\n\r\nig.Entity.oldCheckPair = ig.Entity.checkPair;\r\nig.Entity.checkPair = function( a, b ) {\r\n\tif( !ig.Entity._debugEnableChecks ) {\r\n\t\treturn;\r\n\t}\r\n\tig.Entity.oldCheckPair( a, b );\r\n};\r\n\r\n\r\nig.debug.addPanel({\r\n\ttype: ig.DebugPanel,\r\n\tname: 'entities',\r\n\tlabel: 'Entities',\r\n\toptions: [\r\n\t\t{\r\n\t\t\tname: 'Checks & Collisions',\r\n\t\t\tobject: ig.Entity,\r\n\t\t\tproperty: '_debugEnableChecks'\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'Show Collision Boxes',\r\n\t\t\tobject: ig.Entity,\r\n\t\t\tproperty: '_debugShowBoxes'\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'Show Velocities',\r\n\t\t\tobject: ig.Entity,\r\n\t\t\tproperty: '_debugShowVelocities'\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'Show Names & Targets',\r\n\t\t\tobject: ig.Entity,\r\n\t\t\tproperty: '_debugShowNames'\r\n\t\t}\r\n\t]\r\n});\r\n\r\n\r\n});\n\n\n/** WEBPACK FOOTER **\n ** ./example/lib/impact/debug/entities-panel.js\n **/","ig.module(\r\n\t'impact.debug.graph-panel'\r\n)\r\n.requires(\r\n\t'impact.debug.menu',\r\n\t'impact.system',\r\n\t'impact.game',\r\n\t'impact.image'\r\n)\r\n.defines(function(){ \"use strict\";\r\n\r\n\r\nig.Game.inject({\t\r\n\tdraw: function() {\r\n\t\tig.graph.beginClock('draw');\r\n\t\tthis.parent();\r\n\t\tig.graph.endClock('draw');\r\n\t},\r\n\t\r\n\t\r\n\tupdate: function() {\r\n\t\tig.graph.beginClock('update');\r\n\t\tthis.parent();\r\n\t\tig.graph.endClock('update');\r\n\t},\r\n\t\r\n\t\r\n\tcheckEntities: function() {\r\n\t\tig.graph.beginClock('checks');\r\n\t\tthis.parent();\r\n\t\tig.graph.endClock('checks');\r\n\t}\r\n});\r\n\r\n\r\n\r\nig.DebugGraphPanel = ig.DebugPanel.extend({\r\n\tclocks: {},\r\n\tmarks: [],\r\n\ttextY: 0,\r\n\theight: 128,\r\n\tms: 64,\r\n\ttimeBeforeRun: 0,\r\n\t\r\n\t\r\n\tinit: function( name, label ) {\r\n\t\tthis.parent( name, label );\r\n\t\t\r\n\t\tthis.mark16ms = (this.height - (this.height/this.ms) * 16).round();\r\n\t\tthis.mark33ms = (this.height - (this.height/this.ms) * 33).round();\r\n\t\tthis.msHeight = this.height/this.ms;\r\n\t\t\r\n\t\tthis.graph = ig.$new('canvas');\r\n\t\tthis.graph.width = window.innerWidth;\r\n\t\tthis.graph.height = this.height;\r\n\t\tthis.container.appendChild( this.graph );\r\n\t\tthis.ctx = this.graph.getContext('2d');\r\n\t\t\r\n\t\tthis.ctx.fillStyle = '#444';\r\n\t\tthis.ctx.fillRect( 0, this.mark16ms, this.graph.width, 1 );\r\n\t\tthis.ctx.fillRect( 0, this.mark33ms, this.graph.width, 1 );\r\n\t\t\r\n\t\tthis.addGraphMark( '16ms', this.mark16ms );\r\n\t\tthis.addGraphMark( '33ms', this.mark33ms );\r\n\t\t\r\n\t\tthis.addClock( 'draw', 'Draw', '#13baff' );\r\n\t\tthis.addClock( 'update', 'Entity Update', '#bb0fff' );\r\n\t\tthis.addClock( 'checks', 'Entity Checks & Collisions', '#a2e908' );\r\n\t\tthis.addClock( 'lag', 'System Lag', '#f26900' );\r\n\t\t\r\n\t\tig.mark = this.mark.bind(this);\r\n\t\tig.graph = this;\r\n\t},\r\n\t\r\n\t\r\n\taddGraphMark: function( name, height ) {\r\n\t\tvar span = ig.$new('span');\r\n\t\tspan.className = 'ig_debug_graph_mark';\r\n\t\tspan.textContent = name;\r\n\t\tspan.style.top = height.round() + 'px';\r\n\t\tthis.container.appendChild( span );\r\n\t},\r\n\t\r\n\t\r\n\taddClock: function( name, description, color ) {\t\t\r\n\t\tvar mark = ig.$new('span');\r\n\t\tmark.className = 'ig_debug_legend_color';\r\n\t\tmark.style.backgroundColor = color;\r\n\t\t\r\n\t\tvar number = ig.$new('span');\r\n\t\tnumber.className = 'ig_debug_legend_number';\r\n\t\tnumber.appendChild( document.createTextNode('0') );\r\n\t\t\r\n\t\tvar legend = ig.$new('span');\r\n\t\tlegend.className = 'ig_debug_legend';\r\n\t\tlegend.appendChild( mark );\r\n\t\tlegend.appendChild( document.createTextNode(description +' (') );\r\n\t\tlegend.appendChild( number );\r\n\t\tlegend.appendChild( document.createTextNode('ms)') );\r\n\t\t\r\n\t\tthis.container.appendChild( legend );\r\n\t\t\r\n\t\tthis.clocks[name] = {\r\n\t\t\tdescription: description,\r\n\t\t\tcolor: color,\r\n\t\t\tcurrent: 0,\r\n\t\t\tstart: Date.now(),\r\n\t\t\tavg: 0,\r\n\t\t\thtml: number\r\n\t\t};\r\n\t},\r\n\t\r\n\t\r\n\tbeginClock: function( name, offset ) {\r\n\t\tthis.clocks[name].start = Date.now() + (offset || 0);\r\n\t},\r\n\t\r\n\t\r\n\tendClock: function( name ) {\r\n\t\tvar c = this.clocks[name];\r\n\t\tc.current = Math.round(Date.now() - c.start);\r\n\t\tc.avg = c.avg * 0.8 + c.current * 0.2;\r\n\t},\r\n\t\r\n\t\r\n\tmark: function( msg, color ) {\r\n\t\tif( this.active ) {\r\n\t\t\tthis.marks.push( {msg:msg, color:(color||'#fff')} );\r\n\t\t}\r\n\t},\r\n\t\r\n\t\r\n\tbeforeRun: function() {\r\n\t\tthis.endClock('lag');\r\n\t\tthis.timeBeforeRun = Date.now();\r\n\t},\r\n\t\r\n\t\r\n\tafterRun: function() {\r\n\t\tvar frameTime = Date.now() - this.timeBeforeRun;\r\n\t\tvar nextFrameDue = (1000/ig.system.fps) - frameTime;\r\n\t\tthis.beginClock('lag', Math.max(nextFrameDue, 0));\r\n\t\t\r\n\t\t\r\n\t\tvar x = this.graph.width-1;\r\n\t\tvar y = this.height;\r\n\t\t\r\n\t\tthis.ctx.drawImage( this.graph, -1, 0 );\r\n\t\t\r\n\t\tthis.ctx.fillStyle = '#000';\r\n\t\tthis.ctx.fillRect( x, 0, 1, this.height );\r\n\t\t\r\n\t\tthis.ctx.fillStyle = '#444';\r\n\t\tthis.ctx.fillRect( x, this.mark16ms, 1, 1 );\r\n\t\t\r\n\t\tthis.ctx.fillStyle = '#444';\r\n\t\tthis.ctx.fillRect( x, this.mark33ms, 1, 1 );\r\n\t\t\r\n\t\tfor( var ci in this.clocks ) {\r\n\t\t\tvar c = this.clocks[ci];\r\n\t\t\tc.html.textContent = c.avg.toFixed(2);\r\n\t\t\t\r\n\t\t\tif( c.color && c.current > 0 ) {\r\n\t\t\t\tthis.ctx.fillStyle = c.color;\r\n\t\t\t\tvar h = c.current * this.msHeight;\r\n\t\t\t\ty -= h;\r\n\t\t\t\tthis.ctx.fillRect(\tx, y, 1, h );\r\n\t\t\t\tc.current = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.ctx.textAlign = 'right';\r\n\t\tthis.ctx.textBaseline = 'top';\r\n\t\tthis.ctx.globalAlpha = 0.5;\r\n\t\t\r\n\t\tfor( var i = 0; i < this.marks.length; i++ ) {\r\n\t\t\tvar m = this.marks[i];\r\n\t\t\tthis.ctx.fillStyle = m.color;\r\n\t\t\tthis.ctx.fillRect(\tx, 0, 1, this.height );\r\n\t\t\tif( m.msg ) {\r\n\t\t\t\tthis.ctx.fillText( m.msg, x-1, this.textY );\r\n\t\t\t\tthis.textY = (this.textY+8)%32;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.ctx.globalAlpha = 1;\r\n\t\tthis.marks = [];\r\n\t}\r\n});\r\n\r\n\r\nig.debug.addPanel({\r\n\ttype: ig.DebugGraphPanel,\r\n\tname: 'graph',\r\n\tlabel: 'Performance'\r\n});\r\n\r\n\r\n});\n\n\n/** WEBPACK FOOTER **\n ** ./example/lib/impact/debug/graph-panel.js\n **/","ig.module(\r\n\t'impact.debug.maps-panel'\r\n)\r\n.requires(\r\n\t'impact.debug.menu',\r\n\t'impact.game',\r\n\t'impact.background-map'\r\n)\r\n.defines(function(){ \"use strict\";\r\n\r\n\r\nig.Game.inject({\r\n\tloadLevel: function( data ) {\r\n\t\tthis.parent(data);\r\n\t\tig.debug.panels.maps.load(this);\r\n\t}\r\n});\r\n\r\n\t\r\nig.DebugMapsPanel = ig.DebugPanel.extend({\r\n\tmaps: [],\r\n\tmapScreens: [],\r\n\t\r\n\t\r\n\tinit: function( name, label ) {\r\n\t\tthis.parent( name, label );\r\n\t\tthis.load();\r\n\t},\r\n\t\r\n\t\r\n\tload: function( game ) {\r\n\t\tthis.options = [];\r\n\t\tthis.panels = [];\r\n\t\t\r\n\t\tif( !game || !game.backgroundMaps.length ) {\r\n\t\t\tthis.container.innerHTML = '<em>No Maps Loaded</em>';\r\n\t\t\treturn;\t\r\n\t\t}\r\n\t\t\r\n\t\tthis.maps = game.backgroundMaps;\r\n\t\tthis.mapScreens = [];\r\n\t\tthis.container.innerHTML = '';\r\n\t\t\r\n\t\tfor( var m = 0; m < this.maps.length; m++ ) {\r\n\t\t\tvar map = this.maps[m];\r\n\t\t\t\r\n\t\t\tvar subPanel = new ig.DebugPanel( m, 'Layer '+m );\r\n\t\t\t\r\n\t\t\tvar head = new ig.$new('strong');\r\n\t\t\thead.textContent = m +': ' + map.tiles.path;\r\n\t\t\tsubPanel.container.appendChild( head );\r\n\t\t\t\r\n\t\t\tsubPanel.addOption( new ig.DebugOption('Enabled', map, 'enabled') );\r\n\t\t\tsubPanel.addOption( new ig.DebugOption('Pre Rendered', map, 'preRender') );\r\n\t\t\tsubPanel.addOption( new ig.DebugOption('Show Chunks', map, 'debugChunks') );\r\n\t\t\t\r\n\t\t\tthis.generateMiniMap( subPanel, map, m );\r\n\t\t\tthis.addPanel( subPanel );\r\n\t\t}\r\n\t},\r\n\t\r\n\t\r\n\tgenerateMiniMap: function( panel, map, id ) {\r\n\t\tvar s = ig.system.scale; // we'll need this a lot\r\n\t\t\r\n\t\t// resize the tileset, so that one tile is 's' pixels wide and high\r\n\t\tvar ts = ig.$new('canvas');\r\n\t\tvar tsctx = ts.getContext('2d');\r\n\t\t\r\n\t\tvar w = map.tiles.width * s;\r\n\t\tvar h = map.tiles.height * s;\r\n\t\tvar ws = w / map.tilesize;\r\n\t\tvar hs = h / map.tilesize;\r\n\t\tts.width = ws;\r\n\t\tts.height = hs;\r\n\t\ttsctx.drawImage( map.tiles.data, 0, 0, w, h, 0, 0, ws, hs );\r\n\t\t\r\n\t\t// create the minimap canvas\r\n\t\tvar mapCanvas = ig.$new('canvas');\r\n\t\tmapCanvas.width = map.width * s;\r\n\t\tmapCanvas.height = map.height * s;\r\n\t\tvar ctx = mapCanvas.getContext('2d');\r\n\t\t\r\n\t\tif( ig.game.clearColor ) {\r\n\t\t\tctx.fillStyle = ig.game.clearColor; \r\n\t\t\tctx.fillRect(0, 0, w, h);\r\n\t\t}\r\n\t\t\r\n\t\t// draw the map\r\n\t\tvar tile = 0;\r\n\t\tfor( var x = 0; x < map.width; x++ ) {\r\n\t\t\tfor( var y = 0; y < map.height; y++ ) {\r\n\t\t\t\tif( (tile = map.data[y][x]) ) {\r\n\t\t\t\t\tctx.drawImage(\r\n\t\t\t\t\t\tts, \r\n\t\t\t\t\t\tMath.floor(((tile-1) * s) % ws),\r\n\t\t\t\t\t\tMath.floor((tile-1) * s / ws) * s,\r\n\t\t\t\t\t\ts, s,\r\n\t\t\t\t\t\tx * s, y * s,\r\n\t\t\t\t\t\ts, s\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tvar mapContainer = ig.$new('div');\r\n\t\tmapContainer.className = 'ig_debug_map_container';\r\n\t\tmapContainer.style.width = map.width * s + 'px';\r\n\t\tmapContainer.style.height = map.height * s + 'px';\r\n\t\t\r\n\t\tvar mapScreen = ig.$new('div');\r\n\t\tmapScreen.className = 'ig_debug_map_screen';\r\n\t\tmapScreen.style.width = ((ig.system.width / map.tilesize) * s - 2) + 'px';\r\n\t\tmapScreen.style.height = ((ig.system.height / map.tilesize) * s - 2) + 'px';\r\n\t\tthis.mapScreens[id] = mapScreen;\r\n\t\t\r\n\t\tmapContainer.appendChild( mapCanvas );\r\n\t\tmapContainer.appendChild( mapScreen );\r\n\t\tpanel.container.appendChild( mapContainer );\r\n\t},\r\n\t\r\n\t\r\n\tafterRun: function() {\r\n\t\t// Update the screen position DIV for each mini-map\r\n\t\tvar s = ig.system.scale;\r\n\t\tfor( var m = 0; m < this.maps.length; m++ ) {\r\n\t\t\tvar map = this.maps[m];\r\n\t\t\tvar screen = this.mapScreens[m];\r\n\t\t\t\r\n\t\t\tif( !map || !screen ) { // Quick sanity check\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar x = map.scroll.x / map.tilesize;\r\n\t\t\tvar y = map.scroll.y / map.tilesize;\r\n\t\t\t\r\n\t\t\tif( map.repeat ) {\r\n\t\t\t\tx %= map.width;\r\n\t\t\t\ty %= map.height;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tscreen.style.left = (x * s) + 'px';\r\n\t\t\tscreen.style.top = (y * s) + 'px';\r\n\t\t}\r\n\t}\r\n});\r\n\r\n\r\nig.debug.addPanel({\r\n\ttype: ig.DebugMapsPanel,\r\n\tname: 'maps',\r\n\tlabel: 'Background Maps'\r\n});\r\n\r\n\r\n});\n\n\n/** WEBPACK FOOTER **\n ** ./example/lib/impact/debug/maps-panel.js\n **/","ig.module(\r\n\t'impact.debug.menu'\r\n)\r\n.requires(\r\n\t'dom.ready',\r\n\t'impact.system'\r\n)\r\n.defines(function(){ \"use strict\";\r\n\r\n\r\nig.System.inject({\t\r\n\trun: function() {\r\n\t\tig.debug.beforeRun();\r\n\t\tthis.parent();\r\n\t\tig.debug.afterRun();\r\n\t},\r\n\t\r\n\tsetGameNow: function( gameClass ) {\r\n\t\tthis.parent( gameClass );\r\n\t\tig.debug.ready();\r\n\t}\r\n});\r\n\r\n\r\nig.Debug = ig.Class.extend({\r\n\toptions: {},\r\n\tpanels: {},\r\n\tnumbers:{},\r\n\tcontainer: null,\r\n\tpanelMenu: null,\r\n\tactivePanel: null,\r\n\t\r\n\tdebugTime: 0,\r\n\tdebugTickAvg: 0.016,\r\n\tdebugRealTime: Date.now(),\r\n\t\r\n\tinit: function() {\r\n\t\t// Inject the Stylesheet\r\n\t\tvar style = ig.$new('link');\r\n\t\tstyle.rel = 'stylesheet';\r\n\t\tstyle.type = 'text/css';\r\n\t\tstyle.href = ig.prefix + 'lib/impact/debug/debug.css';\r\n\t\tig.$('body')[0].appendChild( style );\r\n\r\n\t\t// Create the Debug Container\r\n\t\tthis.container = ig.$new('div');\r\n\t\tthis.container.className ='ig_debug';\r\n\t\tig.$('body')[0].appendChild( this.container );\r\n\t\t\r\n\t\t// Create and add the Menu Container\r\n\t\tthis.panelMenu = ig.$new('div');\r\n\t\tthis.panelMenu.innerHTML = '<div class=\"ig_debug_head\">Impact.Debug:</div>';\r\n\t\tthis.panelMenu.className ='ig_debug_panel_menu';\r\n\t\t\r\n\t\tthis.container.appendChild( this.panelMenu );\r\n\t\t\r\n\t\t// Create and add the Stats Container\r\n\t\tthis.numberContainer = ig.$new('div');\r\n\t\tthis.numberContainer.className ='ig_debug_stats';\r\n\t\tthis.panelMenu.appendChild( this.numberContainer );\r\n\t\t\r\n\t\t// Set ig.log(), ig.assert() and ig.show()\r\n\t\tif( window.console && window.console.log && window.console.assert ) {\r\n\t\t\t// Can't use .bind() on native functions in IE9 :/\r\n\t\t\tig.log = console.log.bind ? console.log.bind(console) : console.log;\r\n\t\t\tig.assert = console.assert.bind ? console.assert.bind(console) : console.assert;\r\n\t\t}\r\n\t\tig.show = this.showNumber.bind(this);\r\n\t},\r\n\t\r\n\t\r\n\taddNumber: function( name, width ) {\r\n\t\tvar number = ig.$new('span');\t\t\r\n\t\tthis.numberContainer.appendChild( number );\r\n\t\tthis.numberContainer.appendChild( document.createTextNode(name) );\r\n\t\t\r\n\t\tthis.numbers[name] = number;\r\n\t},\r\n\t\r\n\t\r\n\tshowNumber: function( name, number, width ) {\r\n\t\tif( !this.numbers[name] ) {\r\n\t\t\tthis.addNumber( name, width );\r\n\t\t}\r\n\t\tthis.numbers[name].textContent = number;\r\n\t},\r\n\t\r\n\t\r\n\taddPanel: function( panelDef ) {\r\n\t\t// Create the panel and options\r\n\t\tvar panel = new (panelDef.type)( panelDef.name, panelDef.label );\r\n\t\tif( panelDef.options ) {\r\n\t\t\tfor( var i = 0; i < panelDef.options.length; i++ ) {\r\n\t\t\t\tvar opt = panelDef.options[i];\r\n\t\t\t\tpanel.addOption( new ig.DebugOption(opt.name, opt.object, opt.property) );\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.panels[ panel.name ] = panel;\r\n\t\tpanel.container.style.display = 'none';\r\n\t\tthis.container.appendChild( panel.container );\r\n\t\t\r\n\t\t\r\n\t\t// Create the menu item\r\n\t\tvar menuItem = ig.$new('div');\r\n\t\tmenuItem.className = 'ig_debug_menu_item';\r\n\t\tmenuItem.textContent = panel.label;\r\n\t\tmenuItem.addEventListener(\r\n\t\t\t'click',\r\n\t\t\t(function(ev){ this.togglePanel(panel); }).bind(this),\r\n\t\t\tfalse\r\n\t\t);\r\n\t\tpanel.menuItem = menuItem;\r\n\t\t\r\n\t\t// Insert menu item in alphabetical order into the menu\r\n\t\tvar inserted = false;\r\n\t\tfor( var i = 1; i < this.panelMenu.childNodes.length; i++ ) {\r\n\t\t\tvar cn = this.panelMenu.childNodes[i];\r\n\t\t\tif( cn.textContent > panel.label ) {\r\n\t\t\t\tthis.panelMenu.insertBefore( menuItem, cn );\r\n\t\t\t\tinserted = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif( !inserted ) {\r\n\t\t\t// Not inserted? Append at the end!\r\n\t\t\tthis.panelMenu.appendChild( menuItem );\r\n\t\t}\r\n\t},\r\n\t\r\n\t\r\n\tshowPanel: function( name ) {\r\n\t\tthis.togglePanel( this.panels[name] );\r\n\t},\r\n\t\r\n\t\r\n\ttogglePanel: function( panel ) {\r\n\t\tif( panel != this.activePanel && this.activePanel ) {\r\n\t\t\tthis.activePanel.toggle( false );\r\n\t\t\tthis.activePanel.menuItem.className = 'ig_debug_menu_item';\r\n\t\t\tthis.activePanel = null;\r\n\t\t}\r\n\t\t\r\n\t\tvar dsp = panel.container.style.display;\r\n\t\tvar active = (dsp != 'block');\r\n\t\tpanel.toggle( active );\r\n\t\tpanel.menuItem.className = 'ig_debug_menu_item' + (active ? ' active' : '');\r\n\t\t\r\n\t\tif( active ) {\r\n\t\t\tthis.activePanel = panel;\r\n\t\t}\r\n\t},\r\n\t\r\n\t\r\n\tready: function() {\r\n\t\tfor( var p in this.panels ) {\r\n\t\t\tthis.panels[p].ready();\r\n\t\t}\r\n\t},\r\n\t\r\n\t\r\n\tbeforeRun: function() {\r\n\t\tvar timeBeforeRun = Date.now();\r\n\t\tthis.debugTickAvg = this.debugTickAvg * 0.8 + (timeBeforeRun - this.debugRealTime) * 0.2;\r\n\t\tthis.debugRealTime = timeBeforeRun;\r\n\t\t\r\n\t\tif( this.activePanel ) {\r\n\t\t\tthis.activePanel.beforeRun();\r\n\t\t}\r\n\t},\r\n\t\r\n\t\r\n\tafterRun: function() {\r\n\t\tvar frameTime = Date.now() - this.debugRealTime;\r\n\t\tvar nextFrameDue = (1000/ig.system.fps) - frameTime;\r\n\t\t\r\n\t\tthis.debugTime = this.debugTime * 0.8 + frameTime * 0.2;\r\n\t\t\r\n\t\t\r\n\t\tif( this.activePanel ) {\r\n\t\t\tthis.activePanel.afterRun();\r\n\t\t}\r\n\t\t\r\n\t\tthis.showNumber( 'ms',  this.debugTime.toFixed(2) );\r\n\t\tthis.showNumber( 'fps',  Math.round(1000/this.debugTickAvg) );\r\n\t\tthis.showNumber( 'draws', ig.Image.drawCount );\r\n\t\tif( ig.game && ig.game.entities ) {\r\n\t\t\tthis.showNumber( 'entities', ig.game.entities.length );\r\n\t\t}\r\n\t\tig.Image.drawCount = 0;\r\n\t}\r\n});\r\n\r\n\r\n\r\nig.DebugPanel = ig.Class.extend({\r\n\tactive: false,\r\n\tcontainer: null,\r\n\toptions: [],\r\n\tpanels: [],\r\n\tlabel: '',\r\n\tname: '',\r\n\t\r\n\t\r\n\tinit: function( name, label ) {\r\n\t\tthis.name = name;\r\n\t\tthis.label = label;\r\n\t\tthis.container = ig.$new('div');\r\n\t\tthis.container.className = 'ig_debug_panel ' + this.name;\r\n\t},\r\n\t\r\n\t\r\n\ttoggle: function( active ) {\r\n\t\tthis.active = active;\r\n\t\tthis.container.style.display = active ? 'block' : 'none';\r\n\t},\r\n\t\r\n\t\r\n\taddPanel: function( panel ) {\r\n\t\tthis.panels.push( panel );\r\n\t\tthis.container.appendChild( panel.container );\r\n\t},\r\n\t\r\n\t\r\n\taddOption: function( option ) {\r\n\t\tthis.options.push( option );\r\n\t\tthis.container.appendChild( option.container );\r\n\t},\r\n\t\r\n\t\r\n\tready: function(){},\r\n\tbeforeRun: function(){},\r\n\tafterRun: function(){}\r\n});\r\n\r\n\r\n\r\nig.DebugOption = ig.Class.extend({\r\n\tname: '',\r\n\tlabelName: '',\r\n\tclassName: 'ig_debug_option',\r\n\tlabel: null,\r\n\tmark: null,\r\n\tcontainer: null,\r\n\tactive: false,\r\n\t\r\n\tcolors: {\r\n\t\tenabled: '#fff',\r\n\t\tdisabled: '#444'\r\n\t},\r\n\t\r\n\t\r\n\tinit: function( name, object, property ) {\r\n\t\tthis.name = name;\r\n\t\tthis.object = object;\r\n\t\tthis.property = property;\r\n\t\t\r\n\t\tthis.active = this.object[this.property];\r\n\t\t\r\n\t\tthis.container = ig.$new('div');\r\n\t\tthis.container.className = 'ig_debug_option';\r\n\t\t\r\n\t\tthis.label = ig.$new('span');\r\n\t\tthis.label.className = 'ig_debug_label';\r\n\t\tthis.label.textContent = this.name;\r\n\t\t\r\n\t\tthis.mark = ig.$new('span');\r\n\t\tthis.mark.className = 'ig_debug_label_mark';\r\n\t\t\r\n\t\tthis.container.appendChild( this.mark );\r\n\t\tthis.container.appendChild( this.label );\r\n\t\tthis.container.addEventListener( 'click', this.click.bind(this), false );\r\n\t\t\r\n\t\tthis.setLabel();\r\n\t},\r\n\t\r\n\t\r\n\tsetLabel: function() {\r\n\t\tthis.mark.style.backgroundColor = this.active ? this.colors.enabled : this.colors.disabled;\r\n\t},\r\n\t\r\n\t\r\n\tclick: function( ev ) {\r\n\t\tthis.active = !this.active;\r\n\t\tthis.object[this.property] = this.active;\r\n\t\tthis.setLabel();\r\n\t\t\r\n\t\tev.stopPropagation();\r\n\t\tev.preventDefault();\r\n\t\treturn false;\r\n\t}\r\n});\r\n\r\n\r\n\r\n// Create the debug instance!\r\nig.debug = new ig.Debug();\r\n\r\n});\n\n\n/** WEBPACK FOOTER **\n ** ./example/lib/impact/debug/menu.js\n **/","ig.module(\n\t'impact.entity-pool'\n)\n.requires(\n\t'impact.game'\n)\n.defines(function(){ \"use strict\";\n\nig.EntityPool = {\n\tpools: {},\n\t\t\n\tmixin: { \n\t\tstaticInstantiate: function( x, y, settings ) {\n\t\t\treturn ig.EntityPool.getFromPool( this.classId, x, y, settings );\n\t\t},\n\t\t\n\t\terase: function() {\n\t\t\tig.EntityPool.putInPool( this );\n\t\t}\n\t},\n\t\n\tenableFor: function( Class ) {\n\t\tClass.inject(this.mixin);\n\t},\n\t\n\tgetFromPool: function( classId, x, y, settings ) {\n\t\tvar pool = this.pools[classId];\n\t\tif( !pool || !pool.length ) { return null; }\n\t\t\n\t\tvar instance = pool.pop();\n\t\tinstance.reset(x, y, settings);\n\t\treturn instance;\n\t},\n\t\n\tputInPool: function( instance ) {\n\t\tif( !this.pools[instance.classId] ) {\n\t\t\tthis.pools[instance.classId] = [instance];\n\t\t}\n\t\telse {\n\t\t\tthis.pools[instance.classId].push(instance);\n\t\t}\n\t},\n\t\n\tdrainPool: function( classId ) {\n\t\tdelete this.pools[classId];\n\t},\n\t\n\tdrainAllPools: function() {\n\t\tthis.pools = {};\n\t}\n};\n\nig.Game.inject({\n\tloadLevel: function( data ) {\n\t\tig.EntityPool.drainAllPools();\n\t\tthis.parent(data);\n\t}\n});\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./example/lib/impact/entity-pool.js\n **/","ig.module(\n\t'impact.entity'\n)\n.requires(\n\t'impact.animation',\n\t'impact.impact'\n)\n.defines(function(){ \"use strict\";\n\nig.Entity = ig.Class.extend({\n\tid: 0,\n\tsettings: {},\n\t\n\tsize: {x: 16, y:16},\n\toffset: {x: 0, y: 0},\n\t\n\tpos: {x: 0, y:0},\n\tlast: {x: 0, y:0},\n\tvel: {x: 0, y: 0},\n\taccel: {x: 0, y: 0},\n\tfriction: {x: 0, y: 0},\n\tmaxVel: {x: 100, y: 100},\n\tzIndex: 0,\n\tgravityFactor: 1,\n\tstanding: false,\n\tbounciness: 0,\n\tminBounceVelocity: 40,\n    __id: null,\n\t\n\tanims: {},\n\tanimSheet: null,\n\tcurrentAnim: null,\n\thealth: 10,\n\t\n\ttype: 0, // TYPE.NONE\n\tcheckAgainst: 0, // TYPE.NONE\n\tcollides: 0, // COLLIDES.NEVER\n\t\n\t_killed: false,\n\t\n\tslopeStanding: {min: (44).toRad(), max: (136).toRad() },\n\t\n\tinit: function( x, y, settings ) {\n\t\tthis.id = ++ig.Entity._lastId;\n\t\tthis.pos.x = this.last.x = x;\n\t\tthis.pos.y = this.last.y = y;\n\n\t\tig.merge( this, settings );\n\t},\n\t\n\treset: function( x, y, settings ) {\n\t\tvar proto = this.constructor.prototype;\n\t\tthis.pos.x = x;\n\t\tthis.pos.y = y;\n\t\tthis.last.x = x;\n\t\tthis.last.y = y;\n\t\tthis.vel.x = proto.vel.x;\n\t\tthis.vel.y = proto.vel.y;\n\t\tthis.accel.x = proto.accel.x;\n\t\tthis.accel.y = proto.accel.y;\n\t\tthis.health = proto.health;\n\t\tthis._killed = proto._killed;\n\t\tthis.standing = proto.standing;\n\t\t\n\t\tthis.type = proto.type;\n\t\tthis.checkAgainst = proto.checkAgainst;\n\t\tthis.collides = proto.collides;\n\t\t\n\t\tig.merge( this, settings );\n\t},\n\t\n\taddAnim: function( name, frameTime, sequence, stop ) {\n\t\tif( !this.animSheet ) {\n\t\t\tthrow( 'No animSheet to add the animation '+name+' to.' );\n\t\t}\n\t\tvar a = new ig.Animation( this.animSheet, frameTime, sequence, stop );\n\t\tthis.anims[name] = a;\n\t\tif( !this.currentAnim ) {\n\t\t\tthis.currentAnim = a;\n\t\t}\n\t\t\n\t\treturn a;\n\t},\n\t\n\tupdate: function() {\n\t\tthis.last.x = this.pos.x;\n\t\tthis.last.y = this.pos.y;\n\t\tthis.vel.y += ig.game.gravity * ig.system.tick * this.gravityFactor;\n\t\tthis.vel.x = this.getNewVelocity( this.vel.x, this.accel.x, this.friction.x, this.maxVel.x );\n\t\tthis.vel.y = this.getNewVelocity( this.vel.y, this.accel.y, this.friction.y, this.maxVel.y );\n\n\t\t// movement & collision\n\t\tvar mx = this.vel.x * ig.system.tick;\n\t\tvar my = this.vel.y * ig.system.tick;\n\t\tvar res = ig.game.collisionMap.trace( \n\t\t\tthis.pos.x, this.pos.y, mx, my, this.size.x, this.size.y\n\t\t);\n\n\t\tthis.handleMovementTrace( res );\n\n\t\tif( this.currentAnim ) {\n\t\t\tthis.currentAnim.update();\n\t\t}\n\t},\n\t\n\t\n\tgetNewVelocity: function( vel, accel, friction, max ) {\n\t\tif( accel ) {\n\t\t\treturn ( vel + accel * ig.system.tick ).limit( -max, max );\n\t\t}\n\t\telse if( friction ) {\n\t\t\tvar delta = friction * ig.system.tick;\n\t\t\t\n\t\t\tif( vel - delta > 0) {\n\t\t\t\treturn vel - delta;\n\t\t\t} \n\t\t\telse if( vel + delta < 0 ) {\n\t\t\t\treturn vel + delta;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t}\n\n\t\treturn vel.limit( -max, max );\n\t},\n\t\n\t\n\thandleMovementTrace: function( res ) {\n\t\tthis.standing = false;\n\t\t\n\t\tif( res.collision.y ) {\n\t\t\tif( this.bounciness > 0 && Math.abs(this.vel.y) > this.minBounceVelocity ) {\n\t\t\t\tthis.vel.y *= -this.bounciness;\t\t\t\t\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif( this.vel.y > 0 ) {\n\t\t\t\t\tthis.standing = true;\n\t\t\t\t}\n\t\t\t\tthis.vel.y = 0;\n\t\t\t}\n\t\t}\n\t\tif( res.collision.x ) {\n\t\t\tif( this.bounciness > 0 && Math.abs(this.vel.x) > this.minBounceVelocity ) {\n\t\t\t\tthis.vel.x *= -this.bounciness;\t\t\t\t\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.vel.x = 0;\n\t\t\t}\n\t\t}\n\t\tif( res.collision.slope ) {\n\t\t\tvar s = res.collision.slope;\n\t\t\t\n\t\t\tif( this.bounciness > 0 ) {\n\t\t\t\tvar proj = this.vel.x * s.nx + this.vel.y * s.ny;\n\t\t\t\t\n\t\t\t\tthis.vel.x = (this.vel.x - s.nx * proj * 2) * this.bounciness;\n\t\t\t\tthis.vel.y = (this.vel.y - s.ny * proj * 2) * this.bounciness;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar lengthSquared = s.x * s.x + s.y * s.y;\n\t\t\t\tvar dot = (this.vel.x * s.x + this.vel.y * s.y)/lengthSquared;\n\t\t\t\t\n\t\t\t\tthis.vel.x = s.x * dot;\n\t\t\t\tthis.vel.y = s.y * dot;\n\t\t\t\t\n\t\t\t\tvar angle = Math.atan2( s.x, s.y );\n\t\t\t\tif( angle > this.slopeStanding.min && angle < this.slopeStanding.max ) {\n\t\t\t\t\tthis.standing = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.pos = res.pos;\n\t},\n\t\n\t\n\tdraw: function() {\n\t\tif( this.currentAnim ) {\n\t\t\tthis.currentAnim.draw(\n\t\t\t\tthis.pos.x - this.offset.x - ig.game._rscreen.x,\n\t\t\t\tthis.pos.y - this.offset.y - ig.game._rscreen.y\n\t\t\t);\n\t\t}\n\t},\n\t\n\t\n\tkill: function() {\n\t\tig.game.removeEntity( this );\n\t},\n\t\n\t\n\treceiveDamage: function( amount, from ) {\n\t\tthis.health -= amount;\n\t\tif( this.health <= 0 ) {\n\t\t\tthis.kill();\n\t\t}\n\t},\n\t\n\t\n\ttouches: function( other ) {\t\t\n\t\treturn !(\n\t\t\tthis.pos.x >= other.pos.x + other.size.x ||\n\t\t\tthis.pos.x + this.size.x <= other.pos.x ||\n\t\t\tthis.pos.y >= other.pos.y + other.size.y ||\n\t\t\tthis.pos.y + this.size.y <= other.pos.y\n\t\t);\n\t},\n\t\n\t\n\tdistanceTo: function( other ) {\n\t\tvar xd = (this.pos.x + this.size.x/2) - (other.pos.x + other.size.x/2); \n\t\tvar yd = (this.pos.y + this.size.y/2) - (other.pos.y + other.size.y/2);\n\t\treturn Math.sqrt( xd*xd + yd*yd );\n\t},\n\t\n\t\n\tangleTo: function( other ) {\n\t\treturn Math.atan2(\n\t\t\t(other.pos.y + other.size.y/2) - (this.pos.y + this.size.y/2),\n\t\t\t(other.pos.x + other.size.x/2) - (this.pos.x + this.size.x/2)\n\t\t);\n\t},\n\t\n\t\n\tcheck: function( other ) {},\n\tcollideWith: function( other, axis ) {},\n\tready: function() {},\n\terase: function() {}\n});\n\n\n// Last used entity id; incremented with each spawned entity\n\nig.Entity._lastId = 0;\n\n\n// Collision Types - Determine if and how entities collide with each other\n\n// In ACTIVE vs. LITE or FIXED vs. ANY collisions, only the \"weak\" entity moves,\n// while the other one stays fixed. In ACTIVE vs. ACTIVE and ACTIVE vs. PASSIVE\n// collisions, both entities are moved. LITE or PASSIVE entities don't collide\n// with other LITE or PASSIVE entities at all. The behaiviour for FIXED vs.\n// FIXED collisions is undefined.\n\nig.Entity.COLLIDES = {\n\tNEVER: 0,\n\tLITE: 1,\n\tPASSIVE: 2,\n\tACTIVE: 4,\n\tFIXED: 8\n};\n\n\n// Entity Types - used for checks\n\nig.Entity.TYPE = {\n\tNONE: 0,\n\tA: 1,\n\tB: 2,\n\tBOTH: 3\n};\n\n\n\nig.Entity.checkPair = function( a, b ) {\n\t\n\t// Do these entities want checks?\n\tif( a.checkAgainst & b.type ) {\n\t\ta.check( b );\n\t}\n\t\n\tif( b.checkAgainst & a.type ) {\n\t\tb.check( a );\n\t}\n\t\n\t// If this pair allows collision, solve it! At least one entity must\n\t// collide ACTIVE or FIXED, while the other one must not collide NEVER.\n\tif(\n\t\ta.collides && b.collides &&\n\t\ta.collides + b.collides > ig.Entity.COLLIDES.ACTIVE\n\t) {\n\t\tig.Entity.solveCollision( a, b );\n\t}\n};\n\n\nig.Entity.solveCollision = function( a, b ) {\n\t\n\t// If one entity is FIXED, or the other entity is LITE, the weak\n\t// (FIXED/NON-LITE) entity won't move in collision response\n\tvar weak = null;\n\tif(\n\t\ta.collides == ig.Entity.COLLIDES.LITE ||\n\t\tb.collides == ig.Entity.COLLIDES.FIXED\n\t) {\n\t\tweak = a;\n\t}\n\telse if(\n\t\tb.collides == ig.Entity.COLLIDES.LITE ||\n\t\ta.collides == ig.Entity.COLLIDES.FIXED\n\t) {\n\t\tweak = b;\n\t}\n\t\t\n\t\n\t// Did they already overlap on the X-axis in the last frame? If so,\n\t// this must be a vertical collision!\n\tif(\n\t\ta.last.x + a.size.x > b.last.x &&\n\t\ta.last.x < b.last.x + b.size.x\n\t) {\n\t\t// Which one is on top?\n\t\tif( a.last.y < b.last.y ) {\n\t\t\tig.Entity.seperateOnYAxis( a, b, weak );\n\t\t}\n\t\telse {\n\t\t\tig.Entity.seperateOnYAxis( b, a, weak );\n\t\t}\n\t\ta.collideWith( b, 'y' );\n\t\tb.collideWith( a, 'y' );\n\t}\n\t\n\t// Horizontal collision\n\telse if(\n\t\ta.last.y + a.size.y > b.last.y &&\n\t\ta.last.y < b.last.y + b.size.y\n\t){\n\t\t// Which one is on the left?\n\t\tif( a.last.x < b.last.x ) {\n\t\t\tig.Entity.seperateOnXAxis( a, b, weak );\n\t\t}\n\t\telse {\n\t\t\tig.Entity.seperateOnXAxis( b, a, weak );\n\t\t}\n\t\ta.collideWith( b, 'x' );\n\t\tb.collideWith( a, 'x' );\n\t}\n};\n\n\n// FIXME: This is a mess. Instead of doing all the movements here, the entities\n// should get notified of the collision (with all details) and resolve it\n// themselfs.\n\nig.Entity.seperateOnXAxis = function( left, right, weak ) {\n\tvar nudge = (left.pos.x + left.size.x - right.pos.x);\n\t\n\t// We have a weak entity, so just move this one\n\tif( weak ) {\n\t\tvar strong = left === weak ? right : left;\n\t\tweak.vel.x = -weak.vel.x * weak.bounciness + strong.vel.x;\n\t\t\n\t\tvar resWeak = ig.game.collisionMap.trace( \n\t\t\tweak.pos.x, weak.pos.y, weak == left ? -nudge : nudge, 0, weak.size.x, weak.size.y\n\t\t);\n\t\tweak.pos.x = resWeak.pos.x;\n\t}\n\t\n\t// Normal collision - both move\n\telse {\n\t\tvar v2 = (left.vel.x - right.vel.x)/2;\n\t\tleft.vel.x = -v2;\n\t\tright.vel.x = v2;\n\t\n\t\tvar resLeft = ig.game.collisionMap.trace( \n\t\t\tleft.pos.x, left.pos.y, -nudge/2, 0, left.size.x, left.size.y\n\t\t);\n\t\tleft.pos.x = Math.floor(resLeft.pos.x);\n\t\t\n\t\tvar resRight = ig.game.collisionMap.trace( \n\t\t\tright.pos.x, right.pos.y, nudge/2, 0, right.size.x, right.size.y\n\t\t);\n\t\tright.pos.x = Math.ceil(resRight.pos.x);\n\t}\n};\n\n\nig.Entity.seperateOnYAxis = function( top, bottom, weak ) {\n\tvar nudge = (top.pos.y + top.size.y - bottom.pos.y);\n\t\n\t// We have a weak entity, so just move this one\n\tif( weak ) {\n\t\tvar strong = top === weak ? bottom : top;\n\t\tweak.vel.y = -weak.vel.y * weak.bounciness + strong.vel.y;\n\t\t\n\t\t// Riding on a platform?\n\t\tvar nudgeX = 0;\n\t\tif( weak == top && Math.abs(weak.vel.y - strong.vel.y) < weak.minBounceVelocity ) {\n\t\t\tweak.standing = true;\n\t\t\tnudgeX = strong.vel.x * ig.system.tick;\n\t\t}\n\t\t\n\t\tvar resWeak = ig.game.collisionMap.trace( \n\t\t\tweak.pos.x, weak.pos.y, nudgeX, weak == top ? -nudge : nudge, weak.size.x, weak.size.y\n\t\t);\n\t\tweak.pos.y = resWeak.pos.y;\n\t\tweak.pos.x = resWeak.pos.x;\n\t}\n\t\n\t// Bottom entity is standing - just bounce the top one\n\telse if( ig.game.gravity && (bottom.standing || top.vel.y > 0) ) {\t\n\t\tvar resTop = ig.game.collisionMap.trace( \n\t\t\ttop.pos.x, top.pos.y, 0, -(top.pos.y + top.size.y - bottom.pos.y), top.size.x, top.size.y\n\t\t);\n\t\ttop.pos.y = resTop.pos.y;\n\t\t\n\t\tif( top.bounciness > 0 && top.vel.y > top.minBounceVelocity ) {\n\t\t\ttop.vel.y *= -top.bounciness;\t\t\n\t\t}\n\t\telse {\n\t\t\ttop.standing = true;\n\t\t\ttop.vel.y = 0;\n\t\t}\n\t}\n\t\n\t// Normal collision - both move\n\telse {\n\t\tvar v2 = (top.vel.y - bottom.vel.y)/2;\n\t\ttop.vel.y = -v2;\n\t\tbottom.vel.y = v2;\n\t\t\n\t\tvar nudgeX = bottom.vel.x * ig.system.tick;\n\t\tvar resTop = ig.game.collisionMap.trace( \n\t\t\ttop.pos.x, top.pos.y, nudgeX, -nudge/2, top.size.x, top.size.y\n\t\t);\n\t\ttop.pos.y = resTop.pos.y;\n\t\t\n\t\tvar resBottom = ig.game.collisionMap.trace( \n\t\t\tbottom.pos.x, bottom.pos.y, 0, nudge/2, bottom.size.x, bottom.size.y\n\t\t);\n\t\tbottom.pos.y = resBottom.pos.y;\n\t}\n};\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./example/lib/impact/entity.js\n **/","ig.module(\n\t'impact.font'\n)\n.requires(\n\t'impact.image'\n)\n.defines(function(){ \"use strict\";\n\n\nig.Font = ig.Image.extend({\n\twidthMap: [],\n\tindices: [],\n\tfirstChar: 32,\n\talpha: 1,\n\tletterSpacing: 1,\n\tlineSpacing: 0,\n\t\n\t\n\tonload: function( ev ) {\n\t\tthis._loadMetrics( this.data );\n\t\tthis.parent( ev );\n\t},\n\n\n\twidthForString: function( text ) {\n\t\t// Multiline?\n\t\tif( text.indexOf('\\n') !== -1 ) {\n\t\t\tvar lines = text.split( '\\n' );\n\t\t\tvar width = 0;\n\t\t\tfor( var i = 0; i < lines.length; i++ ) {\n\t\t\t\twidth = Math.max( width, this._widthForLine(lines[i]) );\n\t\t\t}\n\t\t\treturn width;\n\t\t}\n\t\telse {\n\t\t\treturn this._widthForLine( text );\n\t\t}\n\t},\n\n\t\n\t_widthForLine: function( text ) {\n\t\tvar width = 0;\n\t\tfor( var i = 0; i < text.length; i++ ) {\n\t\t\twidth += this.widthMap[text.charCodeAt(i) - this.firstChar] + this.letterSpacing;\n\t\t}\n\t\treturn width;\n\t},\n\n\n\theightForString: function( text ) {\n\t\treturn text.split('\\n').length * (this.height + this.lineSpacing);\n\t},\n\t\n\t\n\tdraw: function( text, x, y, align ) {\n\t\tif( typeof(text) != 'string' ) {\n\t\t\ttext = text.toString();\n\t\t}\n\t\t\n\t\t// Multiline?\n\t\tif( text.indexOf('\\n') !== -1 ) {\n\t\t\tvar lines = text.split( '\\n' );\n\t\t\tvar lineHeight = this.height + this.lineSpacing;\n\t\t\tfor( var i = 0; i < lines.length; i++ ) {\n\t\t\t\tthis.draw( lines[i], x, y + i * lineHeight, align );\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif( align == ig.Font.ALIGN.RIGHT || align == ig.Font.ALIGN.CENTER ) {\n\t\t\tvar width = this._widthForLine( text );\n\t\t\tx -= align == ig.Font.ALIGN.CENTER ? width/2 : width;\n\t\t}\n\t\t\n\n\t\tif( this.alpha !== 1 ) {\n\t\t\tig.system.context.globalAlpha = this.alpha;\n\t\t}\n\n\t\tfor( var i = 0; i < text.length; i++ ) {\n\t\t\tvar c = text.charCodeAt(i);\n\t\t\tx += this._drawChar( c - this.firstChar, x, y );\n\t\t}\n\n\t\tif( this.alpha !== 1 ) {\n\t\t\tig.system.context.globalAlpha = 1;\n\t\t}\n\t\tig.Image.drawCount += text.length;\n\t},\n\t\n\t\n\t_drawChar: function( c, targetX, targetY ) {\n\t\tif( !this.loaded || c < 0 || c >= this.indices.length ) { return 0; }\n\t\t\n\t\tvar scale = ig.system.scale;\n\t\t\n\t\t\n\t\tvar charX = this.indices[c] * scale;\n\t\tvar charY = 0;\n\t\tvar charWidth = this.widthMap[c] * scale;\n\t\tvar charHeight = (this.height-2) * scale;\t\t\n\t\t\n\t\tig.system.context.drawImage( \n\t\t\tthis.data,\n\t\t\tcharX, charY,\n\t\t\tcharWidth, charHeight,\n\t\t\tig.system.getDrawPos(targetX), ig.system.getDrawPos(targetY),\n\t\t\tcharWidth, charHeight\n\t\t);\n\t\t\n\t\treturn this.widthMap[c] + this.letterSpacing;\n\t},\n\t\n\t\n\t_loadMetrics: function( image ) {\n\t\t// Draw the bottommost line of this font image into an offscreen canvas\n\t\t// and analyze it pixel by pixel.\n\t\t// A run of non-transparent pixels represents a character and its width\n\t\t\n\t\tthis.height = image.height-1;\n\t\tthis.widthMap = [];\n\t\tthis.indices = [];\n\t\t\n\t\tvar px = ig.getImagePixels( image, 0, image.height-1, image.width, 1 );\n\t\t\n\t\tvar currentChar = 0;\n\t\tvar currentWidth = 0;\n\t\tfor( var x = 0; x < image.width; x++ ) {\n\t\t\tvar index = x * 4 + 3; // alpha component of this pixel\n\t\t\tif( px.data[index] > 127 ) {\n\t\t\t\tcurrentWidth++;\n\t\t\t}\n\t\t\telse if( px.data[index] < 128 && currentWidth ) {\n\t\t\t\tthis.widthMap.push( currentWidth );\n\t\t\t\tthis.indices.push( x-currentWidth );\n\t\t\t\tcurrentChar++;\n\t\t\t\tcurrentWidth = 0;\n\t\t\t}\n\t\t}\n\t\tthis.widthMap.push( currentWidth );\n\t\tthis.indices.push( x-currentWidth );\n\t}\n});\n\n\nig.Font.ALIGN = {\n\tLEFT: 0,\n\tRIGHT: 1,\n\tCENTER: 2\n};\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./example/lib/impact/font.js\n **/","ig.module(\n\t'impact.game'\n)\n.requires(\n\t'impact.impact',\n\t'impact.entity',\n\t'impact.collision-map',\n\t'impact.background-map'\n)\n.defines(function(){ \"use strict\";\n\nig.Game = ig.Class.extend({\n\t\n\tclearColor: '#000000',\n\tgravity: 0,\n\tscreen: {x: 0, y: 0},\n\t_rscreen: {x: 0, y: 0},\n\t\n\tentities: [],\n\t\n\tnamedEntities: {},\n\tcollisionMap: ig.CollisionMap.staticNoCollision,\n\tbackgroundMaps: [],\n\tbackgroundAnims: {},\n\t\n\tautoSort: false,\n\tsortBy: null,\n\t\n\tcellSize: 64,\n\t\n\t_deferredKill: [],\n\t_levelToLoad: null,\n\t_doSortEntities: false,\n    \n\tstaticInstantiate: function() {\n\t\tthis.sortBy = this.sortBy || ig.Game.SORT.Z_INDEX;\n\t\tig.game = this;\n\t\treturn null;\n\t},\n\t\n\t\n\tloadLevel: function( data ) {\n\t\tthis.screen = {x: 0, y: 0};\n\n\t\t// Entities\n\t\tthis.entities = [];\n\t\tthis.namedEntities = {};\n\t\tfor( var i = 0; i < data.entities.length; i++ ) {\n\t\t\tvar ent = data.entities[i];\n\t\t\tthis.spawnEntity( ent.type, ent.x, ent.y, ent.settings );\n\t\t}\n\t\tthis.sortEntities();\n\t\t\n\t\t// Map Layer\n\t\tthis.collisionMap = ig.CollisionMap.staticNoCollision;\n\t\tthis.backgroundMaps = [];\n\t\tfor( var i = 0; i < data.layer.length; i++ ) {\n\t\t\tvar ld = data.layer[i];\n\t\t\tif( ld.name == 'collision' ) {\n\t\t\t\tthis.collisionMap = new ig.CollisionMap(ld.tilesize, ld.data );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar newMap = new ig.BackgroundMap(ld.tilesize, ld.data, ld.tilesetName);\n\t\t\t\tnewMap.anims = this.backgroundAnims[ld.tilesetName] || {};\n\t\t\t\tnewMap.repeat = ld.repeat;\n\t\t\t\tnewMap.distance = ld.distance;\n\t\t\t\tnewMap.foreground = !!ld.foreground;\n\t\t\t\tnewMap.preRender = !!ld.preRender;\n\t\t\t\tnewMap.name = ld.name;\n\t\t\t\tthis.backgroundMaps.push( newMap );\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Call post-init ready function on all entities\n\t\tfor( var i = 0; i < this.entities.length; i++ ) {\n\t\t\tthis.entities[i].ready();\n\t\t}\n\t},\n\t\n\t\n\tloadLevelDeferred: function( data ) {\n\t\tthis._levelToLoad = data;\n\t},\n\t\n\t\n\tgetMapByName: function( name ) {\n\t\tif( name == 'collision' ) {\n\t\t\treturn this.collisionMap;\n\t\t}\n\t\t\n\t\tfor( var i = 0; i < this.backgroundMaps.length; i++ ) {\n\t\t\tif( this.backgroundMaps[i].name == name ) {\n\t\t\t\treturn this.backgroundMaps[i];\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn null;\n\t},\n\t\n\t\n\tgetEntityByName: function( name ) {\n\t\treturn this.namedEntities[name];\n\t},\n\t\n\t\n\tgetEntitiesByType: function( type ) {\n\t\tvar entityClass = typeof(type) === 'string'\n\t\t\t? ig.global[type]\n\t\t\t: type;\n\t\t\t\n\t\tvar a = [];\n\t\tfor( var i = 0; i < this.entities.length; i++ ) {\n\t\t\tvar ent = this.entities[i];\n\t\t\tif( ent instanceof entityClass && !ent._killed ) {\n\t\t\t\ta.push( ent );\n\t\t\t}\n\t\t}\n\t\treturn a;\n\t},\n\t\n\t\n\tspawnEntity: function( type, x, y, settings ) {\n\t\tvar entityClass = typeof(type) === 'string'\n\t\t\t? ig.global[type]\n\t\t\t: type;\n\n\t\tif( !entityClass ) {\n\t\t\tthrow(\"Can't spawn entity of type \" + type);\n\t\t}\n\t\tvar ent = new (entityClass)( x, y, settings || {} );\n\t\tthis.entities.push( ent );\n\t\tif( ent.name ) {\n\t\t\tthis.namedEntities[ent.name] = ent;\n\t\t}\n\n\t\treturn ent;\n\t},\n\t\n\t\n\tsortEntities: function() {\n\t\tthis.entities.sort( this.sortBy );\n\t},\n\t\n\t\n\tsortEntitiesDeferred: function() {\n\t\tthis._doSortEntities = true;\n\t},\n\t\n\t\n\tremoveEntity: function( ent ) {\n\t\t// Remove this entity from the named entities\n\t\tif( ent.name ) {\n\t\t\tdelete this.namedEntities[ent.name];\n\t\t}\n\t\t\n\t\t// We can not remove the entity from the entities[] array in the midst\n\t\t// of an update cycle, so remember all killed entities and remove\n\t\t// them later.\n\t\t// Also make sure this entity doesn't collide anymore and won't get\n\t\t// updated or checked\n\t\tent._killed = true;\n\t\tent.type = ig.Entity.TYPE.NONE;\n\t\tent.checkAgainst = ig.Entity.TYPE.NONE;\n\t\tent.collides = ig.Entity.COLLIDES.NEVER;\n\t\tthis._deferredKill.push( ent );\n\t},\n\t\n\t\n\trun: function() {\n\t\tthis.update();\n\t\tthis.draw();\n\t},\n\t\n\t\n\tupdate: function(){\n\t\t// load new level?\n\t\tif( this._levelToLoad ) {\n\t\t\tthis.loadLevel( this._levelToLoad );\n\t\t\tthis._levelToLoad = null;\n\t\t}\n\n\t\t// update entities\n\t\tthis.updateEntities();\n\t\tthis.checkEntities();\n\t\t\n\t\t// remove all killed entities\n\t\tfor( var i = 0; i < this._deferredKill.length; i++ ) {\n\t\t\tthis._deferredKill[i].erase();\n\t\t\tthis.entities.erase( this._deferredKill[i] );\n\t\t}\n\t\tthis._deferredKill = [];\n\t\t\n\t\t// sort entities?\n\t\tif( this._doSortEntities || this.autoSort ) {\n\t\t\tthis.sortEntities();\n\t\t\tthis._doSortEntities = false;\n\t\t}\n\t\t\n\t\t// update background animations\n\t\tfor( var tileset in this.backgroundAnims ) {\n\t\t\tvar anims = this.backgroundAnims[tileset];\n\t\t\tfor( var a in anims ) {\n\t\t\t\tanims[a].update();\n\t\t\t}\n\t\t}\n\t},\n\t\n\t\n\tupdateEntities: function() {\n\t\tfor( var i = 0; i < this.entities.length; i++ ) {\n\t\t\tvar ent = this.entities[i];\n\t\t\tif( !ent._killed ) {\n\t\t\t\tent.update();\n\t\t\t}\n\t\t}\n\t},\n\t\n\t\n\tdraw: function(){\n\t\tif( this.clearColor ) {\n\t\t\tig.system.clear( this.clearColor );\n\t\t}\n\t\t\n\t\t// This is a bit of a circle jerk. Entities reference game._rscreen \n\t\t// instead of game.screen when drawing themselfs in order to be \n\t\t// \"synchronized\" to the rounded(?) screen position\n\t\tthis._rscreen.x = ig.system.getDrawPos(this.screen.x)/ig.system.scale;\n\t\tthis._rscreen.y = ig.system.getDrawPos(this.screen.y)/ig.system.scale;\n\t\t\n\t\t\n\t\tvar mapIndex;\n\t\tfor( mapIndex = 0; mapIndex < this.backgroundMaps.length; mapIndex++ ) {\n\t\t\tvar map = this.backgroundMaps[mapIndex];\n\t\t\tif( map.foreground ) {\n\t\t\t\t// All foreground layers are drawn after the entities\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tmap.setScreenPos( this.screen.x, this.screen.y );\n\t\t\tmap.draw();\n\t\t}\n\t\t\n\t\t\n\t\tthis.drawEntities();\n\t\t\n\t\t\n\t\tfor( mapIndex; mapIndex < this.backgroundMaps.length; mapIndex++ ) {\n\t\t\tvar map = this.backgroundMaps[mapIndex];\n\t\t\tmap.setScreenPos( this.screen.x, this.screen.y );\n\t\t\tmap.draw();\n\t\t}\n\t},\n\t\n\t\n\tdrawEntities: function() {\n\t\tfor( var i = 0; i < this.entities.length; i++ ) {\n\t\t\tthis.entities[i].draw();\n\t\t}\n\t},\n\n\t\n\tcheckEntities: function() {\n\t\t// Insert all entities into a spatial hash and check them against any\n\t\t// other entity that already resides in the same cell. Entities that are\n\t\t// bigger than a single cell, are inserted into each one they intersect\n\t\t// with.\n\t\t\n\t\t// A list of entities, which the current one was already checked with,\n\t\t// is maintained for each entity.\n\t\t\n\t\tvar hash = {};\n\t\tfor( var e = 0; e < this.entities.length; e++ ) {\n\t\t\tvar entity = this.entities[e];\n\t\t\t\n\t\t\t// Skip entities that don't check, don't get checked and don't collide\n\t\t\tif(\n\t\t\t\tentity.type == ig.Entity.TYPE.NONE &&\n\t\t\t\tentity.checkAgainst == ig.Entity.TYPE.NONE &&\n\t\t\t\tentity.collides == ig.Entity.COLLIDES.NEVER\n\t\t\t) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t\n\t\t\tvar checked = {},\n\t\t\t\txmin = Math.floor( entity.pos.x/this.cellSize ),\n\t\t\t\tymin = Math.floor( entity.pos.y/this.cellSize ),\n\t\t\t\txmax = Math.floor( (entity.pos.x+entity.size.x)/this.cellSize ) + 1,\n\t\t\t\tymax = Math.floor( (entity.pos.y+entity.size.y)/this.cellSize ) + 1;\n\t\t\t\n\t\t\tfor( var x = xmin; x < xmax; x++ ) {\n\t\t\t\tfor( var y = ymin; y < ymax; y++ ) {\n\t\t\t\t\t\n\t\t\t\t\t// Current cell is empty - create it and insert!\n\t\t\t\t\tif( !hash[x] ) {\n\t\t\t\t\t\thash[x] = {};\n\t\t\t\t\t\thash[x][y] = [entity];\n\t\t\t\t\t}\n\t\t\t\t\telse if( !hash[x][y] ) {\n\t\t\t\t\t\thash[x][y] = [entity];\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// Check against each entity in this cell, then insert\n\t\t\t\t\telse {\n\t\t\t\t\t\tvar cell = hash[x][y];\n\t\t\t\t\t\tfor( var c = 0; c < cell.length; c++ ) {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// Intersects and wasn't already checkd?\n\t\t\t\t\t\t\tif( entity.touches(cell[c]) && !checked[cell[c].id] ) {\n\t\t\t\t\t\t\t\tchecked[cell[c].id] = true;\n\t\t\t\t\t\t\t\tig.Entity.checkPair( entity, cell[c] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcell.push(entity);\n\t\t\t\t\t}\n\t\t\t\t} // end for y size\n\t\t\t} // end for x size\n\t\t} // end for entities\n\t}\n});\n\nig.Game.SORT = {\n\tZ_INDEX: function( a, b ){ return a.zIndex - b.zIndex; },\n\tPOS_X: function( a, b ){ return (a.pos.x+a.size.x) - (b.pos.x+b.size.x); },\n\tPOS_Y: function( a, b ){ return (a.pos.y+a.size.y) - (b.pos.y+b.size.y); }\n};\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./example/lib/impact/game.js\n **/","ig.module(\n\t'impact.image'\n)\n.defines(function(){ \"use strict\";\n\nig.Image = ig.Class.extend({\n\tdata: null,\n\twidth: 0,\n\theight: 0,\n\tloaded: false,\n\tfailed: false,\n\tloadCallback: null,\n\tpath: '',\n\t\n\t\n\tstaticInstantiate: function( path ) {\n\t\treturn ig.Image.cache[path] || null;\n\t},\n\t\n\t\n\tinit: function( path ) {\n\t\tthis.path = path;\n\t\tthis.load();\n\t},\n\t\n\t\n\tload: function( loadCallback ) {\n\t\tif( this.loaded ) {\n\t\t\tif( loadCallback ) {\n\t\t\t\tloadCallback( this.path, true );\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\telse if( !this.loaded && ig.ready ) {\n\t\t\tthis.loadCallback = loadCallback || null;\n\t\t\t\n\t\t\tthis.data = new Image();\n\t\t\tthis.data.onload = this.onload.bind(this);\n\t\t\tthis.data.onerror = this.onerror.bind(this);\n\t\t\tthis.data.src = ig.prefix + this.path + ig.nocache;\n\t\t}\n\t\telse {\n\t\t\tig.addResource( this );\n\t\t}\n\t\t\n\t\tig.Image.cache[this.path] = this;\n\t},\n\t\n\t\n\treload: function() { \n\t\tthis.loaded = false;\n\t\tthis.data = new Image();\n\t\tthis.data.onload = this.onload.bind(this);\n\t\tthis.data.src = this.path + '?' + Date.now();\n\t},\n\t\n\t\n\tonload: function( event ) {\n\t\tthis.width = this.data.width;\n\t\tthis.height = this.data.height;\n\t\tthis.loaded = true;\n\t\t\n\t\tif( ig.system.scale != 1 ) {\n\t\t\tthis.resize( ig.system.scale );\n\t\t}\n\t\t\n\t\tif( this.loadCallback ) {\n\t\t\tthis.loadCallback( this.path, true );\n\t\t}\n\t},\n\t\n\t\n\tonerror: function( event ) {\n\t\tthis.failed = true;\n\t\t\n\t\tif( this.loadCallback ) {\n\t\t\tthis.loadCallback( this.path, false );\n\t\t}\n\t},\n\t\n\t\n\tresize: function( scale ) {\n\t\t// Nearest-Neighbor scaling\n\t\t\n\t\t// The original image is drawn into an offscreen canvas of the same size\n\t\t// and copied into another offscreen canvas with the new size. \n\t\t// The scaled offscreen canvas becomes the image (data) of this object.\n\t\t\n\t\tvar origPixels = ig.getImagePixels( this.data, 0, 0, this.width, this.height );\n\t\t\n\t\tvar widthScaled = this.width * scale;\n\t\tvar heightScaled = this.height * scale;\n\n\t\tvar scaled = ig.$new('canvas');\n\t\tscaled.width = widthScaled;\n\t\tscaled.height = heightScaled;\n\t\tvar scaledCtx = scaled.getContext('2d');\n\t\tvar scaledPixels = scaledCtx.getImageData( 0, 0, widthScaled, heightScaled );\n\t\t\t\n\t\tfor( var y = 0; y < heightScaled; y++ ) {\n\t\t\tfor( var x = 0; x < widthScaled; x++ ) {\n\t\t\t\tvar index = (Math.floor(y / scale) * this.width + Math.floor(x / scale)) * 4;\n\t\t\t\tvar indexScaled = (y * widthScaled + x) * 4;\n\t\t\t\tscaledPixels.data[ indexScaled ] = origPixels.data[ index ];\n\t\t\t\tscaledPixels.data[ indexScaled+1 ] = origPixels.data[ index+1 ];\n\t\t\t\tscaledPixels.data[ indexScaled+2 ] = origPixels.data[ index+2 ];\n\t\t\t\tscaledPixels.data[ indexScaled+3 ] = origPixels.data[ index+3 ];\n\t\t\t}\n\t\t}\n\t\tscaledCtx.putImageData( scaledPixels, 0, 0 );\n\t\tthis.data = scaled;\n\t},\n\t\n\t\n\tdraw: function( targetX, targetY, sourceX, sourceY, width, height ) {\n\t\tif( !this.loaded ) { return; }\n\t\t\n\t\tvar scale = ig.system.scale;\n\t\tsourceX = sourceX ? sourceX * scale : 0;\n\t\tsourceY = sourceY ? sourceY * scale : 0;\n\t\twidth = (width ? width : this.width) * scale;\n\t\theight = (height ? height : this.height) * scale;\n\t\t\n\t\tig.system.context.drawImage( \n\t\t\tthis.data, sourceX, sourceY, width, height,\n\t\t\tig.system.getDrawPos(targetX), \n\t\t\tig.system.getDrawPos(targetY),\n\t\t\twidth, height\n\t\t);\n\t\t\n\t\tig.Image.drawCount++;\n\t},\n\t\n\t\n\tdrawTile: function( targetX, targetY, tile, tileWidth, tileHeight, flipX, flipY ) {\n\t\ttileHeight = tileHeight ? tileHeight : tileWidth;\n\t\t\n\t\tif( !this.loaded || tileWidth > this.width || tileHeight > this.height ) { return; }\n\t\t\n\t\tvar scale = ig.system.scale;\n\t\tvar tileWidthScaled = Math.floor(tileWidth * scale);\n\t\tvar tileHeightScaled = Math.floor(tileHeight * scale);\n\t\t\n\t\tvar scaleX = flipX ? -1 : 1;\n\t\tvar scaleY = flipY ? -1 : 1;\n\t\t\n\t\tif( flipX || flipY ) {\n\t\t\tig.system.context.save();\n\t\t\tig.system.context.scale( scaleX, scaleY );\n\t\t}\n\t\tig.system.context.drawImage( \n\t\t\tthis.data, \n\t\t\t( Math.floor(tile * tileWidth) % this.width ) * scale,\n\t\t\t( Math.floor(tile * tileWidth / this.width) * tileHeight ) * scale,\n\t\t\ttileWidthScaled,\n\t\t\ttileHeightScaled,\n\t\t\tig.system.getDrawPos(targetX) * scaleX - (flipX ? tileWidthScaled : 0), \n\t\t\tig.system.getDrawPos(targetY) * scaleY - (flipY ? tileHeightScaled : 0),\n\t\t\ttileWidthScaled,\n\t\t\ttileHeightScaled\n\t\t);\n\t\tif( flipX || flipY ) {\n\t\t\tig.system.context.restore();\n\t\t}\n\t\t\n\t\tig.Image.drawCount++;\n\t}\n});\n\nig.Image.drawCount = 0;\nig.Image.cache = {};\nig.Image.reloadCache = function() {\n\tfor( var path in ig.Image.cache ) {\n\t\tig.Image.cache[path].reload();\n\t}\n};\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./example/lib/impact/image.js\n **/","\r\n// -----------------------------------------------------------------------------\r\n// Impact Game Engine 1.24\r\n// http://impactjs.com/\r\n// -----------------------------------------------------------------------------\r\n\r\n\r\n(function(window){ \"use strict\";\r\n\r\n// -----------------------------------------------------------------------------\r\n// Native Object extensions\r\n\r\nNumber.prototype.map = function(istart, istop, ostart, ostop) {\r\n\treturn ostart + (ostop - ostart) * ((this - istart) / (istop - istart));\r\n};\r\n\r\nNumber.prototype.limit = function(min, max) {\r\n\treturn Math.min(max, Math.max(min, this));\r\n};\r\n\r\nNumber.prototype.round = function(precision) {\r\n\tprecision = Math.pow(10, precision || 0);\r\n\treturn Math.round(this * precision) / precision;\r\n};\r\n\r\nNumber.prototype.floor = function() {\r\n\treturn Math.floor(this);\r\n};\r\n\r\nNumber.prototype.ceil = function() {\r\n\treturn Math.ceil(this);\r\n};\r\n\r\nNumber.prototype.toInt = function() {\r\n\treturn (this | 0);\r\n};\r\n\r\nNumber.prototype.toRad = function() {\r\n\treturn (this / 180) * Math.PI;\r\n};\r\n\r\nNumber.prototype.toDeg = function() {\r\n\treturn (this * 180) / Math.PI;\r\n};\r\n\r\nObject.defineProperty(Array.prototype, 'erase', {value: function(item) {\r\n\tfor( var i = this.length; i--; ) {\r\n\t\tif( this[i] === item ) {\r\n\t\t\tthis.splice(i, 1);\r\n\t\t}\r\n\t}\r\n\treturn this;\r\n}});\r\n\r\nObject.defineProperty(Array.prototype, 'random', {value: function(item) {\r\n\treturn this[ Math.floor(Math.random() * this.length) ];\r\n}});\r\n\r\nFunction.prototype.bind = Function.prototype.bind || function (oThis) {\r\n\tif( typeof this !== \"function\" ) {\r\n\t\tthrow new TypeError(\"Function.prototype.bind - what is trying to be bound is not callable\");\r\n\t}\r\n\r\n\tvar aArgs = Array.prototype.slice.call(arguments, 1),\r\n\t\tfToBind = this,\r\n\t\tfNOP = function () {},\r\n\t\tfBound = function () {\r\n\t\t\treturn fToBind.apply(\r\n\t\t\t\t(this instanceof fNOP && oThis ? this : oThis),\r\n\t\t\t\taArgs.concat(Array.prototype.slice.call(arguments))\r\n\t\t\t);\r\n\t\t};\r\n\r\n\tfNOP.prototype = this.prototype;\r\n\tfBound.prototype = new fNOP();\r\n\r\n\treturn fBound;\r\n};\r\n\r\n\r\n// -----------------------------------------------------------------------------\r\n// ig Namespace\r\n\r\nwindow.ig = {\r\n\tgame: null,\r\n\tdebug: null,\r\n\tversion: '1.24',\r\n\tglobal: window,\r\n\tmodules: {},\r\n\tresources: [],\r\n\tready: false,\r\n\tbaked: false,\r\n\tnocache: '',\r\n\tua: {},\r\n\tprefix: (window.ImpactPrefix || ''),\r\n\tlib: 'lib/',\r\n\t\r\n\t_current: null,\r\n\t_loadQueue: [],\r\n\t_waitForOnload: 0,\r\n\t\r\n\t\r\n\t$: function( selector ) {\r\n\t\treturn selector.charAt(0) == '#'\r\n\t\t\t? document.getElementById( selector.substr(1) )\r\n\t\t\t: document.getElementsByTagName( selector );\r\n\t},\r\n\t\r\n\t\r\n\t$new: function( name ) {\r\n\t\treturn document.createElement( name );\r\n\t},\r\n\t\r\n\t\r\n\tcopy: function( object ) {\r\n\t\tif(\r\n\t\t   !object || typeof(object) != 'object' ||\r\n\t\t   object instanceof HTMLElement ||\r\n\t\t   object instanceof ig.Class\r\n\t\t) {\r\n\t\t\treturn object;\r\n\t\t}\r\n\t\telse if( object instanceof Array ) {\r\n\t\t\tvar c = [];\r\n\t\t\tfor( var i = 0, l = object.length; i < l; i++) {\r\n\t\t\t\tc[i] = ig.copy(object[i]);\r\n\t\t\t}\r\n\t\t\treturn c;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tvar c = {};\r\n\t\t\tfor( var i in object ) {\r\n\t\t\t\tc[i] = ig.copy(object[i]);\r\n\t\t\t}\r\n\t\t\treturn c;\r\n\t\t}\r\n\t},\r\n\t\r\n\t\r\n\tmerge: function( original, extended ) {\r\n\t\tfor( var key in extended ) {\r\n\t\t\tvar ext = extended[key];\r\n\t\t\tif(\r\n\t\t\t\ttypeof(ext) != 'object' ||\r\n\t\t\t\text instanceof HTMLElement ||\r\n\t\t\t\text instanceof ig.Class ||\r\n\t\t\t\text === null\r\n\t\t\t) {\r\n\t\t\t\toriginal[key] = ext;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif( !original[key] || typeof(original[key]) != 'object' ) {\r\n\t\t\t\t\toriginal[key] = (ext instanceof Array) ? [] : {};\r\n\t\t\t\t}\r\n\t\t\t\tig.merge( original[key], ext );\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn original;\r\n\t},\r\n\t\r\n\t\r\n\tksort: function( obj ) {\r\n\t\tif( !obj || typeof(obj) != 'object' ) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t\t\r\n\t\tvar keys = [], values = [];\r\n\t\tfor( var i in obj ) {\r\n\t\t\tkeys.push(i);\r\n\t\t}\r\n\t\t\r\n\t\tkeys.sort();\r\n\t\tfor( var i = 0; i < keys.length; i++ ) {\r\n\t\t\tvalues.push( obj[keys[i]] );\r\n\t\t}\r\n\t\t\r\n\t\treturn values;\r\n\t},\r\n\r\n\t// Ah, yes. I love vendor prefixes. So much fun!\r\n\tsetVendorAttribute: function( el, attr, val ) {\r\n\t\tvar uc = attr.charAt(0).toUpperCase() + attr.substr(1);\r\n\t\tel[attr] = el['ms'+uc] = el['moz'+uc] = el['webkit'+uc] = el['o'+uc] = val;\r\n\t},\r\n\r\n\r\n\tgetVendorAttribute: function( el, attr ) {\r\n\t\tvar uc = attr.charAt(0).toUpperCase() + attr.substr(1);\r\n\t\treturn el[attr] || el['ms'+uc] || el['moz'+uc] || el['webkit'+uc] || el['o'+uc];\r\n\t},\r\n\r\n\r\n\tnormalizeVendorAttribute: function( el, attr ) {\r\n\t\tvar prefixedVal = ig.getVendorAttribute( el, attr );\r\n\t\tif( !el[attr] && prefixedVal ) {\r\n\t\t\tel[attr] = prefixedVal;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// This function normalizes getImageData to extract the real, actual\r\n\t// pixels from an image. The naive method recently failed on retina\r\n\t// devices with a backgingStoreRatio != 1\r\n\tgetImagePixels: function( image, x, y, width, height ) {\r\n\t\tvar canvas = ig.$new('canvas');\r\n\t\tcanvas.width = image.width;\r\n\t\tcanvas.height = image.height;\r\n\t\tvar ctx = canvas.getContext('2d');\r\n\t\t\r\n\t\t// Try to draw pixels as accurately as possible\r\n\t\tig.System.SCALE.CRISP(canvas, ctx);\r\n\r\n\t\tvar ratio = ig.getVendorAttribute( ctx, 'backingStorePixelRatio' ) || 1;\r\n\t\tig.normalizeVendorAttribute( ctx, 'getImageDataHD' );\r\n\r\n\t\tvar realWidth = image.width / ratio,\r\n\t\t\trealHeight = image.height / ratio;\r\n\r\n\t\tcanvas.width = Math.ceil( realWidth );\r\n\t\tcanvas.height = Math.ceil( realHeight );\r\n\r\n\t\tctx.drawImage( image, 0, 0, realWidth, realHeight );\r\n\t\t\r\n\t\treturn (ratio === 1)\r\n\t\t\t? ctx.getImageData( x, y, width, height )\r\n\t\t\t: ctx.getImageDataHD( x, y, width, height );\r\n\t},\r\n\r\n\t\r\n\tmodule: function( name ) {\r\n\t\tif( ig._current ) {\r\n\t\t\tthrow( \"Module '\"+ig._current.name+\"' defines nothing\" );\r\n\t\t}\r\n\t\tif( ig.modules[name] && ig.modules[name].body ) {\r\n\t\t\tthrow( \"Module '\"+name+\"' is already defined\" );\r\n\t\t}\r\n\t\t\r\n\t\tig._current = {name: name, requires: [], loaded: false, body: null};\r\n\t\tig.modules[name] = ig._current;\r\n\t\tig._loadQueue.push(ig._current);\r\n\t\treturn ig;\r\n\t},\r\n\t\r\n\t\r\n\trequires: function() {\r\n\t\tig._current.requires = Array.prototype.slice.call(arguments);\r\n\t\treturn ig;\r\n\t},\r\n\t\r\n\t\r\n\tdefines: function( body ) {\r\n\t\tig._current.body = body;\r\n\t\tig._current = null;\r\n\t\tig._initDOMReady();\r\n\t},\r\n\t\r\n\t\r\n\taddResource: function( resource ) {\r\n\t\tig.resources.push( resource );\r\n\t},\r\n\t\r\n\t\r\n\tsetNocache: function( set ) {\r\n\t\tig.nocache = set\r\n\t\t\t? '?' + Date.now()\r\n\t\t\t: '';\r\n\t},\r\n\t\r\n\t\r\n\t// Stubs for ig.Debug\r\n\tlog: function() {},\r\n\tassert: function( condition, msg ) {},\r\n\tshow: function( name, number ) {},\r\n\tmark: function( msg, color ) {},\r\n\t\r\n\t\r\n\t_loadScript: function( name, requiredFrom ) {\r\n\t\tig.modules[name] = {name: name, requires:[], loaded: false, body: null};\r\n\t\tig._waitForOnload++;\r\n\t\t\r\n\t\tvar path = ig.prefix + ig.lib + name.replace(/\\./g, '/') + '.js' + ig.nocache;\r\n\t\tvar script = ig.$new('script');\r\n\t\tscript.type = 'text/javascript';\r\n\t\tscript.src = path;\r\n\t\tscript.onload = function() {\r\n\t\t\tig._waitForOnload--;\r\n\t\t\tig._execModules();\r\n\t\t};\r\n\t\tscript.onerror = function() {\r\n\t\t\tthrow(\r\n\t\t\t\t'Failed to load module '+name+' at ' + path + ' ' +\r\n\t\t\t\t'required from ' + requiredFrom\r\n\t\t\t);\r\n\t\t};\r\n\t\tig.$('head')[0].appendChild(script);\r\n\t},\r\n\r\n\t\r\n\t_execModules: function() {\r\n\t\tvar modulesLoaded = false;\r\n\t\tfor( var i = 0; i < ig._loadQueue.length; i++ ) {\r\n\t\t\tvar m = ig._loadQueue[i];\r\n\t\t\tvar dependenciesLoaded = true;\r\n\t\t\t\r\n\t\t\tfor( var j = 0; j < m.requires.length; j++ ) {\r\n\t\t\t\tvar name = m.requires[j];\r\n\t\t\t\tif( !ig.modules[name] ) {\r\n\t\t\t\t\tdependenciesLoaded = false;\r\n\t\t\t\t\tig._loadScript( name, m.name );\r\n\t\t\t\t}\r\n\t\t\t\telse if( !ig.modules[name].loaded ) {\r\n\t\t\t\t\tdependenciesLoaded = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif( dependenciesLoaded && m.body ) {\r\n\t\t\t\tig._loadQueue.splice(i, 1);\r\n\t\t\t\tm.loaded = true;\r\n\t\t\t\tm.body();\r\n\t\t\t\tmodulesLoaded = true;\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif( modulesLoaded ) {\r\n\t\t\tig._execModules();\r\n\t\t}\r\n\t\t\r\n\t\t// No modules executed, no more files to load but loadQueue not empty?\r\n\t\t// Must be some unresolved dependencies!\r\n\t\telse if( !ig.baked && ig._waitForOnload == 0 && ig._loadQueue.length != 0 ) {\r\n\t\t\tvar unresolved = [];\r\n\t\t\tfor( var i = 0; i < ig._loadQueue.length; i++ ) {\r\n\t\t\t\t\r\n\t\t\t\t// Which dependencies aren't loaded?\r\n\t\t\t\tvar unloaded = [];\r\n\t\t\t\tvar requires = ig._loadQueue[i].requires;\r\n\t\t\t\tfor( var j = 0; j < requires.length; j++ ) {\r\n\t\t\t\t\tvar m = ig.modules[ requires[j] ];\r\n\t\t\t\t\tif( !m || !m.loaded ) {\r\n\t\t\t\t\t\tunloaded.push( requires[j] );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tunresolved.push( ig._loadQueue[i].name + ' (requires: ' + unloaded.join(', ') + ')');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthrow( \r\n\t\t\t\t\"Unresolved (or circular?) dependencies. \" +\r\n\t\t\t\t\"Most likely there's a name/path mismatch for one of the listed modules \" +\r\n\t\t\t\t\"or a previous syntax error prevents a module from loading:\\n\" +\r\n\t\t\t\tunresolved.join('\\n')\t\t\t\t\r\n\t\t\t);\r\n\t\t}\r\n\t},\r\n\t\r\n\t\r\n\t_DOMReady: function() {\r\n\t\tif( !ig.modules['dom.ready'].loaded ) {\r\n\t\t\tif ( !document.body ) {\r\n\t\t\t\treturn setTimeout( ig._DOMReady, 13 );\r\n\t\t\t}\r\n\t\t\tig.modules['dom.ready'].loaded = true;\r\n\t\t\tig._waitForOnload--;\r\n\t\t\tig._execModules();\r\n\t\t}\r\n\t\treturn 0;\r\n\t},\r\n\t\r\n\t\r\n\t_boot: function() {\r\n\t\tif( document.location.href.match(/\\?nocache/) ) {\r\n\t\t\tig.setNocache( true );\r\n\t\t}\r\n\t\t\r\n\t\t// Probe user agent string\r\n\t\tig.ua.pixelRatio = window.devicePixelRatio || 1;\r\n\t\tig.ua.viewport = {\r\n\t\t\twidth: window.innerWidth,\r\n\t\t\theight: window.innerHeight\r\n\t\t};\r\n\t\tig.ua.screen = {\r\n\t\t\twidth: window.screen.availWidth * ig.ua.pixelRatio,\r\n\t\t\theight: window.screen.availHeight * ig.ua.pixelRatio\r\n\t\t};\r\n\t\t\r\n\t\tig.ua.iPhone = /iPhone/i.test(navigator.userAgent);\r\n\t\tig.ua.iPhone4 = (ig.ua.iPhone && ig.ua.pixelRatio == 2);\r\n\t\tig.ua.iPad = /iPad/i.test(navigator.userAgent);\r\n\t\tig.ua.android = /android/i.test(navigator.userAgent);\r\n\t\tig.ua.winPhone = /Windows Phone/i.test(navigator.userAgent);\r\n\t\tig.ua.iOS = ig.ua.iPhone || ig.ua.iPad;\r\n\t\tig.ua.mobile = ig.ua.iOS || ig.ua.android || ig.ua.winPhone || /mobile/i.test(navigator.userAgent);\r\n\t\tig.ua.touchDevice = (('ontouchstart' in window) || (window.navigator.msMaxTouchPoints));\r\n\t},\r\n\t\r\n\t\r\n\t_initDOMReady: function() {\r\n\t\tif( ig.modules['dom.ready'] ) {\r\n\t\t\tig._execModules();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tig._boot();\r\n\t\t\r\n\t\t\r\n\t\tig.modules['dom.ready'] = { requires: [], loaded: false, body: null };\r\n\t\tig._waitForOnload++;\r\n\t\tif ( document.readyState === 'complete' ) {\r\n\t\t\tig._DOMReady();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdocument.addEventListener( 'DOMContentLoaded', ig._DOMReady, false );\r\n\t\t\twindow.addEventListener( 'load', ig._DOMReady, false );\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\n// -----------------------------------------------------------------------------\r\n// Provide ig.setAnimation and ig.clearAnimation as a compatible way to use\r\n// requestAnimationFrame if available or setInterval otherwise\r\n\r\n// Use requestAnimationFrame if available\r\nig.normalizeVendorAttribute( window, 'requestAnimationFrame' );\r\nif( window.requestAnimationFrame ) {\r\n\tvar next = 1,\r\n\t\tanims = {};\r\n\r\n\twindow.ig.setAnimation = function( callback, element ) {\r\n\t\tvar current = next++;\r\n\t\tanims[current] = true;\r\n\r\n\t\tvar animate = function() {\r\n\t\t\tif( !anims[current] ) { return; } // deleted?\r\n\t\t\twindow.requestAnimationFrame( animate, element );\r\n\t\t\tcallback();\r\n\t\t};\r\n\t\twindow.requestAnimationFrame( animate, element );\r\n\t\treturn current;\r\n\t};\r\n\r\n\twindow.ig.clearAnimation = function( id ) {\r\n\t\tdelete anims[id];\r\n\t};\r\n}\r\n\r\n// [set/clear]Interval fallback\r\nelse {\r\n\twindow.ig.setAnimation = function( callback, element ) {\r\n\t\treturn window.setInterval( callback, 1000/60 );\r\n\t};\r\n\twindow.ig.clearAnimation = function( id ) {\r\n\t\twindow.clearInterval( id );\r\n\t};\r\n}\r\n\r\n\r\n// -----------------------------------------------------------------------------\r\n// Class object based on John Resigs code; inspired by base2 and Prototype\r\n// http://ejohn.org/blog/simple-javascript-inheritance/\r\n\r\nvar initializing = false, fnTest = /xyz/.test(function(){xyz;}) ? /\\bparent\\b/ : /.*/;\r\nvar lastClassId = 0;\r\n\r\nwindow.ig.Class = function(){};\r\nvar inject = function(prop) {\t\r\n\tvar proto = this.prototype;\r\n\tvar parent = {};\r\n\tfor( var name in prop ) {\t\t\r\n\t\tif( \r\n\t\t\ttypeof(prop[name]) == \"function\" &&\r\n\t\t\ttypeof(proto[name]) == \"function\" && \r\n\t\t\tfnTest.test(prop[name])\r\n\t\t) {\r\n\t\t\tparent[name] = proto[name]; // save original function\r\n\t\t\tproto[name] = (function(name, fn){\r\n\t\t\t\treturn function() {\r\n\t\t\t\t\tvar tmp = this.parent;\r\n\t\t\t\t\tthis.parent = parent[name];\r\n\t\t\t\t\tvar ret = fn.apply(this, arguments);\t\t\t \r\n\t\t\t\t\tthis.parent = tmp;\r\n\t\t\t\t\treturn ret;\r\n\t\t\t\t};\r\n\t\t\t})( name, prop[name] );\r\n\t\t}\r\n\t\telse {\r\n\t\t\tproto[name] = prop[name];\r\n\t\t}\r\n\t}\r\n};\r\n\r\nwindow.ig.Class.extend = function(prop) {\r\n\tvar parent = this.prototype;\r\n \r\n\tinitializing = true;\r\n\tvar prototype = new this();\r\n\tinitializing = false;\r\n \r\n\tfor( var name in prop ) {\r\n\t\tif( \r\n\t\t\ttypeof(prop[name]) == \"function\" &&\r\n\t\t\ttypeof(parent[name]) == \"function\" && \r\n\t\t\tfnTest.test(prop[name])\r\n\t\t) {\r\n\t\t\tprototype[name] = (function(name, fn){\r\n\t\t\t\treturn function() {\r\n\t\t\t\t\tvar tmp = this.parent;\r\n\t\t\t\t\tthis.parent = parent[name];\r\n\t\t\t\t\tvar ret = fn.apply(this, arguments);\t\t\t \r\n\t\t\t\t\tthis.parent = tmp;\r\n\t\t\t\t\treturn ret;\r\n\t\t\t\t};\r\n\t\t\t})( name, prop[name] );\r\n\t\t}\r\n\t\telse {\r\n\t\t\tprototype[name] = prop[name];\r\n\t\t}\r\n\t}\r\n \r\n\tfunction Class() {\r\n\t\tif( !initializing ) {\r\n\r\n\t\t\t// If this class has a staticInstantiate method, invoke it\r\n\t\t\t// and check if we got something back. If not, the normal\r\n\t\t\t// constructor (init) is called.\r\n\t\t\tif( this.staticInstantiate ) {\r\n\t\t\t\tvar obj = this.staticInstantiate.apply(this, arguments);\r\n\t\t\t\tif( obj ) {\r\n\t\t\t\t\treturn obj;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor( var p in this ) {\r\n\t\t\t\tif( typeof(this[p]) == 'object' ) {\r\n\t\t\t\t\tthis[p] = ig.copy(this[p]); // deep copy!\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif( this.init ) {\r\n\t\t\t\tthis.init.apply(this, arguments);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\tClass.prototype = prototype;\r\n\tClass.prototype.constructor = Class;\r\n\tClass.extend = window.ig.Class.extend;\r\n\tClass.inject = inject;\r\n\tClass.classId = prototype.classId = ++lastClassId;\r\n\t\r\n\treturn Class;\r\n};\r\n\r\n// Merge the ImpactMixin - if present - into the 'ig' namespace. This gives other\r\n// code the chance to modify 'ig' before it's doing any work.\r\nif( window.ImpactMixin ) {\r\n\tig.merge(ig, window.ImpactMixin);\r\n}\r\n\r\n})(window);\r\n\r\n\r\n\r\n// -----------------------------------------------------------------------------\r\n// The main() function creates the system, input, sound and game objects,\r\n// creates a preloader and starts the run loop\r\n\r\nig.module(\r\n\t'impact.impact'\r\n)\r\n.requires(\r\n\t'dom.ready',\r\n\t'impact.loader',\r\n\t'impact.system',\r\n\t'impact.input',\r\n\t'impact.sound'\r\n)\r\n.defines(function(){ \"use strict\";\r\n\r\nig.main = function( canvasId, gameClass, fps, width, height, scale, loaderClass ) {\r\n\tig.system = new ig.System( canvasId, fps, width, height, scale || 1 );\r\n\tig.input = new ig.Input();\r\n\tig.soundManager = new ig.SoundManager();\r\n\tig.music = new ig.Music();\r\n\tig.ready = true;\r\n\t\r\n\tvar loader = new (loaderClass || ig.Loader)( gameClass, ig.resources );\r\n\tloader.load();\r\n};\r\n\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./example/lib/impact/impact.js\n **/","ig.module(\n\t'impact.input'\n)\n.defines(function(){ \"use strict\";\n\t\nig.KEY = {\n\t'MOUSE1': -1,\n\t'MOUSE2': -3,\n\t'MWHEEL_UP': -4,\n\t'MWHEEL_DOWN': -5,\n\t\n\t'BACKSPACE': 8,\n\t'TAB': 9,\n\t'ENTER': 13,\n\t'PAUSE': 19,\n\t'CAPS': 20,\n\t'ESC': 27,\n\t'SPACE': 32,\n\t'PAGE_UP': 33,\n\t'PAGE_DOWN': 34,\n\t'END': 35,\n\t'HOME': 36,\n\t'LEFT_ARROW': 37,\n\t'UP_ARROW': 38,\n\t'RIGHT_ARROW': 39,\n\t'DOWN_ARROW': 40,\n\t'INSERT': 45,\n\t'DELETE': 46,\n\t'_0': 48,\n\t'_1': 49,\n\t'_2': 50,\n\t'_3': 51,\n\t'_4': 52,\n\t'_5': 53,\n\t'_6': 54,\n\t'_7': 55,\n\t'_8': 56,\n\t'_9': 57,\n\t'A': 65,\n\t'B': 66,\n\t'C': 67,\n\t'D': 68,\n\t'E': 69,\n\t'F': 70,\n\t'G': 71,\n\t'H': 72,\n\t'I': 73,\n\t'J': 74,\n\t'K': 75,\n\t'L': 76,\n\t'M': 77,\n\t'N': 78,\n\t'O': 79,\n\t'P': 80,\n\t'Q': 81,\n\t'R': 82,\n\t'S': 83,\n\t'T': 84,\n\t'U': 85,\n\t'V': 86,\n\t'W': 87,\n\t'X': 88,\n\t'Y': 89,\n\t'Z': 90,\n\t'NUMPAD_0': 96,\n\t'NUMPAD_1': 97,\n\t'NUMPAD_2': 98,\n\t'NUMPAD_3': 99,\n\t'NUMPAD_4': 100,\n\t'NUMPAD_5': 101,\n\t'NUMPAD_6': 102,\n\t'NUMPAD_7': 103,\n\t'NUMPAD_8': 104,\n\t'NUMPAD_9': 105,\n\t'MULTIPLY': 106,\n\t'ADD': 107,\n\t'SUBSTRACT': 109,\n\t'DECIMAL': 110,\n\t'DIVIDE': 111,\n\t'F1': 112,\n\t'F2': 113,\n\t'F3': 114,\n\t'F4': 115,\n\t'F5': 116,\n\t'F6': 117,\n\t'F7': 118,\n\t'F8': 119,\n\t'F9': 120,\n\t'F10': 121,\n\t'F11': 122,\n\t'F12': 123,\n\t'SHIFT': 16,\n\t'CTRL': 17,\n\t'ALT': 18,\n\t'PLUS': 187,\n\t'COMMA': 188,\n\t'MINUS': 189,\n\t'PERIOD': 190\n};\n\n\nig.Input = ig.Class.extend({\n\tbindings: {},\n\tactions: {},\n\tpresses: {},\n\tlocks: {},\n\tdelayedKeyup: {},\n\t\n\tisUsingMouse: false,\n\tisUsingKeyboard: false,\n\tisUsingAccelerometer: false,\n\tmouse: {x: 0, y: 0},\n\taccel: {x: 0, y: 0, z: 0},\n\t\n\t\n\tinitMouse: function() {\n\t\tif( this.isUsingMouse ) { return; }\n\t\tthis.isUsingMouse = true;\n\t\tvar mouseWheelBound = this.mousewheel.bind(this);\n\t\tig.system.canvas.addEventListener('mousewheel', mouseWheelBound, false );\n\t\tig.system.canvas.addEventListener('DOMMouseScroll', mouseWheelBound, false );\n\t\t\n\t\tig.system.canvas.addEventListener('contextmenu', this.contextmenu.bind(this), false );\n\t\tig.system.canvas.addEventListener('mousedown', this.keydown.bind(this), false );\n\t\tig.system.canvas.addEventListener('mouseup', this.keyup.bind(this), false );\n\t\tig.system.canvas.addEventListener('mousemove', this.mousemove.bind(this), false );\n\t\t\n\t\tif( ig.ua.touchDevice ) {\n\t\t\t// Standard\n\t\t\tig.system.canvas.addEventListener('touchstart', this.keydown.bind(this), false );\n\t\t\tig.system.canvas.addEventListener('touchend', this.keyup.bind(this), false );\n\t\t\tig.system.canvas.addEventListener('touchmove', this.mousemove.bind(this), false );\n\t\t\t\n\t\t\t// MS\n\t\t\tig.system.canvas.addEventListener('MSPointerDown', this.keydown.bind(this), false );\n\t\t\tig.system.canvas.addEventListener('MSPointerUp', this.keyup.bind(this), false );\n\t\t\tig.system.canvas.addEventListener('MSPointerMove', this.mousemove.bind(this), false );\n\t\t\tig.system.canvas.style.msTouchAction = 'none';\n\t\t}\n\t},\n\n\t\n\tinitKeyboard: function() {\n\t\tif( this.isUsingKeyboard ) { return; }\n\t\tthis.isUsingKeyboard = true;\n\t\twindow.addEventListener('keydown', this.keydown.bind(this), false );\n\t\twindow.addEventListener('keyup', this.keyup.bind(this), false );\n\t},\n\t\n\t\n\tinitAccelerometer: function() {\n\t\tif( this.isUsingAccelerometer ) { return; }\n\t\tthis.isUsingAccelerometer = true;\n\t\twindow.addEventListener('devicemotion', this.devicemotion.bind(this), false );\n\t},\n\n\t\n\tmousewheel: function( event ) {\n\t\tvar delta = event.wheelDelta ? event.wheelDelta : (event.detail * -1);\n\t\tvar code = delta > 0 ? ig.KEY.MWHEEL_UP : ig.KEY.MWHEEL_DOWN;\n\t\tvar action = this.bindings[code];\n\t\tif( action ) {\n\t\t\tthis.actions[action] = true;\n\t\t\tthis.presses[action] = true;\n\t\t\tthis.delayedKeyup[action] = true;\n\t\t\tevent.stopPropagation();\n\t\t\tevent.preventDefault();\n\t\t}\n\t},\n\t\n\t\n\tmousemove: function( event ) {\t\t\n\t\tvar internalWidth = parseInt(ig.system.canvas.offsetWidth) || ig.system.realWidth;\n\t\tvar scale = ig.system.scale * (internalWidth / ig.system.realWidth);\n\t\t\n\t\tvar pos = {left: 0, top: 0};\n\t\tif( ig.system.canvas.getBoundingClientRect ) {\n\t\t\tpos = ig.system.canvas.getBoundingClientRect();\n\t\t}\n\t\t\n\t\tvar ev = event.touches ? event.touches[0] : event;\n\t\tthis.mouse.x = (ev.clientX - pos.left) / scale;\n\t\tthis.mouse.y = (ev.clientY - pos.top) / scale;\n\t},\n\t\n\t\n\tcontextmenu: function( event ) {\n\t\tif( this.bindings[ig.KEY.MOUSE2] ) {\n\t\t\tevent.stopPropagation();\n\t\t\tevent.preventDefault();\n\t\t}\n\t},\n\t\n\t\n\tkeydown: function( event ) {\n\t\tvar tag = event.target.tagName;\n\t\tif( tag == 'INPUT' || tag == 'TEXTAREA' ) { return; }\n\t\t\n\t\tvar code = event.type == 'keydown' \n\t\t\t? event.keyCode \n\t\t\t: (event.button == 2 ? ig.KEY.MOUSE2 : ig.KEY.MOUSE1);\n\t\t\n\t\t// Focus window element for mouse clicks. Prevents issues when\n\t\t// running the game in an iframe.\n\t\tif( code < 0 && !ig.ua.mobile ) {\n\t\t\twindow.focus();\n\t\t}\n\t\t\n\t\tif( event.type == 'touchstart' || event.type == 'mousedown' ) {\n\t\t\tthis.mousemove( event );\n\t\t}\n\t\t\t\n\t\tvar action = this.bindings[code];\n\t\tif( action ) {\n\t\t\tthis.actions[action] = true;\n\t\t\tif( !this.locks[action] ) {\n\t\t\t\tthis.presses[action] = true;\n\t\t\t\tthis.locks[action] = true;\n\t\t\t}\n\t\t\tevent.preventDefault();\n\t\t}\n\t},\n\t\n\t\n\tkeyup: function( event ) {\n\t\tvar tag = event.target.tagName;\n\t\tif( tag == 'INPUT' || tag == 'TEXTAREA' ) { return; }\n\t\t\n\t\tvar code = event.type == 'keyup' \n\t\t\t? event.keyCode \n\t\t\t: (event.button == 2 ? ig.KEY.MOUSE2 : ig.KEY.MOUSE1);\n\t\t\n\t\tvar action = this.bindings[code];\n\t\tif( action ) {\n\t\t\tthis.delayedKeyup[action] = true;\n\t\t\tevent.preventDefault();\n\t\t}\n\t},\n\t\n\t\n\tdevicemotion: function( event ) {\n\t\tthis.accel = event.accelerationIncludingGravity;\n\t},\n\t\n\t\n\tbind: function( key, action ) {\n\t\tif( key < 0 ) { this.initMouse(); }\n\t\telse if( key > 0 ) { this.initKeyboard(); }\n\t\tthis.bindings[key] = action;\n\t},\n\t\n\t\n\tbindTouch: function( selector, action ) {\n\t\tvar element = ig.$( selector );\n\t\t\n\t\tvar that = this;\n\t\telement.addEventListener('touchstart', function(ev) {that.touchStart( ev, action );}, false);\n\t\telement.addEventListener('touchend', function(ev) {that.touchEnd( ev, action );}, false);\n\t\telement.addEventListener('MSPointerDown', function(ev) {that.touchStart( ev, action );}, false);\n\t\telement.addEventListener('MSPointerUp', function(ev) {that.touchEnd( ev, action );}, false);\n\t},\n\t\n\t\n\tunbind: function( key ) {\n\t\tvar action = this.bindings[key];\n\t\tthis.delayedKeyup[action] = true;\n\t\t\n\t\tthis.bindings[key] = null;\n\t},\n\t\n\t\n\tunbindAll: function() {\n\t\tthis.bindings = {};\n\t\tthis.actions = {};\n\t\tthis.presses = {};\n\t\tthis.locks = {};\n\t\tthis.delayedKeyup = {};\n\t},\n\t\n\t\n\tstate: function( action ) {\n\t\treturn this.actions[action];\n\t},\n\t\n\t\n\tpressed: function( action ) {\n\t\treturn this.presses[action];\n\t},\n\t\n\treleased: function( action ) {\n\t\treturn !!this.delayedKeyup[action];\n\t},\n\t\t\n\tclearPressed: function() {\n\t\tfor( var action in this.delayedKeyup ) {\n\t\t\tthis.actions[action] = false;\n\t\t\tthis.locks[action] = false;\n\t\t}\n\t\tthis.delayedKeyup = {};\n\t\tthis.presses = {};\n\t},\n\t\n\ttouchStart: function( event, action ) {\n\t\tthis.actions[action] = true;\n\t\tthis.presses[action] = true;\n\t\t\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\t\treturn false;\n\t},\n\t\n\t\n\ttouchEnd: function( event, action ) {\n\t\tthis.delayedKeyup[action] = true;\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\t\treturn false;\n\t}\n});\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./example/lib/impact/input.js\n **/","ig.module(\n\t'impact.loader'\n)\n.requires(\n\t'impact.image',\n\t'impact.font',\n\t'impact.sound'\n)\n.defines(function(){ \"use strict\";\n\nig.Loader = ig.Class.extend({\n\tresources: [],\n\t\n\tgameClass: null,\n\tstatus: 0,\n\tdone: false,\n\t\n\t_unloaded: [],\n\t_drawStatus: 0,\n\t_intervalId: 0,\n\t_loadCallbackBound: null,\n\t\n\t\n\tinit: function( gameClass, resources ) {\n\t\tthis.gameClass = gameClass;\n\t\tthis.resources = resources;\n\t\tthis._loadCallbackBound = this._loadCallback.bind(this);\n\t\t\n\t\tfor( var i = 0; i < this.resources.length; i++ ) {\n\t\t\tthis._unloaded.push( this.resources[i].path );\n\t\t}\n\t},\n\t\n\t\n\tload: function() {\n\t\tig.system.clear( '#000' );\n\t\t\n\t\tif( !this.resources.length ) {\n\t\t\tthis.end();\n\t\t\treturn;\n\t\t}\n\n\t\tfor( var i = 0; i < this.resources.length; i++ ) {\n\t\t\tthis.loadResource( this.resources[i] );\n\t\t}\n\t\tthis._intervalId = setInterval( this.draw.bind(this), 16 );\n\t},\n\t\n\t\n\tloadResource: function( res ) {\n\t\tres.load( this._loadCallbackBound );\n\t},\n\t\n\t\n\tend: function() {\n\t\tif( this.done ) { return; }\n\t\t\n\t\tthis.done = true;\n\t\tclearInterval( this._intervalId );\n\t\tig.system.setGame( this.gameClass );\n\t},\n\t\n\t\n\tdraw: function() {\n\t\tthis._drawStatus += (this.status - this._drawStatus)/5;\n\t\tvar s = ig.system.scale;\n\t\tvar w = ig.system.width * 0.6;\n\t\tvar h = ig.system.height * 0.1;\n\t\tvar x = ig.system.width * 0.5-w/2;\n\t\tvar y = ig.system.height * 0.5-h/2;\n\t\t\n\t\tig.system.context.fillStyle = '#000';\n\t\tig.system.context.fillRect( 0, 0, 480, 320 );\n\t\t\n\t\tig.system.context.fillStyle = '#fff';\n\t\tig.system.context.fillRect( x*s, y*s, w*s, h*s );\n\t\t\n\t\tig.system.context.fillStyle = '#000';\n\t\tig.system.context.fillRect( x*s+s, y*s+s, w*s-s-s, h*s-s-s );\n\t\t\n\t\tig.system.context.fillStyle = '#fff';\n\t\tig.system.context.fillRect( x*s, y*s, w*s*this._drawStatus, h*s );\n\t},\n\t\n\t\n\t_loadCallback: function( path, status ) {\n\t\tif( status ) {\n\t\t\tthis._unloaded.erase( path );\n\t\t}\n\t\telse {\n\t\t\tthrow( 'Failed to load resource: ' + path );\n\t\t}\n\t\t\n\t\tthis.status = 1 - (this._unloaded.length / this.resources.length);\n\t\tif( this._unloaded.length == 0 ) { // all done?\n\t\t\tsetTimeout( this.end.bind(this), 250 );\n\t\t}\n\t}\n});\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./example/lib/impact/loader.js\n **/","ig.module(\n\t'impact.map'\n)\n.defines(function(){ \"use strict\";\n\nig.Map = ig.Class.extend({\n\ttilesize: 8,\n\twidth: 1,\n\theight: 1,\n\tdata: [[]],\n\tname: null,\n\t\n\t\n\tinit: function( tilesize, data ) {\n\t\tthis.tilesize = tilesize;\n\t\tthis.data = data;\n\t\tthis.height = data.length;\n\t\tthis.width = data[0].length;\n\n\t\tthis.pxWidth = this.width * this.tilesize;\n\t\tthis.pxHeight = this.height * this.tilesize;\n\t},\n\t\n\t\n\tgetTile: function( x, y ) {\n\t\tvar tx = Math.floor( x / this.tilesize );\n\t\tvar ty = Math.floor( y / this.tilesize );\n\t\tif( \n\t\t\t(tx >= 0 && tx <  this.width) &&\n\t\t\t(ty >= 0 && ty < this.height)\n\t\t) {\n\t\t\treturn this.data[ty][tx];\n\t\t} \n\t\telse {\n\t\t\treturn 0;\n\t\t}\n\t},\n\t\n\t\n\tsetTile: function( x, y, tile ) {\n\t\tvar tx = Math.floor( x / this.tilesize );\n\t\tvar ty = Math.floor( y / this.tilesize );\n\t\tif( \n\t\t\t(tx >= 0 && tx < this.width) &&\n\t\t\t(ty >= 0 && ty < this.height)\n\t\t) {\n\t\t\tthis.data[ty][tx] = tile;\n\t\t}\n\t}\n});\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./example/lib/impact/map.js\n **/","ig.module(\n\t'impact.sound'\n)\n.defines(function(){ \"use strict\";\n\t\nig.SoundManager = ig.Class.extend({\n\tclips: {},\n\tvolume: 1,\n\tformat: null,\n\t\n\tinit: function() {\n\t\t// Quick sanity check if the Browser supports the Audio tag\n\t\tif( !ig.Sound.enabled || !window.Audio ) {\n\t\t\tig.Sound.enabled = false;\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t// Probe sound formats and determine the file extension to load\n\t\tvar probe = new Audio();\n\t\tfor( var i = 0; i < ig.Sound.use.length; i++ ) {\n\t\t\tvar format = ig.Sound.use[i];\n\t\t\tif( probe.canPlayType(format.mime) ) {\n\t\t\t\tthis.format = format;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\t// No compatible format found? -> Disable sound\n\t\tif( !this.format ) {\n\t\t\tig.Sound.enabled = false;\n\t\t}\n\n\t\t// Create WebAudio Context\n\t\tif( ig.Sound.enabled && ig.Sound.useWebAudio ) {\n\t\t\tthis.audioContext = new AudioContext();\n\t\t\tthis.boundWebAudioUnlock = this.unlockWebAudio.bind(this);\n\t\t\tdocument.addEventListener('touchstart', this.boundWebAudioUnlock, false);\n\n\t\t}\n\t},\n\t\n\tunlockWebAudio: function() {\n\t\tdocument.removeEventListener('touchstart', this.boundWebAudioUnlock, false);\n\t\t\n\t\t// create empty buffer\n\t\tvar buffer = this.audioContext.createBuffer(1, 1, 22050);\n\t\tvar source = this.audioContext.createBufferSource();\n\t\tsource.buffer = buffer;\n\n\t\tsource.connect(this.audioContext.destination);\n\t\tsource.start(0);\n\t},\n\n\tload: function( path, multiChannel, loadCallback ) {\n\t\tif( multiChannel && ig.Sound.useWebAudio ) {\n\t\t\t// Requested as Multichannel and we're using WebAudio?\n\t\t\treturn this.loadWebAudio( path, multiChannel, loadCallback );\n\t\t}\n\t\telse {\n\t\t\t// Oldschool HTML5 Audio - always used for Music\n\t\t\treturn this.loadHTML5Audio( path, multiChannel, loadCallback );\n\t\t}\n\t},\n\n\tloadWebAudio: function( path, multiChannel, loadCallback ) {\n\t\t// Path to the soundfile with the right extension (.ogg or .mp3)\n\t\tvar realPath = ig.prefix + path.replace(/[^\\.]+$/, this.format.ext) + ig.nocache;\n\n\t\tif( this.clips[path] ) {\n\t\t\treturn this.clips[path];\n\t\t}\n\n\t\tvar audioSource = new ig.Sound.WebAudioSource()\n\t\tthis.clips[path] = audioSource;\n\n\t\tvar request = new XMLHttpRequest();\n\t\trequest.open('GET', realPath, true);\n\t\trequest.responseType = 'arraybuffer';\n\n\n\t\tvar that = this;\n\t\trequest.onload = function(ev) {\n\t\t\tthat.audioContext.decodeAudioData(request.response, \n\t\t\t\tfunction(buffer) {\n\t\t\t\t\taudioSource.buffer = buffer;\n\t\t\t\t\tloadCallback( path, true, ev );\n\t\t\t\t}, \n\t\t\t\tfunction(ev) {\n\t\t\t\t\tloadCallback( path, false, ev );\n\t\t\t\t}\n\t\t\t);\n\t\t};\n\t\trequest.onerror = function(ev) {\n\t\t\tloadCallback( path, false, ev );\n\t\t};\n\t\trequest.send();\n\n\t\treturn audioSource;\n\t},\n\t\n\tloadHTML5Audio: function( path, multiChannel, loadCallback ) {\n\t\t\n\t\t// Path to the soundfile with the right extension (.ogg or .mp3)\n\t\tvar realPath = ig.prefix + path.replace(/[^\\.]+$/, this.format.ext) + ig.nocache;\n\t\t\n\t\t// Sound file already loaded?\n\t\tif( this.clips[path] ) {\n\t\t\t// Loaded as WebAudio, but now requested as HTML5 Audio? Probably Music?\n\t\t\tif( this.clips[path] instanceof ig.Sound.WebAudioSource ) {\n\t\t\t\treturn this.clips[path];\n\t\t\t}\n\t\t\t\n\t\t\t// Only loaded as single channel and now requested as multichannel?\n\t\t\tif( multiChannel && this.clips[path].length < ig.Sound.channels ) {\n\t\t\t\tfor( var i = this.clips[path].length; i < ig.Sound.channels; i++ ) {\n\t\t\t\t\tvar a = new Audio( realPath );\n\t\t\t\t\ta.load();\n\t\t\t\t\tthis.clips[path].push( a );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this.clips[path][0];\n\t\t}\n\t\t\n\t\tvar clip = new Audio( realPath );\n\t\tif( loadCallback ) {\n\t\t\t\n\t\t\t// The canplaythrough event is dispatched when the browser determines\n\t\t\t// that the sound can be played without interuption, provided the\n\t\t\t// download rate doesn't change.\n\t\t\t// Mobile browsers stubbornly refuse to preload HTML5, so we simply\n\t\t\t// ignore the canplaythrough event and immediately \"fake\" a successful\n\t\t\t// load callback\n\t\t\tif( ig.ua.mobile ) {\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tloadCallback( path, true, null );\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tclip.addEventListener( 'canplaythrough', function cb(ev){\n\t\t\t\t\tclip.removeEventListener('canplaythrough', cb, false);\n\t\t\t\t\tloadCallback( path, true, ev );\n\t\t\t\t}, false );\n\n\t\t\t\tclip.addEventListener( 'error', function(ev){\n\t\t\t\t\tloadCallback( path, false, ev );\n\t\t\t\t}, false);\n\t\t\t}\n\t\t}\n\t\tclip.preload = 'auto';\n\t\tclip.load();\n\t\t\n\t\t\n\t\tthis.clips[path] = [clip];\n\t\tif( multiChannel ) {\n\t\t\tfor( var i = 1; i < ig.Sound.channels; i++ ) {\n\t\t\t\tvar a = new Audio(realPath);\n\t\t\t\ta.load();\n\t\t\t\tthis.clips[path].push( a );\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn clip;\n\t},\n\t\n\t\n\tget: function( path ) {\n\t\t// Find and return a channel that is not currently playing\t\n\t\tvar channels = this.clips[path];\n\n\t\t// Is this a WebAudio source? We only ever have one for each Sound\n\t\tif( channels && channels instanceof ig.Sound.WebAudioSource ) {\n\t\t\treturn channels;\n\t\t}\n\n\t\t// Oldschool HTML5 Audio - find a channel that's not currently \n\t\t// playing or, if all are playing, rewind one\n\t\tfor( var i = 0, clip; clip = channels[i++]; ) {\n\t\t\tif( clip.paused || clip.ended ) {\n\t\t\t\tif( clip.ended ) {\n\t\t\t\t\tclip.currentTime = 0;\n\t\t\t\t}\n\t\t\t\treturn clip;\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Still here? Pause and rewind the first channel\n\t\tchannels[0].pause();\n\t\tchannels[0].currentTime = 0;\n\t\treturn channels[0];\n\t}\n});\n\n\n\nig.Music = ig.Class.extend({\n\ttracks: [],\n\tnamedTracks: {},\n\tcurrentTrack: null,\n\tcurrentIndex: 0,\n\trandom: false,\n\t\n\t_volume: 1,\n\t_loop: false,\n\t_fadeInterval: 0,\n\t_fadeTimer: null,\n\t_endedCallbackBound: null,\n\t\n\t\n\tinit: function() {\n\t\tthis._endedCallbackBound = this._endedCallback.bind(this);\n\t\t\n\t\tObject.defineProperty(this,\"volume\", { \n\t\t\tget: this.getVolume.bind(this),\n\t\t\tset: this.setVolume.bind(this)\n\t\t});\n\t\t\n\t\tObject.defineProperty(this,\"loop\", { \n\t\t\tget: this.getLooping.bind(this),\n\t\t\tset: this.setLooping.bind(this)\n\t\t});\n\t},\n\t\n\t\n\tadd: function( music, name ) {\n\t\tif( !ig.Sound.enabled ) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tvar path = music instanceof ig.Sound ? music.path : music;\n\t\t\n\t\tvar track = ig.soundManager.load(path, false);\n\n\t\t// Did we get a WebAudio Source? This is suboptimal; Music should be loaded\n\t\t// as HTML5 Audio so it can be streamed\n\t\tif( track instanceof ig.Sound.WebAudioSource ) {\n\t\t\t// Since this error will likely occour at game start, we stop the game\n\t\t\t// to not produce any more errors.\n\t\t\tig.system.stopRunLoop();\n\t\t\tthrow(\n\t\t\t\t\"Sound '\"+path+\"' loaded as Multichannel but used for Music. \" +\n\t\t\t\t\"Set the multiChannel param to false when loading, e.g.: new ig.Sound(path, false)\"\n\t\t\t);\n\t\t}\n\n\t\ttrack.loop = this._loop;\n\t\ttrack.volume = this._volume;\n\t\ttrack.addEventListener( 'ended', this._endedCallbackBound, false );\n\t\tthis.tracks.push( track );\n\t\t\n\t\tif( name ) {\n\t\t\tthis.namedTracks[name] = track;\n\t\t}\n\t\t\n\t\tif( !this.currentTrack ) {\n\t\t\tthis.currentTrack = track;\n\t\t}\n\t},\n\t\n\t\n\tnext: function() {\n\t\tif( !this.tracks.length ) { return; }\n\t\t\n\t\tthis.stop();\n\t\tthis.currentIndex = this.random\n\t\t\t? Math.floor(Math.random() * this.tracks.length)\n\t\t\t: (this.currentIndex + 1) % this.tracks.length;\n\t\tthis.currentTrack = this.tracks[this.currentIndex];\n\t\tthis.play();\n\t},\n\t\n\t\n\tpause: function() {\n\t\tif( !this.currentTrack ) { return; }\n\t\tthis.currentTrack.pause();\n\t},\n\t\n\t\n\tstop: function() {\n\t\tif( !this.currentTrack ) { return; }\n\t\tthis.currentTrack.pause();\n\t\tthis.currentTrack.currentTime = 0;\n\t},\n\t\n\t\n\tplay: function( name ) {\n\t\t// If a name was provided, stop playing the current track (if any)\n\t\t// and play the named track\n\t\tif( name && this.namedTracks[name] ) {\n\t\t\tvar newTrack = this.namedTracks[name];\n\t\t\tif( newTrack != this.currentTrack ) {\n\t\t\t\tthis.stop();\n\t\t\t\tthis.currentTrack = newTrack;\n\t\t\t}\n\t\t}\n\t\telse if( !this.currentTrack ) { \n\t\t\treturn; \n\t\t}\n\t\tthis.currentTrack.play();\n\t},\n\t\n\t\t\n\tgetLooping: function() {\n\t\treturn this._loop;\n\t},\n\t\n\t\n\tsetLooping: function( l ) {\n\t\tthis._loop = l;\n\t\tfor( var i in this.tracks ) {\n\t\t\tthis.tracks[i].loop = l;\n\t\t}\n\t},\t\n\t\t\n\t\n\tgetVolume: function() {\n\t\treturn this._volume;\n\t},\n\t\n\t\n\tsetVolume: function( v ) {\n\t\tthis._volume = v.limit(0,1);\n\t\tfor( var i in this.tracks ) {\n\t\t\tthis.tracks[i].volume = this._volume;\n\t\t}\n\t},\n\t\n\t\n\tfadeOut: function( time ) {\n\t\tif( !this.currentTrack ) { return; }\n\t\t\n\t\tclearInterval( this._fadeInterval );\n\t\tthis.fadeTimer = new ig.Timer( time );\n\t\tthis._fadeInterval = setInterval( this._fadeStep.bind(this), 50 );\n\t},\n\t\n\t\n\t_fadeStep: function() {\n\t\tvar v = this.fadeTimer.delta()\n\t\t\t.map(-this.fadeTimer.target, 0, 1, 0)\n\t\t\t.limit( 0, 1 )\n\t\t\t* this._volume;\n\t\t\n\t\tif( v <= 0.01 ) {\n\t\t\tthis.stop();\n\t\t\tthis.currentTrack.volume = this._volume;\n\t\t\tclearInterval( this._fadeInterval );\n\t\t}\n\t\telse {\n\t\t\tthis.currentTrack.volume = v;\n\t\t}\n\t},\n\t\n\t_endedCallback: function() {\n\t\tif( this._loop ) {\n\t\t\tthis.play();\n\t\t}\n\t\telse {\n\t\t\tthis.next();\n\t\t}\n\t}\n});\n\n\n\nig.Sound = ig.Class.extend({\n\tpath: '',\n\tvolume: 1,\n\tcurrentClip: null,\n\tmultiChannel: true,\n\t_loop: false,\n\t\n\t\n\tinit: function( path, multiChannel ) {\n\t\tthis.path = path;\n\t\tthis.multiChannel = (multiChannel !== false);\n\n\t\tObject.defineProperty(this,\"loop\", { \n\t\t\tget: this.getLooping.bind(this),\n\t\t\tset: this.setLooping.bind(this)\n\t\t});\n\t\t\n\t\tthis.load();\n\t},\n\n\tgetLooping: function() {\n\t\treturn this._loop;\n\t},\n\n\tsetLooping: function( loop ) {\n\t\tthis._loop = loop;\n\n\t\tif( this.currentClip ) {\n\t\t\tthis.currentClip.loop = loop;\n\t\t}\n\t},\t\n\t\n\tload: function( loadCallback ) {\n\t\tif( !ig.Sound.enabled ) {\n\t\t\tif( loadCallback ) {\n\t\t\t\tloadCallback( this.path, true );\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif( ig.ready ) {\n\t\t\tig.soundManager.load( this.path, this.multiChannel, loadCallback );\n\t\t}\n\t\telse {\n\t\t\tig.addResource( this );\n\t\t}\n\t},\n\t\n\t\n\tplay: function() {\n\t\tif( !ig.Sound.enabled ) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.currentClip = ig.soundManager.get( this.path );\n\t\tthis.currentClip.loop = this._loop;\n\t\tthis.currentClip.volume = ig.soundManager.volume * this.volume;\n\t\tthis.currentClip.play();\n\t},\n\t\n\t\n\tstop: function() {\n\t\tif( this.currentClip ) {\n\t\t\tthis.currentClip.pause();\n\t\t\tthis.currentClip.currentTime = 0;\n\t\t}\n\t}\n});\n\n\nig.Sound.WebAudioSource = ig.Class.extend({\n\tsources: [],\n\tgain: null,\n\tbuffer: null,\n\t_loop: false,\n\n\tinit: function() {\n\t\tthis.gain = ig.soundManager.audioContext.createGain();\n\t\tthis.gain.connect(ig.soundManager.audioContext.destination);\n\n\t\tObject.defineProperty(this,\"loop\", { \n\t\t\tget: this.getLooping.bind(this),\n\t\t\tset: this.setLooping.bind(this)\n\t\t});\n\n\t\tObject.defineProperty(this,\"volume\", { \n\t\t\tget: this.getVolume.bind(this),\n\t\t\tset: this.setVolume.bind(this)\n\t\t});\n\t},\n\n\tplay: function() {\n\t\tif( !this.buffer ) { return; }\n\t\tvar source = ig.soundManager.audioContext.createBufferSource();\n\t\tsource.buffer = this.buffer;\n\t\tsource.connect(this.gain); \n\t\tsource.loop = this._loop;\n\n\t\t// Add this new source to our sources array and remove it again\n\t\t// later when it has finished playing.\n\t\tvar that = this;\n\t\tthis.sources.push(source);\n\t\tsource.onended = function(){ that.sources.erase(source); }\n\n\t\tsource.start(0);\n\t},\n\n\tpause: function() {\n\t\tfor( var i = 0; i < this.sources.length; i++ ) {\n\t\t\ttry{\n\t\t\t\tthis.sources[i].stop();\n\t\t\t} catch(err){}\n\t\t}\n\t},\n\n\tgetLooping: function() {\n\t\treturn this._loop;\n\t},\n\n\tsetLooping: function( loop ) {\n\t\tthis._loop = loop;\n\n\t\tfor( var i = 0; i < this.sources.length; i++ ) {\n\t\t\tthis.sources[i].loop = loop;\n\t\t}\n\t},\n\n\tgetVolume: function() {\n\t\treturn this.gain.gain.value;\n\t},\n\n\tsetVolume: function( volume ) {\n\t\tthis.gain.gain.value = volume;\n\t}\n});\n\n\nig.Sound.FORMAT = {\n\tMP3: {ext: 'mp3', mime: 'audio/mpeg'},\n\tM4A: {ext: 'm4a', mime: 'audio/mp4; codecs=mp4a'},\n\tOGG: {ext: 'ogg', mime: 'audio/ogg; codecs=vorbis'},\n\tWEBM: {ext: 'webm', mime: 'audio/webm; codecs=vorbis'},\n\tCAF: {ext: 'caf', mime: 'audio/x-caf'}\n};\nig.Sound.use = [ig.Sound.FORMAT.OGG, ig.Sound.FORMAT.MP3];\nig.Sound.channels = 4;\nig.Sound.enabled = true;\n\nig.normalizeVendorAttribute(window, 'AudioContext');\nig.Sound.useWebAudio = !!window.AudioContext && !window.nwf;\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./example/lib/impact/sound.js\n **/","ig.module(\n\t'impact.system'\n)\n.requires(\n\t'impact.timer',\n\t'impact.image'\n)\n.defines(function(){ \"use strict\";\n\nig.System = ig.Class.extend({\n\tfps: 30,\n\twidth: 320,\n\theight: 240,\n\trealWidth: 320,\n\trealHeight: 240,\n\tscale: 1,\n\t\n\ttick: 0,\n\tanimationId: 0,\n\tnewGameClass: null,\n\trunning: false,\n\t\n\tdelegate: null,\n\tclock: null,\n\tcanvas: null,\n\tcontext: null,\n\t\n\tinit: function( canvasId, fps, width, height, scale ) {\n\t\tthis.fps = fps;\n\t\t\n\t\tthis.clock = new ig.Timer();\n\t\tthis.canvas = ig.$(canvasId);\n\t\tthis.resize( width, height, scale );\n\t\tthis.context = this.canvas.getContext('2d');\n\t\t\n\t\tthis.getDrawPos = ig.System.drawMode;\n\n\t\t// Automatically switch to crisp scaling when using a scale\n\t\t// other than 1\n\t\tif( this.scale != 1 ) {\n\t\t\tig.System.scaleMode = ig.System.SCALE.CRISP;\n\t\t}\n\t\tig.System.scaleMode( this.canvas, this.context );\n\t},\n\t\n\t\n\tresize: function( width, height, scale ) {\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.scale = scale || this.scale;\n\t\t\n\t\tthis.realWidth = this.width * this.scale;\n\t\tthis.realHeight = this.height * this.scale;\n\t\tthis.canvas.width = this.realWidth;\n\t\tthis.canvas.height = this.realHeight;\n\t},\n\t\n\t\n\tsetGame: function( gameClass ) {\n\t\tif( this.running ) {\n\t\t\tthis.newGameClass = gameClass;\n\t\t}\n\t\telse {\n\t\t\tthis.setGameNow( gameClass );\n\t\t}\n\t},\n\t\n\t\n\tsetGameNow: function( gameClass ) {\n\t\tig.game = new (gameClass)();\t\n\t\tig.system.setDelegate( ig.game );\n\t},\n\t\n\t\n\tsetDelegate: function( object ) {\n\t\tif( typeof(object.run) == 'function' ) {\n\t\t\tthis.delegate = object;\n\t\t\tthis.startRunLoop();\n\t\t} else {\n\t\t\tthrow( 'System.setDelegate: No run() function in object' );\n\t\t}\n\t},\n\t\n\t\n\tstopRunLoop: function() {\n\t\tig.clearAnimation( this.animationId );\n\t\tthis.running = false;\n\t},\n\t\n\t\n\tstartRunLoop: function() {\n\t\tthis.stopRunLoop();\n\t\tthis.animationId = ig.setAnimation( this.run.bind(this), this.canvas );\n\t\tthis.running = true;\n\t},\n\t\n\t\n\tclear: function( color ) {\n\t\tthis.context.fillStyle = color;\n\t\tthis.context.fillRect( 0, 0, this.realWidth, this.realHeight );\n\t},\n\t\n\t\n\trun: function() {\n\t\tig.Timer.step();\n\t\tthis.tick = this.clock.tick();\n\t\t\n\t\tthis.delegate.run();\n\t\tig.input.clearPressed();\n\t\t\n\t\tif( this.newGameClass ) {\n\t\t\tthis.setGameNow( this.newGameClass );\n\t\t\tthis.newGameClass = null;\n\t\t}\n\t},\n\t\n\t\n\tgetDrawPos: null // Set through constructor\n});\n\nig.System.DRAW = {\n\tAUTHENTIC: function( p ) { return Math.round(p) * this.scale; },\n\tSMOOTH: function( p ) { return Math.round(p * this.scale); },\n\tSUBPIXEL: function( p ) { return p * this.scale; }\n};\nig.System.drawMode = ig.System.DRAW.SMOOTH;\n\nig.System.SCALE = {\n\tCRISP: function( canvas, context ) {\n\t\tig.setVendorAttribute( context, 'imageSmoothingEnabled', false );\n\t\tcanvas.style.imageRendering = '-moz-crisp-edges';\n\t\tcanvas.style.imageRendering = '-o-crisp-edges';\n\t\tcanvas.style.imageRendering = '-webkit-optimize-contrast';\n\t\tcanvas.style.imageRendering = 'crisp-edges';\n\t\tcanvas.style.msInterpolationMode = 'nearest-neighbor'; // No effect on Canvas :/\n\t},\n\tSMOOTH: function( canvas, context ) {\n\t\tig.setVendorAttribute( context, 'imageSmoothingEnabled', true );\n\t\tcanvas.style.imageRendering = '';\n\t\tcanvas.style.msInterpolationMode = '';\n\t}\n};\nig.System.scaleMode = ig.System.SCALE.SMOOTH;\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./example/lib/impact/system.js\n **/","ig.module(\n\t'impact.timer'\n)\n.defines(function(){ \"use strict\";\n\nig.Timer = ig.Class.extend({\n\ttarget: 0,\n\tbase: 0,\n\tlast: 0,\n\tpausedAt: 0,\n\t\n\tinit: function( seconds ) {\n\t\tthis.base = ig.Timer.time;\n\t\tthis.last = ig.Timer.time;\n\t\t\n\t\tthis.target = seconds || 0;\n\t},\n\t\n\t\n\tset: function( seconds ) {\n\t\tthis.target = seconds || 0;\n\t\tthis.base = ig.Timer.time;\n\t\tthis.pausedAt = 0;\n\t},\n\t\n\t\n\treset: function() {\n\t\tthis.base = ig.Timer.time;\n\t\tthis.pausedAt = 0;\n\t},\n\t\n\t\n\ttick: function() {\n\t\tvar delta = ig.Timer.time - this.last;\n\t\tthis.last = ig.Timer.time;\n\t\treturn (this.pausedAt ? 0 : delta);\n\t},\n\t\n\t\n\tdelta: function() {\n\t\treturn (this.pausedAt || ig.Timer.time) - this.base - this.target;\n\t},\n\n\n\tpause: function() {\n\t\tif( !this.pausedAt ) {\n\t\t\tthis.pausedAt = ig.Timer.time;\n\t\t}\n\t},\n\n\n\tunpause: function() {\n\t\tif( this.pausedAt ) {\n\t\t\tthis.base += ig.Timer.time - this.pausedAt;\n\t\t\tthis.pausedAt = 0;\n\t\t}\n\t}\n});\n\nig.Timer._last = 0;\nig.Timer.time = Number.MIN_VALUE;\nig.Timer.timeScale = 1;\nig.Timer.maxStep = 0.05;\n\nig.Timer.step = function() {\n\tvar current = Date.now();\n\tvar delta = (current - ig.Timer._last) / 1000;\n\tig.Timer.time += Math.min(delta, ig.Timer.maxStep) * ig.Timer.timeScale;\n\tig.Timer._last = current;\n};\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./example/lib/impact/timer.js\n **/"],"sourceRoot":""}